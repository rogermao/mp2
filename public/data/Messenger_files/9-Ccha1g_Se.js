/*!CK:1003953458!*//*1456170532,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["oPkeB"]); }

__d('destroyOnUnload',['Run'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){h.onLeave(j);}f.exports=i;},null);
__d('BlobFactory',['emptyFunction'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=undefined,j=undefined;function k(){try{new b.Blob();j=true;}catch(m){j=false;}}var l=b.BlobBuilder||b.WebKitBlobBuilder||b.MozBlobBuilder||b.MSBlobBuilder;if(b.Blob){i={getBlob:function(m,n){m=m||[];n=n||{};if(j===undefined)k();if(j){return new b.Blob(m,n);}else{var o=new l();for(var p=0;p<m.length;p++)o.append(m[p]);return o.getBlob(n.type);}},isSupported:h.thatReturnsTrue};}else i={getBlob:function(){},isSupported:h.thatReturnsFalse};f.exports=i;},null);
__d('WebWorker',['BanzaiLogger','WebWorkerConfig','BlobFactory','EventListener','URI','areSameOrigin','destroyOnUnload','SubscriptionsHandler','XHRRequest','arrayContains','emptyFunction','getCrossOriginTransport','performanceNow','invariant','memoize','filterObject'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=b.URL||b.webkitURL;function y(ea){'use strict';this.$WebWorker1=false;this.$WebWorker2=null;this.$WebWorker3=ea;this.$WebWorker4=null;this.$WebWorker5=r;this.$WebWorker6=r;this.$WebWorker7=[];this.$WebWorker8=false;this.$WebWorker9=new o();n(function(){if(!this.$WebWorker8)this.terminate();}.bind(this));this.$WebWorker10('constructed');}y.prototype.setMessageHandler=function(ea){'use strict';this.$WebWorker5=ea||r;return this;};y.prototype.setErrorHandler=function(ea){'use strict';this.$WebWorker6=ea||r;return this;};y.prototype.postMessage=function(ea,fa){'use strict';!!this.isCurrentState('constructed')?u(0):undefined;!!this.isCurrentState('terminated')?u(0):undefined;if(this.isCurrentState('preparing')){this.$WebWorker7.push(this.postMessage.bind(this,ea,fa));return this;}var ga={type:'message',message:ea};if(fa){this.$WebWorker4.postMessage(ga,fa);}else this.$WebWorker4.postMessage(ga);return this;};y.prototype.terminate=function(){'use strict';if(this.isCurrentState('executing'))this.$WebWorker4.terminate();if(!this.isCurrentState('terminated')){this.$WebWorker10('terminated');this.$WebWorker4=null;this.$WebWorker11();this.$WebWorker7=[];}return this;};y.prototype.execute=function(){'use strict';!!this.isCurrentState('terminated')?u(0):undefined;if(['preparing','executing'].some(this.isCurrentState,this))return this;this.$WebWorker10('preparing');y.prepareResource(this.$WebWorker3,this.$WebWorker12.bind(this));return this;};y.prototype.setAllowCrossPageTransition=function(ea){'use strict';this.$WebWorker8=ea;return this;};y.prototype.isCurrentState=function(ea){'use strict';!q(y.states,ea)?u(0):undefined;return ea===this.$WebWorker2;};y.prototype.$WebWorker12=function(){'use strict';!!this.isCurrentState('executing')?u(0):undefined;if(this.isCurrentState('terminated'))return;!(this.$WebWorker3.sameOriginURL||this.$WebWorker3.source)?u(0):undefined;if(this.$WebWorker3.sameOriginURL){this.$WebWorker4=new b.Worker(this.$WebWorker3.sameOriginURL);}else{this.$WebWorker4=new b.Worker(y.evalWorkerURL);this.$WebWorker4.postMessage(this.$WebWorker3.source);}this.$WebWorker13('ping',Date.now());if(this.$WebWorker3.dynamicModules)this.$WebWorker13('defineModules',this.$WebWorker3.dynamicModules);this.$WebWorker14();this.$WebWorker10('executing');this.$WebWorker7.forEach(function(ea){return ea();});this.$WebWorker7=null;};y.prototype.$WebWorker11=function(){'use strict';this.$WebWorker9.release();};y.prototype.$WebWorker13=function(ea){for(var fa=arguments.length,ga=Array(fa>1?fa-1:0),ha=1;ha<fa;ha++)ga[ha-1]=arguments[ha];'use strict';this.$WebWorker4.postMessage({type:ea,args:ga});};y.prototype.$WebWorker15=function(event,ea){'use strict';y.$WebWorker15(event,this.$WebWorker3.name,babelHelpers['extends']({},ea,{cross_page_transition:!!this.$WebWorker8,state:this.$WebWorker2}));};y.$WebWorker16=function(){'use strict';return Object.keys(w({object_url:y.$WebWorker17(),eval_url:ca(),data_url:y.$WebWorker18(),worker:y.isSupported(),transferables:y.areTransferablesSupported()},function(ea){return !!ea;}));};y.prototype.$WebWorker14=function(){'use strict';this.$WebWorker9.addSubscriptions(k.listen(this.$WebWorker4,'message',this.$WebWorker19.bind(this)),k.listen(this.$WebWorker4,'error',this.$WebWorker20.bind(this)));};y.prototype.$WebWorker20=function(ea){'use strict';var fa=this.$WebWorker6(ea);if(!fa&&!ea.defaultPrevented)this.$WebWorker15('exception',{message:ea.message});};y.prototype.$WebWorker19=function(event){'use strict';var ea=event.data;switch(ea.type){case 'message':this.$WebWorker5(ea.message);break;case 'pong':this.$WebWorker1=true;this.$WebWorker15('executed',{dt:Math.floor(ea.args[1]-ea.args[0]),bytes:this.$WebWorker3.source.length});break;case 'terminate':this.terminate();break;case 'haste-error':this.terminate();this.$WebWorker15('haste_error',{message:ea.message});break;case 'console':var fa=ea.args.shift();!q(['log','error','info','debug','warn'],fa)?u(0):undefined;b.console[fa].apply(b.console,ea.args);break;}};y.prototype.$WebWorker10=function(ea){'use strict';!q(y.states,ea)?u(0):undefined;this.$WebWorker15('transition',{next_state:ea});this.$WebWorker2=ea;};y.prepareResource=function(ea,fa){'use strict';fa=fa||r;!(ea.sameOriginURL||ea.url||ea.source)?u(0):undefined;!!!y.isSupported()?u(0):undefined;if(ea.sameOriginURL){fa();}else if(ea.url&&m(new l(ea.url),new l(b.location.href))){ea.sameOriginURL=ea.url;fa();}else if(ea.source){if(y.$WebWorker21())ea.sameOriginURL=y.$WebWorker22(ea.source);fa();}else if(!ea.loading){var ga=t();ea.loading=[fa];y.$WebWorker23(ea.url,function(ha){if(ha){ea.source=ha;if(y.$WebWorker21())ea.sameOriginURL=y.$WebWorker22(ha);}y.$WebWorker15('prepared',ea.name,{dt:Math.floor(t()-ga),bytes:ha.length});ea.loading.forEach(function(ia){return ia();});ea.loading=false;});}else ea.loading.push(fa);return ea;};y.releaseResource=function(ea){'use strict';if(ea.sameOriginURL.indexOf('blob:')===0){if(x.revokeObjectURL)x.revokeObjectURL(ea.sameOriginURL);ea.sameOriginURL=null;}return ea;};y.isSupported=function(){'use strict';return ba&&(y.$WebWorker21()||ca());};y.areTransferablesSupported=function(){'use strict';return y.isSupported()&&da();};y.$WebWorker23=function(ea,fa){'use strict';new p(ea).setTransportBuilder(s).setMethod('GET').setResponseHandler(function(ga){fa(ga);}).setErrorHandler(fa.bind(null,null)).send();};y.$WebWorker22=function(ea){'use strict';!y.$WebWorker21()?u(0):undefined;if(y.$WebWorker17()){var fa=j.getBlob([ea],{type:'application/javascript'});return x.createObjectURL(fa);}if(y.$WebWorker18())return 'data:application/javascript,'+encodeURIComponent(ea);};y.$WebWorker17=function(){'use strict';return j.isSupported()&&z();};y.$WebWorker18=function(){'use strict';return aa();};y.$WebWorker21=function(){'use strict';return y.$WebWorker17()||y.$WebWorker18();};y.$WebWorker15=function(event,ea,fa){'use strict';if(!i.logging.enabled)return;h.log(i.logging.config,babelHelpers['extends']({},fa,{features_array:y.$WebWorker16(),event:event,resource:ea}));};var z=v(function(){var ea,fa;if(!x||!x.createObjectURL)return false;try{ea=x.createObjectURL(j.getBlob([''],{type:'application/javascript'}));var ha=new b.Worker(ea);ha.terminate();fa=true;}catch(ga){fa=false;}finally{if(x.revokeObjectURL)x.revokeObjectURL(ea);}return fa;}),aa=v(function(){var ea;try{var ga=new b.Worker('data:application/javascript,');ga.terminate();ea=true;}catch(fa){ea=false;}return ea;}),ba=!!b.Worker,ca=v(function(){var ea;try{var ga=new b.Worker(y.evalWorkerURL);ga.terminate();ea=true;}catch(fa){ea=false;}return ea;}),da=v(function(){var ea;try{var ga=new b.Worker(y.evalWorkerURL),ha=new ArrayBuffer(0);ga.postMessage({buffer:ha},[ha]);ga.terminate();ea=true;}catch(fa){ea=false;}return ea;});y.states=['constructed','preparing','executing','terminated'];y.evalWorkerURL=i.evalWorkerURL;f.exports=y;},null);
__d('MessengerRecorderCommandType',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={INIT:'init',RECORD:'record',EXPORT_WAV:'export_wav',GET_BUFFER:'get_buffer',CLEAR:'clear'};f.exports=h;},null);
__d('MessengerRecorder',['MessengerRecorderCommandType','MessengerRecorderWorkerResource','WebWorker'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=window.AudioContext||window.webkitAudioContext;function l(m){'use strict';var n=new k(),o=n.createMediaStreamSource(m),p=4096,q=o.context;this.$MessengerRecorder2=(q.createScriptProcessor||q.createJavaScriptNode).call(q,p,2,2);this.$MessengerRecorder4=new j(i).setMessageHandler(function(r){this.$MessengerRecorder1(r);}.bind(this)).execute().postMessage({command:h.INIT,config:{sampleRate:q.sampleRate}});this.$MessengerRecorder3=false;this.$MessengerRecorder2.onaudioprocess=this.$MessengerRecorder5.bind(this);o.connect(this.$MessengerRecorder2);this.$MessengerRecorder2.connect(q.destination);}l.prototype.$MessengerRecorder5=function(m){'use strict';if(!this.$MessengerRecorder3)return;this.$MessengerRecorder4.postMessage({command:h.RECORD,buffer:[m.inputBuffer.getChannelData(0),m.inputBuffer.getChannelData(1)]});};l.prototype.record=function(){'use strict';this.$MessengerRecorder3=true;};l.prototype.stop=function(){'use strict';this.$MessengerRecorder3=false;};l.prototype.clear=function(){'use strict';this.$MessengerRecorder4.postMessage({command:h.CLEAR});};l.prototype.getBuffer=function(){'use strict';this.$MessengerRecorder4.postMessage({command:h.GET_BUFFER});};l.prototype.exportWAV=function(m){'use strict';this.$MessengerRecorder1=m;if(!this.$MessengerRecorder1)throw new Error('Callback not set');this.$MessengerRecorder4.postMessage({command:h.EXPORT_WAV,type:'audio/wav'});};f.exports=l;},null);
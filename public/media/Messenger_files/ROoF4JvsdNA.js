/*!CK:1489166252!*//*1456170532,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["kFg0D"]); }

__d("PixelRatioConst",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={cookieName:"dpr"};},null);
__d("ModuleDependencies",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(l,m,n){var o=c.__debug.modulesMap[n],p=c.__debug.deps;if(m[n])return;m[n]=true;if(!o){p[n]&&(l[n]=true);return;}if(!o.dependencies||!o.dependencies.length){if(o.waiting)l[n]=true;return;}o.dependencies.forEach(function(q){h(l,m,q);});}function i(l){if(c.__debug){var m={};h(m,{},l);var n=Object.keys(m);n.sort();return n;}return null;}function j(){var l={loading:{},missing:[]};if(!c.__debug)return l;var m={},n=c.__debug.getModules(),o=c.__debug.deps;for(var p in n){var q=n[p];if(q.waiting){var r={};h(r,{},q.id);delete r[q.id];l.loading[q.id]=Object.keys(r);l.loading[q.id].sort();l.loading[q.id].forEach(function(s){if(!(s in n)&&o[s])m[s]=1;});}}l.missing=Object.keys(m);l.missing.sort();return l;}var k={setRequireDebug:function(l){c.__debug=l;},getMissing:i,getNotLoadedModules:j};f.exports=k;},null);
__d('ModuleErrorLogger',['Bootloader','ErrorUtils','ModuleDependencies','BanzaiScuba'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(o){if(!o||!o.length)return 0;return o.reduce(function(p,q){return p+q;})/o.length;}function m(o){if(!o)return [];var p=[];for(var q in o)p.push(o[q]);return p;}var n={init:function(){i.addListener(function(o){if(o.name!=='ModuleError')return;var p=j.getNotLoadedModules(),q=Object.keys(p.loading),r=m(h.getLoadingUrls()),s=m(h.getLoadedUrlTimes()),t={};p.missing.forEach(function(w){t[w]=1;});var u={};q.forEach(function(w){u[w]=1;});var v=new k('module_errors',null,{addAsnFields:true,addPredictedGeographyFields:true,addBrowserFields:true,addMobileDeviceFields:true,addPageFields:true,addUserFields:true});v.addNormal('message',o.message).addInteger('missing_count',p.missing.length).addInteger('loading_count',q.length).addInteger('error_url_count',h.getErrorUrls().length).addTagset('missing_modules',t).addTagset('loading_modules',u).addInteger('mean_url_loading_time',Math.floor(l(r))).addInteger('mean_url_loaded_time',Math.floor(l(s))).post();},true);}};f.exports=n;},null);
__d('ScriptPathLogger',['Banzai','ScriptPath','isInIframe'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k='script_path_change',l={scriptPath:null,categoryToken:null,extraData:{}},m=false,n='imp_id';function o(x){if(!x||x.search('/feed/topics/')==-1)return '';var y=x.split('/');return y[y.length-1];}function p(x){if(!x||x.search('/review/queue/endless/')==-1)return '';return q(x,'queue_id');}function q(x,y){y=y.replace(/[\[]/,'\\[').replace(/[\]]/,'\\]');var z=new RegExp('[\\?&]'+y+'=([^&#]*)'),aa=z.exec(x);return aa===null?'':decodeURIComponent(aa[1].replace(/\+/g,' '));}function r(x,y,z,aa){if(!m||j())return;var ba=h.isEnabled('vital_navigations')?h.VITAL:h.BASIC,ca={source_path:x.scriptPath,source_token:x.categoryToken,dest_path:y.scriptPath,dest_token:y.categoryToken,impression_id:y.extraData.imp_id,cause:z};if(aa)ca.extra_data=aa;if(x.scriptPath===null)ca.referrer=document.referrer;var da=i.getClickPointInfo();if(da)ca.click_point_info=da;if(x.extraData)for(var ea in x.extraData)if(ea!=n)ca['source_'+ea]=x.extraData[ea];if(y.extraData)for(var fa in y.extraData)if(fa!=n)ca['dest_'+fa]=y.extraData[fa];var ga=o(window.location.href);if(ga!='')ca.dest_topic_feed=ga;var ha=p(window.location.href);if(ha!='')ca.dest_srt_queue_id=ha;if(x.topViewEndpoint)ca.source_endpoint=x.topViewEndpoint;if(y.topViewEndpoint)ca.dest_endpoint=y.topViewEndpoint;if(x.restored)ca.source_restored=true;h.post(k,ca,ba);i.setClickPointInfo(null);}function s(){r(i.getSourcePageInfo()||l,i.getPageInfo(),i.CAUSE.PAGE_LOAD);}function t(x,y,z){r(x,y,i.CAUSE.TRANSITION,z);}function u(){r(i.getPageInfo(),l,i.CAUSE.PAGE_UNLOAD);i.shutdown();}var v=i.subscribe(function(x){if(m){var y=x.source,z=x.dest,aa=x.cause,ba=x.extraData;if(aa){r(y||l,z||l,aa,ba);}else if(y){t(y,z,ba);}else s();}});h.subscribe(h.SHUTDOWN,u);var w={startLogging:function(){m=true;if(i.getPageInfo())s();},stopLogging:function(){m=false;i.unsubscribe(v);}};w.BANZAI_LOGGING_ROUTE=k;f.exports=w;},null);
__d('MarketingLogger',['BanzaiLogger'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j=[];function k(l,m){'use strict';i=this;this.$MarketingLogger1=m||{};this.$MarketingLogger2={};this.$MarketingLogger3=h.create(l);this.$MarketingLogger4('page_load');this.$MarketingLogger5();}k.prototype.$MarketingLogger4=function(l,m){'use strict';m=m||{};var n=babelHelpers['extends']({event:l},m,this.$MarketingLogger1);this.$MarketingLogger3.log('MarketingLoggerConfig',n);};k.prototype.$MarketingLogger6=function(l,m){'use strict';if(this.$MarketingLogger2[l])return;this.$MarketingLogger4(l,m);this.$MarketingLogger2[l]=true;};k.prototype.$MarketingLogger5=function(){'use strict';for(var l=0;l<j.length;l++)j[l]();j=[];};k.log=function(l,m){'use strict';if(!i){j.push(function(){k.log(l,m);});return;}i.$MarketingLogger4(l,m);};k.logOnce=function(l,m){'use strict';if(!i){j.push(function(){k.logOnce(l,m);});return;}i.$MarketingLogger6(l,m);};f.exports=k;},null);
__d('TimeSpentArray',['Banzai','pageID','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=2,l=k*32,m,n,o,p,q,r,s,t,u,v={},w;function x(){return {timeoutDelayMap:v,nextDelay:w,timeoutInSeconds:o};}function y(){if(m){var ga=Date.now();if(ga>q)s=Math.min(l,Math.ceil(ga/1000-p));var ha=da();if(ha)m(ha,w);}ca();}function z(){aa();n=j(y,o*1000);}function aa(){if(n){clearTimeout(n);n=null;}}function ba(ga){p=ga;q=p*1000;r=[1];for(var ha=1;ha<k;ha++)r.push(0);s=1;t+=1;u+=1;var ia=u.toString()+'_delay';w=v[ia];if(typeof w=='undefined')w=v.delay;var ja=u.toString()+'_timeout',ka=v[ja];if(typeof ka=='undefined')ka=v.timeout;ka=Math.min(ka,l);o=ka||l;z();}function ca(){aa();r=null;}function da(){if(!r)return null;return {tos_id:i,start_time:p,tos_array:r.slice(0),tos_len:s,tos_seq:u,tos_cum:t};}function ea(ga){if(ga>=q&&ga-q<1000)return;fa(Math.floor(ga/1000));}function fa(ga){var ha=ga-p;if(ha<0||ha>=l)y();if(!r){ba(ga);}else{r[ha>>5]|=1<<(ha&31);s=ha+1;t+=1;q=ga*1000;}}f.exports={init:function(ga,ha,ia){t=0;u=-1;m=ga;if(typeof ha=='object'&&ha!==null){v=ha;}else v={};if(!ia)ia=Date.now();ba(Math.floor(ia/1000));h.subscribe(h.SHUTDOWN,y);},update:function(ga){ea(ga);},get:function(){return da();},ship:function(){y();},reset:function(){ca();},testState:function(){return x();}};},null);
__d('TimeSpentImmediateActiveSecondsLogger',['Banzai','ImmediateActiveSecondsConfig','ScriptPath'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k='immediate_active_seconds',l={signal:true,retry:true},m=i.sampling_rate,n=i.ias_bucket,o=0;function p(t){if(m<=0)return false;var u=Math.floor(t/1000)%m;return u===n;}function q(t){if(t>=o&&t-o<1000)return;if(p(t)){var u={activity_time_ms:t,last_activity_time_ms:o,script_path:j.getTopViewEndpoint()};try{h.post(k,u,l);}catch(v){}}o=Math.floor(t/1000)*1000;}function r(event,t,u){if(v<0||w<0||v>w)return;var v=Math.floor(t/1000),w=Math.floor(u/1000);if(!s(v,w))return;var x={event:event,start_time_ms:t,end_time_ms:u};h.post(k,x,l);}function s(t,u){if(m<=0)return false;if(u-t>=m)return true;var v=t+(n-t%m+m)%m;return v<=u;}f.exports={maybeReportActiveSecond:q,maybeReportActiveInterval:r};},null);
__d('collectDataAttributes',['getContextualParent'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='normal';function j(k,l,m){var n={},o=[],p=l.length,q;for(q=0;q<p;++q){n[l[q]]={};o.push('data-'+l[q]);}if(m){n[i]={};for(q=0;q<(m||[]).length;++q)o.push(m[q]);}var r={tn:'',"tn-debug":','};while(k){if(k.getAttribute)for(q=0;q<o.length;++q){var s=o[q],t=k.getAttribute(s);if(t){if(q>=p){if(n[i][s]===undefined)n[i][s]=t;continue;}var u=JSON.parse(t);for(var v in u)if(r[v]!==undefined){if(n[l[q]][v]===undefined)n[l[q]][v]=[];n[l[q]][v].push(u[v]);}else if(n[l[q]][v]===undefined)n[l[q]][v]=u[v];}}k=h(k);}for(var w in n)for(var x in r)if(n[w][x]!==undefined)n[w][x]=n[w][x].join(r[x]);return n;}f.exports=j;},null);
__d('FlipDirection',['DOM','Input','Style'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={setDirection:function(l){var m=h.isNodeOfType(l,'input')&&l.type=='text',n=h.isNodeOfType(l,'textarea');if(!(m||n)||l.getAttribute('data-prevent-auto-flip'))return;var o=i.getValue(l),p=l.style&&l.style.direction;if(!p){var q=0,r=true;for(var s=0;s<o.length;s++){var t=o.charCodeAt(s);if(t>=48){if(r){r=false;q++;}if(t>=1470&&t<=1920){j.set(l,'direction','rtl');l.setAttribute('dir','rtl');return;}if(q==5){j.set(l,'direction','ltr');l.setAttribute('dir','ltr');return;}}else r=true;}}else if(o.length===0){j.set(l,'direction','');l.removeAttribute('dir');}}};f.exports=k;},null);
__d('FlipDirectionOnKeypress',['Event','FlipDirection'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=function(event){var k=event.getTarget();i.setDirection(k);};h.listen(document.documentElement,{keyup:j,input:j});},null);
__d('ClickRefUtils',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={get_intern_ref:function(i){if(!!i){var j={profile_minifeed:1,gb_content_and_toolbar:1,gb_muffin_area:1,ego:1,bookmarks_menu:1,jewelBoxNotif:1,jewelNotif:1,BeeperBox:1,searchBarClickRef:1};for(var k=i;k&&k!=document.body;k=k.parentNode){if(!k.id||typeof k.id!=='string')continue;if(k.id.substr(0,8)=='pagelet_')return k.id.substr(8);if(k.id.substr(0,8)=='box_app_')return k.id;if(j[k.id])return k.id;}}return '-';},get_href:function(i){var j=i.getAttribute&&(i.getAttribute('ajaxify')||i.getAttribute('data-endpoint'))||i.action||i.href||i.name;return typeof j==='string'?j:null;},should_report:function(i,j){if(j=='FORCE')return true;if(j=='INDIRECT')return false;return i&&(h.get_href(i)||i.getAttribute&&i.getAttribute('data-ft'));}};f.exports=h;},null);
__d("setUECookie",["Env"],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){if(!h.no_cookies)document.cookie="act="+encodeURIComponent(j)+"; path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');}f.exports=i;},null);
__d('ClickRefLogger',['Arbiter','Banzai','ClickRefUtils','Env','ScriptPath','SessionName','Vector','$','collectDataAttributes','ge','pageID','setUECookie'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t={delay:0,retry:true};function u(y){if(!q('content'))return [0,0,0,0];var z=o('content'),aa=n.getEventPosition(y);return [aa.x,aa.y,z.offsetLeft,z.clientWidth];}function v(y,z,event,aa){var ba='r',ca=[0,0,0,0],da,ea;if(!!event){da=event.type;if(da=='click'&&q('content'))ca=u(event);var fa=0;event.ctrlKey&&(fa+=1);event.shiftKey&&(fa+=2);event.altKey&&(fa+=4);event.metaKey&&(fa+=8);if(fa)da+=fa;}if(!!z)ea=j.get_href(z);var ga=p(!!event?event.target||event.srcElement:z,['ft','gt']);Object.assign(ga.ft,aa.ft);Object.assign(ga.gt,aa.gt);if(typeof ga.ft.ei==='string')delete ga.ft.ei;var ha=[y._ue_ts,y._ue_count,ea||'-',y._context,da||'-',j.get_intern_ref(z),ba,b.URI?b.URI.getRequestURI(true,true).getUnqualifiedURI().toString():location.pathname+location.search+location.hash,ga].concat(ca).concat(r).concat(l.getScriptPath());return ha;}h.subscribe("ClickRefAction/new",function(y,z){if(j.should_report(z.node,z.mode)){var aa=v(z.cfa,z.node,z.event,z.extra_data);s(z.cfa.ue);var ba=[m.getName(),Date.now(),'act'];i.post('click_ref_logger',Array.prototype.concat(ba,aa),t);}});function w(y){function z(ha){var ia='';for(var ja=0;ja<ha.length;ja++)ia+=String.fromCharCode(1^ha.charCodeAt(ja));return ia;}function aa(ha,ia,ja,ka){var la=ia[ja];if(la&&ha&&la in ha)if(ja+1<ia.length){aa(ha[la],ia,ja+1,ka);}else{var ma=ha[la],na=function(){setTimeout(ka.bind(null,arguments));return ma.apply(this,arguments);};na.toString=ma.toString.bind(ma);Object.defineProperty(ha,la,{configurable:false,writable:true,value:na});}}var ba={},ca={},da=false;function ea(ha,ia){if(ca[ha])return;ca[ha]=ba[ha]=1;}var fa=y[z('jiri')];if(fa){var ga=[];z(fa).split(',').map(function(ha,ia){var ja=ha.substring(1).split(':'),ka;switch(ha.charAt(0)){case '1':ka=new RegExp('\\b('+ja[0]+')\\b','i');ga.push(function(la){var ma=ka.exec(Object.keys(window));if(ma)ea(ia,''+ma);});break;case '2':ka=new RegExp(ja[0]);aa(window,ja,2,function(la){var ma=la[ja[1]];if(typeof ma==='string'&&ka.test(ma))ea(ia,ha);});break;case '3':aa(window,ja,0,function(){for(var la=ga.length;la--;)ga[la]();var ma=Object.keys(ba);if(ma.length){ba={};setTimeout(i[z('qnru')].bind(i,z('islg'),{m:''+ma}),5000);}});break;case '4':da=true;break;}});}}try{w(k);}catch(x){}},null);
__d('NoscriptOverride',['Cookie','goURI'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={redirectToJSPage:function(k){h.clear('noscript');i(k);}};f.exports=j;},null);
__d('PixelRatio',['Arbiter','Cookie','PixelRatioConst','Run'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=j.cookieName,m,n;function o(){return window.devicePixelRatio||1;}function p(){i.set(l,o());}function q(){i.clear(l);}function r(){var t=o();if(t!==m){p();}else q();}var s={startDetecting:function(t){m=t||1;q();if(n)return;n=[h.subscribe('pre_page_transition',r)];k.onBeforeUnload(r);}};f.exports=s;},null);
__d('PostLoadJS',['Bootloader','Run','emptyFunction'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(m,n){i.onAfterLoad(function(){h.loadModules.call(h,[m],n);});}var l={loadAndRequire:function(m){k(m,j);},loadAndCall:function(m,n,o){k(m,function(p){p[n].apply(p,o);});}};f.exports=l;},null);
__d("ScreenDimensionsAutoSet",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){if(!window.btoa)return '';var j={w:screen.width,h:screen.height,aw:screen.availWidth,ah:screen.availHeight,c:screen.colorDepth};return btoa(JSON.stringify(j));}var i={setInputValue:function(j){j.value=h();}};f.exports=i;},null);
__d('TimeSpentBitArrayLogger',['Arbiter','Banzai','BanzaiODS','TimeSpentArray','TimeSpentConfig','TimeSpentImmediateActiveSecondsLogger','UserActivity','isInIframe'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p={delay:i.BASIC.delay,retry:true};function q(r,s){if(i.isEnabled('time_spent_bit_array')){h.inform('timespent/tosbitdataposted',babelHelpers['extends']({},r));if(typeof s=='number'){p.delay=s;}else p.delay=i.BASIC.delay;i.post('time_spent_bit_array',babelHelpers['extends']({},r),p);p.delay=l.delay;}}f.exports={init:function(r){if(o())return;n.subscribe(function(t,u){var v=u.last_inform;k.update(v);m.maybeReportActiveSecond(v);});var s=Date.now();k.init(q,l,s);m.maybeReportActiveSecond(s);j.bumpEntityKey('ms.time_spent.qa.www','time_spent.bits.js_initialized');}};},null);
__d('UserActionHistory',['Arbiter','ClickRefUtils','ScriptPath','throttle','WebStorage'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m={click:1,submit:1},n=false,o={log:[],len:0},p=k.acrossTransitions(function(){try{n._ua_log=JSON.stringify(o);}catch(s){n=false;}},1000);function q(){var s=l.getSessionStorage();if(s){n=s;n._ua_log&&(o=JSON.parse(n._ua_log));}else n=false;o.log[o.len%10]={ts:Date.now(),path:'-',index:o.len,type:'init',iref:'-'};o.len++;h.subscribe("UserAction/new",function(t,u){var v=u.ua,w=u.node,event=u.event;if(!event||!(event.type in m))return;var x={path:j.getScriptPath(),type:event.type,ts:v._ue_ts,iref:i.get_intern_ref(w)||'-',index:o.len};o.log[o.len++%10]=x;n&&p();});}function r(){return o.log.sort(function(s,t){return t.ts!=s.ts?t.ts-s.ts:t.index-s.index;});}q();f.exports={getHistory:r};},null);
__d('Chromedome',['fbt'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();g.start=function(i){if(i.off||top!==window||!/(^|\.)facebook\.(com|sg)$/.test(document.domain))return;var j=i.stop||h._("Stop!"),k=i.text||h._("This is a browser feature intended for developers. If someone told you to copy-paste something here to enable a Facebook feature or \"hack\" someone's account, it is a scam and will give them access to your Facebook account."),l=i.more||h._("See {url} for more information.",[h.param('url','https://www.facebook.com/selfxss')]);if((window.chrome||window.safari)&&!i.textonly){var m='font-family:helvetica; font-size:20px; ';[[j,i.c1||m+'font-size:50px; font-weight:bold; '+'color:red; -webkit-text-stroke:1px black;'],[k,i.c2||m],[l,i.c3||m],['','']].map(function(s){setTimeout(console.log.bind(console,'\n%c'+s[0],s[1]));});}else{var n=['',' .d8888b.  888                       888','d88P  Y88b 888                       888','Y88b.      888                       888',' "Y888b.   888888  .d88b.  88888b.   888','    "Y88b. 888    d88""88b 888 "88b  888','      "888 888    888  888 888  888  Y8P','Y88b  d88P Y88b.  Y88..88P 888 d88P',' "Y8888P"   "Y888  "Y88P"  88888P"   888','                           888','                           888','                           888'],o=(''+k).match(/.{35}.+?\s+|.+$/g),p=Math.floor(Math.max(0,(n.length-o.length)/2));for(var q=0;q<n.length||q<o.length;q++){var r=n[q];n[q]=r+new Array(45-r.length).join(' ')+(o[q-p]||'');}console.log('\n\n\n'+n.join('\n')+'\n\n'+l+'\n');return;}};},null);
__d('NavigationClickPointHandler',['Event','ScriptPath','collectDataAttributes'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={getClickPointInfo:function(m){var n=null,o=j(m,['ft'],['href','data-click']),p=o.normal.href;if(!p||p==='#')return false;var q=o.normal['data-click'];if(n===null&&q)n={click:q};var r=o.ft.tn;if(n===null&&r)n={tn:r};if(n===null&&m.getAttribute){var s=m.getAttribute('class');if(s)n={'class':s};}return n;}};function l(event){var m=event.target||event.srcElement,n=k.getClickPointInfo(m);if(n!==false)i.setClickPointInfo(n);}h.listen(document.documentElement,{click:l});f.exports=k;},null);
__d('TimezoneAutoset',['AsyncRequest','emptyFunction'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=false;function k(n){var o=new Date(),p=o.getTimezoneOffset()/30,q=o.getTime()/1000,r=Math.round((n-q)/1800),s=Math.round(p+r)%48;if(s==0){return 0;}else if(s>24){s-=Math.ceil(s/48)*48;}else if(s<-28)s+=Math.ceil(s/-48)*48;return s*30;}function l(n,o,p){if(!n||undefined==o)return;if(j)return;j=true;var q=-k(n);if(p||q!=o){var r='/ajax/timezone/update.php';new h().setURI(r).setData({gmt_off:q,is_forced:p}).setErrorHandler(i).setTransportErrorHandler(i).setOption('suppressErrorAlerts',true).send();}}var m={setInputValue:function(n,o){n.value=k(o);},setTimezone:l};f.exports=m;},null);
__d('UIForm',['ArbiterMixin','BehaviorsMixin','DOM','Event','Form','Run','areJSONRepresentationsEqual','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p,q;if(c.__markCompiled)c.__markCompiled();p=babelHelpers.inherits(r,o(h,i));q=p&&p.prototype;function r(s,t,u,v,w){'use strict';q.constructor.call(this);this._root=s;this.controller=s;this._message=t;if(v){this._confirm_dialog=v;v.subscribe('confirm',this._handleDialogConfirm.bind(this));j.prependContent(this._root,j.create('input',{type:'hidden',name:'confirmed',value:'true'}));}m.onAfterLoad(function(){this._originalState=l.serialize(this._root);}.bind(this));this._forceDirty=u;this._confirmed=false;this._submitted=false;k.listen(this._root,'submit',this._handleSubmit.bind(this));if(w&&w.length)this.enableBehaviors(w);var x=true;m.onBeforeUnload(this.checkUnsaved.bind(this),x);}r.prototype.getRoot=function(){'use strict';return this._root;};r.prototype._handleSubmit=function(){'use strict';if(this._confirm_dialog&&!this._confirmed){this._confirm_dialog.show();return false;}if(this.inform('submit')===false)return false;this._submitted=true;return true;};r.prototype._handleDialogConfirm=function(){'use strict';this._confirmed=true;this._confirm_dialog.hide();if(this._root.getAttribute('ajaxify')){k.fire(this._root,'submit');}else if(this._handleSubmit())this._root.submit();};r.prototype.reset=function(){'use strict';this.inform('reset');this._submitted=false;this._confirmed=false;};r.prototype.isDirty=function(){'use strict';if(this._submitted||!j.contains(document.body,this._root))return false;if(this._forceDirty)return true;if(!this._originalState)return false;var s=l.serialize(this._root);return !n(s,this._originalState);};r.prototype.checkUnsaved=function(){'use strict';if(this.isDirty())return this._message;return null;};f.exports=b.UIForm||r;},null);
/*!CK:1506072270!*//*1456526300,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["FgCwh"]); }

__d("BusinessConf",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={DOMAIN:"business",HOSTNAME:"business.facebook.com",BIZ_ID_PARAM_NAME:"business_id",LABEL_ID_PARAM_NAME:"project_id",ACCOUNT_ID_PARAM_NAME:"act",ACCOUNT_ID_PARAM_NAME_LONG:"account_id",ACCOUNT_IDS_PARAM_NAME_LONG:"account_ids",ACCOUNT_ID_CATEGORY_NAME:"cat",PAGE_ID_PARAM_NAME:"id",PAGE_ADMIN_SELECTED_KEY:"sk",PRODUCT_CATALOG_ID_PARAM_NAME:"catalog_id",PRODUCT_FEED_ID_PARAM_NAME:"feed_id",LEGACY_ADS_MANAGER_PREFIX:"\/ads\/manage\/",CAMPAIGN_MANAGER_PREFIX:"\/ads\/manager\/",SAM_PREFIX:"\/ads\/management\/",AUDIENCE_INSIGHTS_PREFIX:"\/ads\/audience_insights\/",SHOW_ADD_PRODUCT_FEED_DIALOG:"add_feed",SHOW_SPLASH_PARAM_NAME:"splash",SHOW_GRAY_MIGRATE_COMPLETE_SPLASH_PARAM_NAME:"migrate",ASSET_ID_PARAM_NAME:"asset_id",COMMENT_ID_PARAM_NAME:"comment_id",NAV_SOURCE_PARAM_NAME:"nav_source",WHITELISTED_URI_CLASS:"bizOK",OPT_OUT_KEY:"do_not_redirect_to_biz_site",GRAY_MIGRATE_KEY:"tried_to_migrate_from_gray_account",HIDE_OPT_OUT_KEY:"hide_opt_out",HIDE_HOME_V3_SPLASH_KEY:"hide_home_v3_splash",SEARCH_NUX_KEY:"search_nux",FAVORITES_NUX_KEY:"favorites_nux",CAKE_NUX_IS_OPTED_OUT:"1",DPA_TD_WELCOME_NUX_KEY:"dpa_td_welcome_nux",BUSINESS_UNIFIED_CHROME:"business_unified_chrome",DPA_TD_WELCOME_NUX_ID:3918,OPT_OUT_EXPIRE:259200,HIGHLANDER_OPT_OUT_KEY:"use_biz_page_in_highlander"};},null);
__d("ChatNotificationConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={NORMAL:0,NO_USER_MESSAGE_NOTIFICATION:1};},null);
__d("ChatSidebarSections",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MORE_ONLINE_FRIENDS:"more_online_friends",MORE_ONLINE_COWORKERS:"more_online_coworkers",OFFLINE_USERS:"offline_users",ORDERED_LIST:"ordered_list",ORDERED_COWORKERS:"ordered_coworkers",TYPEAHEAD:"typeahead",NOW_PINNED_LIST:"now_pinned_list"};},null);
__d("ChatTypeaheadEvent",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ABANDONED_QUERY:"abandoned_query",NEW_QUERY:"new_query",RESULT_SELECTED:"result_selected"};},null);
__d("GenderConst",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={NOT_A_PERSON:0,FEMALE_SINGULAR:1,MALE_SINGULAR:2,FEMALE_SINGULAR_GUESS:3,MALE_SINGULAR_GUESS:4,MIXED_SINGULAR:5,MIXED_PLURAL:5,NEUTER_SINGULAR:6,UNKNOWN_SINGULAR:7,FEMALE_PLURAL:8,MALE_PLURAL:9,NEUTER_PLURAL:10,UNKNOWN_PLURAL:11,UNKNOWN:0};},null);
__d("OzConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={AUTHOR_TYPES:{BOT:"bot",TRAINER:"trainer",USER:"user"},ATTS:{COMMAND:"\u0040COMMAND",IMAGE:"image",SUGG:"\u0040SUGG",TEMPLATE:"template",SURVEY:"survey"},SESSION_INFO_EVENT:"iframenonce_fb_session_info",TOKENS:{USER_FIRST_NAME:"user-first-name"},REMINDERS:{RANGE_IN_YEARS:5},M_FBIDS:{M:"881263441913087",M_DEV:"1579802578966277",P:"506060876211905"}};},null);
__d("SidebarType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SIDEBAR:"sidebar",BUDDYLIST:"buddylist",BUDDYLIST_NUB:"buddylist_nub"};},null);
__d("SyncRequestStatusEnum",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={PENDING:0,ACCEPTED:1,REJECTED:2,EXPIRED:3,CANCELED:4,namesByValue:["PENDING","ACCEPTED","REJECTED","EXPIRED","CANCELED"]};},null);
__d("TrackingNodeTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={HEADLINE:1,USER_NAME:2,ACTOR_PHOTO:3,ACTION_LINKS:4,LIKE_LINK:5,UNLIKE_LINK:6,PARTICIPANT:7,PRONOUN:8,ROBOTEXT:9,TITLE:10,MEDIA_GENERIC:11,PHOTO:12,VIDEO:13,MUSIC:14,ATTACHMENT:15,NAME_LIST:16,SHARE_LINK:17,USER_MESSAGE:18,SUBTITLE:19,DESCRIPTION:20,SOURCE:21,BLINGBOX:22,OTHER:23,VIEW_ALL_COMMENTS:24,COMMENT:25,COMMENT_LINK:26,SMALL_ACTOR_PHOTO:27,SUBSTORY:28,XBUTTON:29,HIDE_LINK:30,REPORT_SPAM_LINK:31,HIDE_ALL_LINK:32,BAD_AGGREGATION_LINK:33,ADD_COMMENT_BOX:34,APP_CALL_TO_ACTION:35,UFI:36,OG_LEFT_SLIDE_PAGER:37,OG_RIGHT_SLIDE_PAGER:38,EXP_CALL_TO_ACTION:39,LARGE_MEDIA_ATTACHMENT:40,FAN_PAGE:42,UNFAN_PAGE:43,SEE_MORE:44,COLLECTION_ROBOTEXT_LINK:45,COLLECTION_ACTION_LINK:46,COLLECTION_TICKER_LINK:47,SPONSORED_LINK:49,PAGE_LINK:50,SOCIAL_CONTEXT:51,SOCIAL_ACTOR_PHOTO:52,OFFERS_CLAIM:53,OFFERS_CLICK:54,DROPDOWN_BUTTON:55,EVENT_VIEW:56,EVENT_RSVP:57,ADS_SHIMMED_LINK:58,COLLECTION_ADD_BUTTON:59,EVENT_INVITE_FRIENDS:60,RHC_AD:61,AD_CREATIVE_TITLE:62,AD_CREATIVE_BODY:63,AD_CREATIVE_IMAGE:64,AD_SOCIAL_SENTENCE:65,APP_NAME:66,GROUP_JOIN:67,PAGE_COVER_PHOTO:68,PAGE_PROFILE_PIC:69,AD_IDENTITY:70,UNHIDE_LINK:71,TRENDING_TOPIC_LINK:72,RELATED_SHARE_ARTICLE:73,OFFERS_USE_NOW:74,RELATED_SHARE_VIDEO:75,RHC_CARD:76,RHC_CARD_HIDE:77,RHC_SIMPLIFICATION:78,RHC_SIMPLIFICATION_HIDE:79,TOPIC_PIVOT_HEADER:80,ADD_FRIEND_BUTTON:81,SNOWLIFT:82,SNOWLIFT_MESSAGE:83,OFFERS_RESEND:84,RHC_LINK_OPEN:85,GENERIC_CALL_TO_ACTION_BUTTON:86,AD_LOGOUT:87,RHC_PHOTO_SLIDER:88,RHC_COMMENT_BUTTON:89,HASHTAG:90,NOTE:91,RELATED_SHARE_ARTICLE_HIDE:92,RELATED_SHARE_VIDEO_HIDE:93,NEKO_PREVIEW:94,OG_COMPOSER_OBJECT:95,INSTALL_ACTION:96,SPONSORED_CONTEXT:97,DIGITAL_GOOD:98,STORY_FOOTER:99,STORY_LOCATION:100,ADD_PHOTO_ACTION:101,ACTION_ICON:102,EGO_FEED_UNIT:103,PLACE_STAR_SURVEY:104,REVIEW_MENU:105,SAVE_ACTION:106,PHOTO_GALLERY:107,SUB_ATTACHMENT:108,FEEDBACK_SECTION:109,ALBUM:110,ALBUM_COLLAGE:111,AVATAR_LIST:112,STORY_LIST:113,MEDIA_CONTROLS:114,ZERO_UPSELL_BUY:115,ZERO_UPSELL_FEED_UNIT:116,RATING:117,PERMALINK_COMMENT:118,LIKE_COUNT:119,RETRY_BUTTON:120,TIMELINE_GIFTS:121,NEARBY_FRIENDS_LIST:122,PRESENCE_UNIT:123,EVENT_INVITE_SENT:124,ATTACHMENT_TITLE:125,HSCROLL_PAGER:126,STORY_MESSAGE:127,STATUS_LINK:128,ADD_MEDIA_LINK:129,ADD_QUESTION_LINK:130,START_Q_AND_A_LINK:131,UPLOAD_FILE_LINK:132,START_CONVERSATION_LINK:133,ATTACH_LIFE_EVENT_LINK:134,ATTACH_PLACE_LINK:135,COVER_PHOTO_EDIT_LINK:136,SHOW_LIKES:137,ROTATE_LEFT_BUTTON:138,ROTATE_RIGHT_BUTTON:139,TAG_LINK:140,CLOSE_BUTTON:141,PAGER_NEXT:142,PAGER_PREVIOUS:143,FULLSCREEN_BUTTON:144,ACTIONS:145,CURATION_MENU:146,PROFILE_PIC_EDIT_LINK:147,VIEW_ALL_SHARES:148,THUMBNAIL_LINK:149,EDIT_HISTORY:150,ADD_TO_THREAD:151,SIDEBAR:152,HOME_SIDENAV:153,BUDDYLIST_NUB:154,TITLEBAR:155,SEND_BUTTON:156,CONVERSATION:157,CHAT_FLYOUT:158,INPUT:159,EMOTICONS:160,VIDEOCHAT:161,TYPEAHEAD:162,OPTIONS_MENU:163,BOOST_POST_BUTTON:164,TOGGLE_BUTTON:165,CHAT_SIDEBAR_FOOTER:166,GRIPPER:167,BOOKMARK_ITEM:168,BOOKMARKS_SECTION:169,BOOKMARKS_NAV:170,RHC:171,RHC_HEADER:172,SIDE_ADS:173,BUDDY_LIST:174,SHOW_ADS_FEED:184,VIDEO_IN_PLAY_CALL_TO_ACTION_BUTTON:185,VIDEO_ENDSCREEN_CALL_TO_ACTION_BUTTON:186,INLINE_PHOTO_PIVOTS_HIDE:187,VIDEO_CALL_TO_ACTION_ENDSCREEN_REPLAY:188,APP_ATTACHMENT:189,ACTIVITY_LINK:190,SAVE_BUTTON:191,SEE_MORE_PHOTO_PAGE_POST_BUTTON:192,BUY_VIRTUAL_GOOD:193,SAVE_SECONDARY_MENU:194,MPP_INSIGHTS:195,WAP_FOOTER:196,GROUP_CANCEL:197,GROUP_LEAVE:198,MESSAGE_LINK:199,VIDEO_SPONSORSHIP_LABEL:200,MULTI_ATTACHMENT_PAGER_NEXT:201,MULTI_ATTACHMENT_PAGER_PREV:202,WEB_CLICK:203,COMPOSER_POST:204,MULTI_ATTACHMENT_VIDEO:205,VIDEO_CALL_TO_ACTION_PAUSESCREEN_RESUME:206,VOICECHAT:207,PAGE_INVITE_FRIEND:208,SEE_MORE_REDIRECT:209,VIDEO_CALL_TO_ACTION_ATTACHMENT:210,PAGE_POST_SEE_FIRST:211,PAGE_POST_DEFAULT:212,TOPIC_FEED_CUSTOMIZATION_UNIT_SUBMIT:213,TOPIC_FEED_CUSTOMIZATION_UNIT_OPTION:214,LEAD_GEN_OPEN_POPOVER:215,LEAD_GEN_SUBMIT_CLICK:216,LEAD_GEN_PRIVACY_CLICK:217,LEAD_GEN_OFFSITE_CLICK:218,EVENT_YOU_MAY_LIKE_HSCROLL:219,LEAD_GEN_CONTEXT_CARD_CLOSE:220,LEAD_GEN_CONTEXT_CARD_CTA_CLICK:221,FEED_STORY_PLACE_ATTACHMENT:222,UNUSED:-1};},null);
__d('AsyncLoader',['AsyncRequest','BaseAsyncLoader'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k,l){this._endpoint=k;this._type=l;}Object.assign(j.prototype,i.prototype);j.prototype.send=function(k,l,m,n,o){new h(k).setData({ids:l}).setHandler(n).setErrorHandler(o).setAllowCrossPageTransition(true).setMethod('GET').setReadOnly(true).send();};f.exports=j;},null);
__d('BlueBarFocusListener',['CSS','Deferred','Event'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k='f_key',l='f_click',m=null,n=function(){m=null;};function o(u){h.removeClass(u,k);h.removeClass(u,l);}function p(u){if(m)m.reject();m=new i();m.then(function(v){o(u);h.addClass(u,v);}).done(n,n);}function q(){if(m)m.resolve(k);}function r(u){if(m)m.reject();h.removeClass(u,k);h.addClass(u,l);}function s(u){return function(event){u(event.getTarget());};}var t={listen:function(u){if(!u)return;j.listen(u,'focusout',s(o));j.listen(u,'focusin',s(p));j.listen(u,'click',s(r));j.listen(u,'keyup',q);}};f.exports=t;},null);
__d('RoyalBluebar',['Arbiter','Event','Run','SubscriptionsHandler'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={_subscriptionHandler:null,_getSubscriptionHandler:function(){if(!this._subscriptionHandler){this._subscriptionHandler=new k();j.onUnload(function(){this._subscriptionHandler.release();this._subscriptionHandler=null;}.bind(this));}return this._subscriptionHandler;},informOnClick:function(m){this._getSubscriptionHandler().addSubscriptions(i.listen(m,'click',function(event){if(h.inform('BlueBar/homeClick',event)===false)event.preventDefault();}));}};f.exports=l;},null);
__d('NullBusinessID',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports='personal-business';},null);
__d('BizSiteIdentifier.brands',['BusinessConf','NullBusinessID','URI'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=i,l={isBizSite:function(){return j.getRequestURI(false).getSubdomain()===h.DOMAIN;},getBusinessID:function(){return j.getRequestURI(false).getQueryData()[h.BIZ_ID_PARAM_NAME];},createBusinessURL:function(m,n){if(n===k)return new j(m).setSubdomain('www');var o=new j(m).setSubdomain(h.DOMAIN);if(l.isBizSite())o.setDomain(j.getRequestURI(false).getDomain());var p=n||l.getBusinessID();o.addQueryData(h.BIZ_ID_PARAM_NAME,p);return o;}};f.exports=l;},null);
__d('ExplicitRegistrationDispatcherUtils',['ErrorUtils','FluxInternalConfig','emptyFunction','monitorCodeUse','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=j,n=false,o=j;f.exports={guessStoreName:m,warn:o,inlineRequiresEnabled:n};},null);
__d('ExplicitRegistrationDispatcher',['Dispatcher_DEPRECATED','ExplicitRegistrationDispatcherUtils','setImmediate'],function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();k=babelHelpers.inherits(m,h);l=k&&k.prototype;function m(n){var o=n.strict;l.constructor.call(this);this.$ExplicitRegistrationDispatcher5=o;this.$ExplicitRegistrationDispatcher4=1;this.$ExplicitRegistrationDispatcher1={};this.$ExplicitRegistrationDispatcher2={};this.$ExplicitRegistrationDispatcher3={};}m.prototype.explicitlyRegisterStore=function(n){var o=n.getDispatchToken(),p=this.$ExplicitRegistrationDispatcher2[o];this.$ExplicitRegistrationDispatcher3[p]=true;};m.prototype.explicitlyRegisterStores=function(n){n.forEach(function(o){return this.explicitlyRegisterStore(o);}.bind(this));};m.prototype.register=function(n){var o=this.$ExplicitRegistrationDispatcher4++;this.$ExplicitRegistrationDispatcher1[o]=n;this.$ExplicitRegistrationDispatcher3[o]=false;var p=l.register.call(this,this.$ExplicitRegistrationDispatcher7.bind(this,o));this.$ExplicitRegistrationDispatcher2[p]=o;return p;};m.prototype.$ExplicitRegistrationDispatcher7=function(n,o){if(this.$ExplicitRegistrationDispatcher3[n]||!this.$ExplicitRegistrationDispatcher5)this.$ExplicitRegistrationDispatcher1[n](o);};f.exports=m;},null);
__d('ChatDispatcher',['ExplicitRegistrationDispatcher','LogHistory'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=i.getInstance('chat_dispatcher');j=babelHelpers.inherits(m,h);k=j&&j.prototype;m.prototype.dispatch=function(n){l.debug('action',n.type);k.dispatch.call(this,n);};function m(){j.apply(this,arguments);}f.exports=new m({strict:false});},null);
__d('ChatSidebarActionTypes',['keyMirror'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=h({INIT:null,LOADED:null,SET_ENABLED:null,SHOW:null,TOGGLE:null});},null);
__d('ChatSidebarStore',['ChatDispatcher','ChatOptionsInitialData','ChatSidebarActionTypes','FluxStore','SidebarType','performanceAbsoluteNow'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';var n,o;if(c.__markCompiled)c.__markCompiled();n=babelHelpers.inherits(p,k);o=n&&n.prototype;function p(){o.constructor.call(this,h);this.$ChatSidebarStore2={initialized:false,initTime:m(),loaded:false,enabled:!!i.sidebar_mode,visible:null};this.$ChatSidebarStore1={};}p.prototype.__onDispatch=function(q){var r=q.type;this.$ChatSidebarStore1=babelHelpers['extends']({},this.$ChatSidebarStore2);switch(r){case j.INIT:if(!this.$ChatSidebarStore1.initialized)this.$ChatSidebarStore2.initTime=m();this.$ChatSidebarStore2.initialized=true;break;case j.LOADED:this.$ChatSidebarStore2.loaded=true;break;case j.SHOW:this.$ChatSidebarStore2.visible=q.sidebarType;break;case j.SET_ENABLED:this.$ChatSidebarStore2.enabled=q.enabled;this.$ChatSidebarStore2.visible=q.sidebarType;break;case j.TOGGLE:this.$ChatSidebarStore2.enabled=!this.$ChatSidebarStore2.enabled;this.$ChatSidebarStore2.visible=this.$ChatSidebarStore2.enabled?q.visible:l.BUDDYLIST;break;}for(var s in this.$ChatSidebarStore2)if(this.$ChatSidebarStore2.hasOwnProperty(s))if(this.$ChatSidebarStore2[s]!==this.$ChatSidebarStore1[s]){this.__emitChange();break;}};p.prototype.getPrevState=function(){return this.$ChatSidebarStore1;};p.prototype.getState=function(){return this.$ChatSidebarStore2;};p.prototype.isInitialized=function(){return this.$ChatSidebarStore2.initialized;};p.prototype.isLoaded=function(){return this.$ChatSidebarStore2.loaded;};p.prototype.isEnabled=function(){return this.$ChatSidebarStore2.enabled;};p.prototype.getInitTime=function(){return this.$ChatSidebarStore2.initTime;};p.prototype.getVisibleType=function(){return this.$ChatSidebarStore2.visible;};f.exports=new p();},null);
__d('ChatSidebarVisibility',['ChatConfig','ChatSidebarStore','OrderedFriendsList','getViewportDimensions'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=h.get('sidebar.min_friends'),m=h.get('sidebar.minimum_width'),n={getViewport:function(){return k.withoutScrollbars();},hasLowFriendCount:function(){return j.getActiveList().length<=l;},isViewportCapable:function(o){o=o||n.getViewport();return o.width>m;},shouldShowSidebar:function(){return n.shouldShowSidebarIgnoreEnabled()&&i.isEnabled();},shouldShowSidebarIgnoreEnabled:function(){return n.isViewportCapable()&&!n.hasLowFriendCount();}};f.exports=n;},null);
__d('ChatSidebarActions',['ChatDispatcher','ChatSidebarActionTypes','ChatSidebarVisibility','SidebarType'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();function l(){if(j.shouldShowSidebar())return k.SIDEBAR;return k.BUDDYLIST;}function m(){if(j.shouldShowSidebarIgnoreEnabled())return k.SIDEBAR;return k.BUDDYLIST;}var n={init:function(){h.dispatch({type:i.INIT});},loaded:function(){h.dispatch({type:i.LOADED});},disable:function(){h.dispatch({type:i.SET_ENABLED,enabled:false,sidebarType:k.BUDDYLIST});},enable:function(){h.dispatch({type:i.SET_ENABLED,enabled:true,sidebarType:m()});},show:function(){h.dispatch({type:i.SHOW,sidebarType:l()});},toggle:function(){h.dispatch({type:i.TOGGLE,sidebarType:l()});}};f.exports=n;},null);
__d('FBRTCCallBlockingStore',['Arbiter','AsyncRequest','BanzaiLogger','ChannelConstants','FBRTCDispatcher','FBRTCStore','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o,p;if(c.__markCompiled)c.__markCompiled();var q=false,r=0,s=null,t='call_block_setting_changed';o=babelHelpers.inherits(u,m);p=o&&o.prototype;u.prototype.init=function(v){this.$FBRTCCallBlockingStore1(v);h.subscribe(k.getArbiterType('videocall_block_setting'),this.$FBRTCCallBlockingStore2.bind(this));};u.prototype.__onDispatch=function(v){if(v.type!==t)return;this.$FBRTCCallBlockingStore1(v.data);};u.prototype.$FBRTCCallBlockingStore1=function(v){switch(v){case 0:q=false;this.$FBRTCCallBlockingStore3();break;case -1:q=true;this.$FBRTCCallBlockingStore3();break;default:q=true;this.$FBRTCCallBlockingStore4(v);}this.__emitChange();};u.prototype.$FBRTCCallBlockingStore4=function(v){if(s===null)s=n(this.turnOnVideoCalling.bind(this),v*1000);};u.prototype.getBlockingStatus=function(){return q;};u.prototype.turnOnVideoCalling=function(){new i('/ajax/chat/settings.php').setHandler(this.$FBRTCCallBlockingStore5.bind(this)).setData({call_blocked_until:0}).send();};u.prototype.turnOffVideoCalling=function(v){r=v;new i('/ajax/chat/settings.php').setHandler(this.$FBRTCCallBlockingStore6.bind(this)).setData({call_blocked_until:v}).send();};u.prototype.$FBRTCCallBlockingStore3=function(){if(s){clearTimeout(s);s=null;}};u.prototype.$FBRTCCallBlockingStore5=function(){l.dispatch({type:t,data:0});j.log('VideoCallLoggerConfig',{event:t,message:'enable'});};u.prototype.$FBRTCCallBlockingStore6=function(){l.dispatch({type:t,data:r});j.log('VideoCallLoggerConfig',{event:t,message:'disable_'+r});};u.prototype.$FBRTCCallBlockingStore2=function(v,w){l.dispatch({type:t,data:w.obj.value});};function u(){o.apply(this,arguments);}f.exports=new u();},null);
__d('ChatOptions',['Arbiter','ChannelConstants','ChatSidebarActions','FBRTCCallBlockingStore','JSLogger','PresenceUtil','ChatOptionsInitialData'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=l.create('chat_options'),o={};(function(){var q=c('ChatOptionsInitialData');for(var r in q){var s=q[r];if(r==='call_blocked_until'){k.init(s);}else o[r]=!!s;}})();var p=Object.assign(new h(),{getSetting:function(q){return o[q];},setSetting:function(q,r,s){if(q==='sidebar_mode'){r?j.enable():j.disable();return;}if(this.getSetting(q)==r)return;if(s){s='from_'+s;n.log(s,{name:q,new_value:r,old_value:this.getSetting(q)});}o[q]=!!r;h.inform('chat/option-changed',{name:q,value:r});}});h.subscribe(i.getArbiterType('setting'),function(q,r){var s=r.obj;if(s.window_id===m.getSessionID())return;p.setSetting(s.setting,!!s.value,'channel');});h.subscribe(l.DUMP_EVENT,function(q,r){r.chat_options=o;});f.exports=p;},null);
__d('BuddyListNubLoader',['Arbiter','ChatOptions','ChatSidebarStore','KeyEventController','PresencePrivacy','JSResource','SidebarType','emptyFunction','ifRequired'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();function q(){return j.isEnabled()&&!i.getSetting('hide_buddylist')&&!p('ChannelConnection',function(s){return s.disconnected();})&&!l.isUserOffline();}function r(s,t,u,v){this.$BuddyListNubLoader1=s;this.$BuddyListNubLoader2=t;this.$BuddyListNubLoader3=u;this.$BuddyListNubLoader4=v;this.$BuddyListNubLoader5=null;p('ChatSidebar',o,function(){if(q()){this.show();}else this.load();}.bind(this));h.subscribe('chat/option-changed',function(w,x){if(this.$BuddyListNubLoader7())if(x.name==='hide_buddylist'&&!x.value)this.show();}.bind(this));k.registerKey('q',function(event){if(this.$BuddyListNubLoader7()){this.show();event.prevent();}}.bind(this));j.addListener(function(){if(j.getVisibleType()===n.BUDDYLIST)if(q()){this.show();}else this.load();}.bind(this));if(j.getVisibleType()===n.BUDDYLIST)if(q()){this.show();}else this.load();}r.prototype.load=function(){if(!this.$BuddyListNubLoader6){this.$BuddyListNubLoader6=m('BuddyListNub').load();this.$BuddyListNubLoader6.done(function(s){this.$BuddyListNubLoader5=new s(this.$BuddyListNubLoader1,this.$BuddyListNubLoader2,this.$BuddyListNubLoader3,this.$BuddyListNubLoader4);}.bind(this));}return this.$BuddyListNubLoader6;};r.prototype.show=function(){return this.load().then(function(s){this.$BuddyListNubLoader5&&this.$BuddyListNubLoader5.onButtonClick();this.$BuddyListNubLoader5&&this.$BuddyListNubLoader5.show();}.bind(this));};r.prototype.$BuddyListNubLoader7=function(){return !this.$BuddyListNubLoader5&&!this.$BuddyListNubLoader6;};f.exports=r;},null);
__d('ChatHovercard',['Arbiter','AsyncLoader','Bootloader','JSLogger','debounce'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=5,n=new i('/ajax/chat/hovercard/sidebar.php','hover'),o=k.create('chat_hovercard');h.subscribe('Hovercard/dirty',n.reset.bind(n));function p(t,u){n.get(t,function(v){setTimeout(function(){if(!v){o.error('fetch_failure',{id:t});return;}j.loadModules(["Hovercard"],function(w){var x=w.getDialog(v);if(!x){o.error('no_hovercard',{id:t,endpoint:v});return;}if(t==u.getActiveID())u.showHovercard(t,x);});},0);});}function q(t,u){var v=[];function w(z){if(z>=0&&z<t.length)v.push(t[z]);}var x=t.indexOf(u);if(x>-1){w(x);for(var y=1;y<m;y++){w(x+y);w(x-y);}}return v.filter(function(z){return z;});}function r(t,u){var v=u.getActiveID();if(v){var w=t.getShowingUsers(),x=q(w,v);n.get(x,function(){});}}function s(t){var u=t.getHoverController();u.registerDefault(p);u.subscribe('hover',l(r.bind(null,t,u),100));}f.exports=s;},null);
__d('Poller',['ArbiterMixin','AsyncRequest','CurrentUser','emptyFunction','mixin','setTimeoutAcrossTransitions','setTimeout'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p;if(c.__markCompiled)c.__markCompiled();o=babelHelpers.inherits(q,l(h));p=o&&o.prototype;function q(t){'use strict';p.constructor.call(this);this._config=babelHelpers['extends']({clearOnQuicklingEvents:true,setupRequest:k,interval:null,maxRequests:Infinity,dontStart:false},t);this._handle=null;if(!this._config.dontStart)this.start();}q.prototype.start=function(){'use strict';if(this._polling)return this;this._requests=0;this.request();return this;};q.prototype.stop=function(){'use strict';this._cancelRequest();return this;};q.prototype.mute=function(){'use strict';this._muted=true;return this;};q.prototype.resume=function(){'use strict';if(this._muted){this._muted=false;if(this._handle===null&&this._polling)return this.request();}return this;};q.prototype.skip=function(){'use strict';this._skip=true;return this;};q.prototype.reset=function(){'use strict';return this.stop().start();};q.prototype.request=function(){'use strict';this._cancelRequest();this._polling=true;if(!s())return this._done();if(this._muted)return this;if(++this._requests>this._config.maxRequests)return this._done();var t=new i();t.setIsBackgroundRequest(true);var u=false;t.setInitialHandler(function(){return !u;});this._cancelRequest=function(){u=true;this._cleanup();}.bind(this);t.setFinallyHandler(r.bind(this));t.setInitialHandler=k;t.setFinallyHandler=k;this._config.setupRequest(t,this);if(this._skip){this._skip=false;m(r.bind(this),0);}else t.send();return this;};q.prototype.isPolling=function(){'use strict';return this._polling;};q.prototype.isMuted=function(){'use strict';return this._muted;};q.prototype.setInterval=function(t){'use strict';if(t){this._config.interval=t;this.start();}};q.prototype.getInterval=function(){'use strict';return this._config.interval;};q.prototype._cleanup=function(){'use strict';if(this._handle!==null)clearTimeout(this._handle);this._handle=null;this._cancelRequest=k;this._polling=false;};q.prototype._done=function(){'use strict';this._cleanup();this.inform('done',{sender:this});return this;};q.MIN_INTERVAL=2000;Object.assign(q.prototype,{_config:null,_requests:0,_muted:false,_polling:false,_skip:false,_cancelRequest:k});function r(){if(!this._polling)return;if(this._requests<this._config.maxRequests){var t=this._config.interval;t=typeof t==='function'?t(this._requests):t;t=t>q.MIN_INTERVAL?t:q.MIN_INTERVAL;if(this._config.clearOnQuicklingEvents){this._handle=n(this.request.bind(this),t);}else this._handle=m(this.request.bind(this),t);}else this._done();}function s(){return j.isLoggedInNow();}f.exports=q;},null);
__d('ChatImpressionLogger',['AsyncSignal','ChatConfig','ChatVisibility','Poller','PresencePrivacy','PresenceStatus','requireWeak','debounceAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=null;n('AvailableList',function(v){return p=v;});var q=null;function r(){if(!q)return '';return Array.from(q.getSortedList()).toString();}function s(){if(!q||!p)return '';var v=[],w=Array.from(q.getSortedList());for(var x=0;x<w.length;x++)v[x]=p.get(w[x]);return v.toString();}function t(v){v.setURI('/ajax/chat/imps_logging.php').setData({list_availability:s(),sorted_list:r(),source:'periodical_imps'});}var u={init:function(v){q=v;var w=i.get('chat_impression_logging_periodical',0);if(w){var x=i.get('periodical_impression_logging_config.interval'),y=new k({interval:x,setupRequest:t,clearOnQuicklingEvents:false,dontStart:true});l.subscribe('privacy-user-presence-changed',o(function(){if(j.isOnline()){y.start();}else y.stop();}));}this.init=function(){};},logImpression:function(v,w,x){var y=i.get('chat_impression_logging_with_click'),z={list_availability:y?s():'',sorted_list:y?r():'',source:v,target:w,target_presence:m.get(w),viewport_width:document.body.clientWidth};new h('/ajax/chat/ct.php',Object.assign(z,x)).send();}};f.exports=u;},null);
__d('ChatOpenTabEventLogger',['Banzai','ChatImpressionLogger','MercuryIDs'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k='messaging_tracking',l={log:function(m,n,o,p){var q={referrer:m||'',message_thread_id:n,message_view:'chat',timestamp_send:Date.now(),message_target_ids:null};if(o!==undefined)q.message_target_ids=[o];i.logImpression(m,o,p);h.post(k,q,{delay:0,retry:true});var r=j.getUserIDFromThreadID(String(n));h.post('page_message_button_click',{page_id:r,ref:m});}};f.exports=l;},null);
__d('ChatWelcomeMessage',['ImmutableObject'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(){this.$ChatWelcomeMessage1={};}i.prototype.setWelcomeMessage=function(k,l,m){this.$ChatWelcomeMessage1[k]=new h({timestamp:Date.now(),thread_id:k,author:l,body:m});};i.prototype.getWelcomeMessage=function(k){return this.$ChatWelcomeMessage1[k];};var j=new i();f.exports=j;},null);
__d('GroupChatMessageBlockAlert',['DialogX','GenderConst','MercuryParticipants','React','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogTitle.react','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q={show:function(r,s,t){var u=new h({width:445},k.createElement('div',null,k.createElement(o,null,p._("See Conversations?")),k.createElement(l,null,this.dialogBodyText(r)),k.createElement(n,null,k.createElement(m,{action:'cancel',label:this.leaveGroupButton(),onClick:function(){return t();}}),k.createElement(m,{use:'confirm',action:'cancel',label:this.openChatButton(),onClick:function(){return s();}}))));u.show();},openChatButton:function(){return p._("See Conversation");},leaveGroupButton:function(){return p._("Leave Group");},dialogBodyText:function(r){if(r.length!==1){return p._("People you've blocked are in this conversation. If you see this conversation, you'll get each other's messages to the group.");}else{var s='';j.get(r.pop(),function(t){switch(t.gender){case i.FEMALE_SINGULAR:s=p._("{name} is in this group conversation but you've blocked her. If you see this conversation, you'll see her messages to the group and she'll see yours.",[p.param('name',t.short_name)]);break;case i.MALE_SINGULAR:s=p._("{name} is in this group conversation but you've blocked him. If you see this conversation, you'll see his messages to the group and he'll see yours.",[p.param('name',t.short_name)]);break;default:s=p._("{name} is in this group conversation but you've blocked them. If you see this conversation, you'll see their messages to the group and they'll see yours.",[p.param('name',t.short_name)]);}});return s;}}};f.exports=q;},null);
__d('ChatOpenTabImpl',['ChatApp','ChatOpenTabEventLogger','ChatWelcomeMessage','DOM','GroupChatMessageBlockAlert','LogHistory','MercuryIDs','Toggler','csx','requireWeak','MercuryBlockedParticipants','MercuryThreadActions','MercuryThreadIDMap','MercuryThreads'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';if(c.__markCompiled)c.__markCompiled();var r=c('MercuryBlockedParticipants').get(),s=c('MercuryThreadActions').get(),t=c('MercuryThreadIDMap').get(),u=c('MercuryThreads').get(),v=null;q('ChatTabModel',function(x){return v=x;});var w={canOpenTab:function(){return !!(h&&!h.isHidden());},openEmptyTab:function(x,y,z){if(this.canOpenTab()&&v){var aa=v.getEmptyTab();this._openClientTab(aa,null);this._logChatOpenTabEvent(y,aa,null,z);this._closeJewelFlyout();}},openThreadTab:function(x,y,z,aa,ba){if(!n.isValid(x)){t.getClientIDFromServerID(x,function(ca){w.openThreadTabImpl(ca,y,z,aa,ba);});}else w.openThreadTabImpl(x,y,z,aa,ba);},openThreadTabImpl:function(x,y,z,aa,ba){u.getThreadMeta(x,function(ca){if(r.isPresentInGroupThread(ca)){l.show(r.inGroupThread(ca),function(){this.openClientTab(x,y,z,aa,ba);}.bind(this),function(){s.leaveGroup(x);});}else this.openClientTab(x,y,z,aa,ba);}.bind(this));},openClientTab:function(x,y,z,aa,ba){this._openClientTab(x,aa,ba);this._logChatOpenTabEvent(y,x,null,z);this._closeJewelFlyout();},openUserTab:function(x,y,z){var aa=n.getThreadIDFromUserID(x);this._openClientTab(aa);this._logChatOpenTabEvent(y,aa,x,z);},openPageTab:function(x,y,z){var aa=n.getThreadIDFromUserID(y);u.getThreadMeta(aa,function(ba){if(x&&x.length>0){var ca=(Date.now()-ba.timestamp)/1000,da=ca/3600;if(ba.message_count===0||da>24)j.setWelcomeMessage(aa,n.getParticipantIDFromUserID(y),x);}});this._openClientTab(aa);this._logChatOpenTabEvent(z,aa,y);},_closeJewelFlyout:function(){var x=k.scry(document,"div._1z4y")[0],y=o.getInstance(x);if(y&&y.getActive())y.hide();},_openClientTab:function(x,y,z){u.getThreadMeta(x,function(aa){if(!this.canOpenTab())m.getInstance('mercury').error('Unable to open chat tab',x);h.tabController.openTab(x,h.tabsViewport,y,!!z);}.bind(this));},_logChatOpenTabEvent:function(x,y,z,aa){i.log(x,y,z,aa);}};f.exports=w;},null);
__d('ChatPerfInstrumentation',['Promise','BanzaiLogger','ChatPerfEvent','emptyFunction','performanceAbsoluteNow'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m={_startTime:(Number),init:function(){this._startTime=l();return new h(function(n){return n();});},_log:function(event){i.log('ChatPerfLoggerConfig',{event:event,duration:l()-this._startTime});},logTTI:function(){this.logTTI=k;this._log(j.TTI);},logCHAT_CONVERSATION_TTI:function(){this.logCHAT_CONVERSATION_TTI=k;this._log(j.CHAT_CONVERSATION_TTI);}};f.exports=m;},null);
__d('ChatActivity',['Arbiter','Event','JSLogger','MercuryConfig','PresenceState','UserActivity'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=k.activity_limit||60000,o=k.idle_limit||1800000,p=k.idle_poll_interval||300000,q=j.create('chat_activity'),r=Date.now(),s=true;function t(){var x=Date.now();return !!(s&&x-r<n);}var u=Object.assign(new h(),{isActive:t});function v(){var x=r;r=Date.now();if(r-x>o){q.debug('idle_to_active',x);l.doSync();}u.inform('activity');}i.listen(window,'focus',function(){s=true;v();});i.listen(window,'blur',function(){s=false;});m.subscribe(function(){v();});function w(x){var y=x&&x.at&&l.verifyNumber(x.at);if(typeof y!=='number')y=null;return y||0;}setInterval(function(){var x=Date.now(),y=w(l.get()),z=Math.max(r,y);if(x-z>o){q.debug('idle',{cookie:y,local:r});u.inform('idle',x-z);}},p);l.registerStateStorer(function(x){var y=w(x);if(y<r)x.at=r;return x;});h.subscribe(j.DUMP_EVENT,function(x,y){y.chat_activity={activity_limit:n,idle_limit:o,idle_poll_interval:p,last_active_time:r};});f.exports=u;},null);
__d('ChatMentionsNotifications',['fbt','CurrentUser','MercuryParticipants'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={notifyIfMessageToMe:function(l){var m='fbid:'+i.getID(),n=l.body;j.get(m,function(o){var p=new RegExp(o.short_name,"i");if(p.test(n))k._notify(l);});},_notify:function(l){var m=48,n=l.body;if(n.length>m)n=n.substr(0,m-3)+"...";new Notification(h._("You were tagged in a message!"),{body:n,icon:"http://facebook.com//images/icons-large/fb-xl.png"});}};f.exports=k;},null);
__d('ChatBehavior',['Arbiter','AvailableList','AvailableListConstants','ChatNotificationConstants'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=false,m=i.getWebChatNotification&&i.getWebChatNotification(),n=l,o=true,p=Object.assign(new h(),{ON_CHANGED:'changed',notifiesUserMessages:function(){return m!==k.NO_USER_MESSAGE_NOTIFICATION;},ignoresRemoteTabRaise:function(){return n;},showsTabUnreadUI:function(){return o;}});function q(){p.inform(p.ON_CHANGED);}i.subscribe&&i.subscribe(j.ON_CHAT_NOTIFICATION_CHANGED,function(){var r=m,s=i.getWebChatNotification();m=s;if(r!=s)q();});h.subscribe('chat/set_does_page_occlude_tabs',function(r,s){n=!!s;q();});h.subscribe('chat/set_show_tab_unread_ui',function(r,s){o=!!s;q();});f.exports=p;},null);
__d('ChatCookieInterface',['ChatConfig','InitialServerTime','MercuryIDs','LogHistory','PresenceState','PresenceUtil'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=k.getInstance('chat_cookie'),o=i.serverTime,p=h.get('tab_max_load_age')||3600000,q=o-p,r={store:function(v,w){if(v.uct2==w.lastChangeTime)return v;var x=u(v,w),y={};if(!x){y.old_tabs=v&&v.t2&&JSON.stringify(v.t2);y.old_promoted=v&&v.lm2;y.old_time=v&&v.uct2;y.old_reason=v&&v.tr;y.old_window=v&&v.tw;var z=[];w.tabs.forEach(function(aa){if(!aa.fragile||aa.server_id){var ba={i:aa.fragile?j.getThreadIDFromThreadFBID(aa.server_id):aa.id,si:aa.server_id};if(aa.raised)ba.r=1;z.push(ba);}});v.t2=z;v.lm2=w.promotedID;v.uct2=w.lastChangeTime;v.tr=w.lastChangeReason;v.tw=m.getSessionID();n.debug('store','{}');}else n.warn('store_bad_state','{}');return v;},load:function(v,w){if(!v){n.warn('load_bad_state','{}');return false;}var x=u(v,w);if(!x||x===w.lastChangeTime)return false;w.lastChangeTime=x;w.lastChangeReason='load';var y=s(w,v.t2,v.lm2||null),event='load';if(!w.isInitialized)event+='_init';n.log(event,'{}');return y;},tabsChanged:function(){return t.apply(undefined,arguments);}};function s(v,w,x){var y;if(!t(v,w,x))return false;var z=v.tabs.filter(function(ca){return !!ca.fragile;}),aa={};v.promotedID=null;v.tabs=w.map(function(ca){var da={id:ca.i,server_id:ca.si};if(da.id==x)v.promotedID=da.id;if(ca.r)da.raised=true;aa[da.id]=da;return da;});v.tabs=v.tabs.filter(function(ca){return !!ca;});if(v.localRaised)for(var ba in v.localRaised)if(!aa[ba]||!aa[ba].raised)delete v.localRaised[ba];z=z.filter(function(ca){return !aa[ca.id];});(y=v.tabs).push.apply(y,z);return true;}function t(v,w,x){if(x&&x!=v.promotedID)return true;var y=v.tabs.filter(function(ba){return !ba.fragile||ba.server_id;});if(w.length!=y.length)return true;for(var z=0,aa=w.length;z<aa;z++)if(!!w[z].r!==y[z].raised||!w[z].si&&w[z].i!==y[z].id||w[z].si&&w[z].si!==y[z].server_id)return true;return false;}function u(v,w){var x=l.verifyNumber(v.uct2);if(!x||typeof x!=='number'){n.warn('bad_cookie_version','{}');return null;}if(x<w.lastChangeTime||x<q)return null;return x;}f.exports=r;},null);
__d('ChatTabActions',['ChatDispatcher','keyMirror'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=i({CLOSE_TAB:null,CLOSE_ALL_TABS:null,CLOSE_FRAGILE_TABS:null,LOWER_TAB:null,OPEN_FRAGILE_TAB:null,OPEN_TAB:null,PERSIST_LOCAL_STATE:null,PROMOTE_TAB:null,RAISE_TAB:null}),k={Types:j,closeTab:function(l,m){h.dispatch({actionType:j.CLOSE_TAB,reason:m,threadID:l});},closeAllTabs:function(){h.dispatch({actionType:j.CLOSE_ALL_TABS});},closeFragileTabs:function(){h.dispatch({actionType:j.CLOSE_FRAGILE_TABS});},lowerTab:function(l){h.dispatch({actionType:j.LOWER_TAB,threadID:l});},openFragileTab:function(l){h.dispatch({actionType:j.OPEN_FRAGILE_TAB,threadID:l});},openTab:function(l){h.dispatch({actionType:j.OPEN_TAB,threadID:l});},persistLocalState:function(){h.dispatch({actionType:j.PERSIST_LOCAL_STATE});},promoteTab:function(l){h.dispatch({actionType:j.PROMOTE_TAB,threadID:l});},raiseTab:function(l,m,n){h.dispatch({actionType:j.RAISE_TAB,signatureID:n,threadID:l,userAction:m});}};f.exports=k;},null);
__d('MercuryTimestampTracker',['MercuryActionType','MercuryPayloadSource','MercurySingletonMixin','MercuryDispatcher'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m){this._fbid=m;this._dispatcher=k.getForFBID(this._fbid);this._lastTimestamp=0;this._dispatcher.subscribe('update-messages',function(n,o){if(!o.actions||!o.actions.length)return;if(o.payload_source==i.CLIENT_SEND_MESSAGE||o.payload_source==i.UNKNOWN)return;for(var p=0;p<o.actions.length;p++){var q=o.actions[p],r=q.action_type;if(r==h.USER_GENERATED_MESSAGE&&q.thread_id&&q.timestamp>this._lastTimestamp)this._lastTimestamp=q.timestamp;}}.bind(this));}Object.assign(l.prototype,{getLastUserMessageTimestamp:function(){return this._lastTimestamp;}});Object.assign(l,j);f.exports=l;},null);
__d('ChatTabModel',['Arbiter','ChatBehavior','ChatDispatcher','ChatConfig','ChatCookieInterface','ChatTabActions','EventEmitter','InitialServerTime','LogHistory','JSLogger','MercuryAssert','MercuryIDs','MercuryLocalIDs','PresenceState','PresenceUtil','MercuryThreadIDMap','MercuryThreads','MercuryTimestampTracker'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w=c('MercuryThreadIDMap').get(),x=c('MercuryThreads').get(),y=c('MercuryTimestampTracker').get(),z=o.serverTime,aa=k.get('tab_max_load_age')||3600000,ba=20,ca=new n(),da=p.getInstance('chat_tab_model'),ea={tabs:[],promotedID:null,lastChangeTime:0,lastChangeReason:null,isInitialized:false,localRaised:null};function fa(bb){var cb=l.load(bb,ea);cb&&ja();return cb;}function ga(bb,cb,db){var eb=fa(u.get());if(cb===undefined||cb>ea.lastChangeTime){if(bb()){eb=true;ea.lastChangeReason=db||null;ia(cb);}}else da.error('rejected',JSON.stringify({change_time:cb,state_time:ea.lastChangeTime}));eb&&ha();}function ha(){if(ea.isInitialized)ca.emit('change');}function ia(bb){if(bb===undefined)bb=Math.max(y.getLastUserMessageTimestamp()||1,ea.lastChangeTime+1);ea.lastChangeTime=bb;u.doSync();}function ja(bb){var cb=ea.tabs.length-ba;if(cb>0)ea.tabs=ea.tabs.filter(function(db){return db.raised||db.id==bb||cb--<=0;});if(cb>0)ea.tabs=ea.tabs.filter(function(db){return (db.id==ea.promotedID||db.id==bb||cb--<=0);});}function ka(bb){for(var cb=0;cb<ea.tabs.length;cb++)if(ea.tabs[cb].id==bb)return cb;return -1;}function la(bb,cb){var db=x.getThreadMetaNow(bb);if(!db)return false;if(db.is_canonical_user){return oa(bb,cb);}else{var eb=na(bb);if(eb)w.getServerIDFromClientID(bb,function(fb){if(ra(bb,fb)){ia();ha();}});return eb;}}function ma(bb){r.isThreadID(bb);if(na(bb))ha();}function na(bb){if(ka(bb)===-1){ea.tabs.push({id:bb,fragile:true});da.log('open_fragile_tab',JSON.stringify({tabs:JSON.stringify(ea.tabs),opened:bb,window_id:v.getSessionID()}));return true;}return false;}function oa(bb,cb){var db=ka(bb);if(db!=-1)if(ea.tabs[db].fragile){ea.tabs.splice(db,1);}else{cb&&(ea.tabs[db].signatureID=cb);return true;}for(var eb=0;eb<=ea.tabs.length;eb++)if(eb==ea.tabs.length||ea.tabs[eb].fragile){ea.tabs.splice(eb,0,{id:bb,signatureID:cb});ja(bb);da.log('open_tab',JSON.stringify({tabs:JSON.stringify(ea.tabs),opened:bb,window_id:v.getSessionID()}));return true;}}function pa(bb,cb,db){r.isThreadID(bb);var eb=false;if(ea.localRaised&&cb){ea.localRaised[bb]=true;eb=true;}ga(function(){if(la(bb,db))eb=true;var fb=ka(bb);if(fb!=-1&&!ea.tabs[fb].raised){ea.tabs[fb].raised=true;eb=true;da.log('raise_tab',JSON.stringify({tabs:JSON.stringify(ea.tabs),raised:bb,window_id:v.getSessionID()}));}return eb;});}function qa(bb){if(ka(bb)!==-1&&ea.promotedID!==bb){ea.promotedID=bb;return true;}return false;}function ra(bb,cb){var db=ka(bb);if(db!=-1&&ea.tabs[db].fragile){var eb=ea.tabs[db];eb.fragile=s.isLocalThread(bb);eb.server_id=cb;var fb=[];ea.tabs.forEach(function(gb){if(gb.id!=bb){if(eb&&gb.fragile){fb.push(eb);eb=null;}fb.push(gb);}});if(eb)fb.push(eb);ea.tabs=fb;da.log('make_permanent',JSON.stringify({tabs:JSON.stringify(ea.tabs),tab_id:bb,window_id:v.getSessionID()}));return true;}return false;}function sa(bb,cb){r.isThreadID(bb);var db=false;if(ea.localRaised){delete ea.localRaised[bb];db=true;}ga(function(){if(ta(bb))db=true;return db;},undefined,cb);}function ta(bb){var cb=ka(bb);if(bb==ea.promotedID)ea.promotedID=null;if(cb!=-1){ea.tabs.splice(cb,1);da.log('close_tab',JSON.stringify({tabs:JSON.stringify(ea.tabs),closed:bb,window_id:v.getSessionID()}));return true;}return false;}function ua(){if(ea.tabs.length){da.log('close_all_tabs',JSON.stringify({closed_tabs:JSON.stringify(ea.tabs),window_id:v.getSessionID()}));ea.tabs=[];ea.promotedID=null;if(ea.localRaised)ea.localRaised={};ia();ha();}}function va(){var bb=[];for(var cb=0;cb<ea.tabs.length;cb++)if(ea.tabs[cb].fragile&&!x.isNewEmptyLocalThread(ea.tabs[cb].id)){bb.push(ea.tabs[cb]);ea.tabs.splice(cb);ha();break;}da.log('close_fragile_tabs',JSON.stringify({tabs:JSON.stringify(ea.tabs),fragile_closed:bb,window_id:v.getSessionID()}));}function wa(bb){r.isThreadID(bb);var cb=false;if(ea.localRaised){delete ea.localRaised[bb];cb=true;}ga(function(){var db=ka(bb);if(db!=-1&&ea.tabs[db].raised){delete ea.tabs[db].raised;da.log('lower_tab',JSON.stringify({tabs:JSON.stringify(ea.tabs),lowered:bb,window_id:v.getSessionID()}));cb=true;}return cb;});}function xa(){if(ea.localRaised){ga(function(){var bb=false;ea.tabs.forEach(function(cb){if(cb.raised!=ea.localRaised[cb.id]){bb=true;if(ea.localRaised[cb.id]){cb.raised=true;}else delete cb.raised;}});return bb;});da.log('persist_local_raise',JSON.stringify({tabs:JSON.stringify(ea.tabs),window_id:v.getSessionID()}));}}u.registerStateStorer(function(bb){return l.store(bb,ea);});u.registerStateLoader(function(bb){if(fa(bb))ha();});var ya=null,za={getDispatchToken:function(){return ya;},isTabPromoted:function(bb){if(bb)return bb==ea.promotedID;return false;},indexOf:function(bb){return ka(bb);},getTab:function(bb){r.isThreadID(bb);var cb=this.indexOf(bb);if(cb>-1){var db=ea.tabs[cb];return babelHelpers['extends']({},db);}return null;},getEmptyTab:function(){var bb;for(var cb=0;cb<ea.tabs.length;cb++){bb=ea.tabs[cb].id;if(x.isNewEmptyLocalThread(bb))return bb;}bb=t.generateThreadID();x.createNewLocalThread(bb,[]);return bb;},get:function(){var bb=ea.tabs.map(function(cb){var db=babelHelpers['extends']({},cb);delete db.fragile;if(ea.localRaised)db.raised=ea.localRaised[db.id];return db;});return {tabs:bb,promoted:ea.promotedID};},promoteThreadInPlaceOfThread:function(bb,cb,db,eb){r.isThreadID(bb);r.isThreadID(cb);ga(function(){var fb=ka(bb),gb=ka(cb);if(eb){ea.promotedID=bb;}else if(ea.promotedID===cb)return true;var hb=ea.tabs[fb];if(db){r.isThreadID(db);var ib=ka(db),jb=ea.tabs[gb];ea.tabs[gb]=hb;ea.tabs.splice(fb,1);ea.tabs.splice(ib,0,jb);}else{ea.tabs[fb]=ea.tabs[gb];ea.tabs[gb]=hb;}return true;});},addListener:function(bb){return ca.addListener('change',bb);}};h.subscribe(q.DUMP_EVENT,function(bb,cb){cb.chat_tabs={promoted:ea.promotedID,tabs:ea.tabs.map(function(db){return babelHelpers['extends']({},db);}),time:ea.lastChangeTime,max_load_age:aa};});function ab(){var bb=i.ignoresRemoteTabRaise();if(bb&&!ea.localRaised){da.log('start_ignore_remote_raise','{}');ea.localRaised={};ha();}else if(!bb&&ea.localRaised){da.log('stop_ignore_remote_raise','{}');ea.localRaised=null;ha();}}ya=j.register(function(bb){switch(bb.actionType){case m.Types.CLOSE_TAB:sa(bb.threadID,bb.reason);break;case m.Types.CLOSE_ALL_TABS:ua();break;case m.Types.CLOSE_FRAGILE_TABS:va();break;case m.Types.LOWER_TAB:wa(bb.threadID);break;case m.Types.OPEN_FRAGILE_TAB:ma(bb.threadID);break;case m.Types.OPEN_TAB:r.isThreadID(bb.threadID);ga(function(){return la(bb.threadID);});break;case m.Types.PERSIST_LOCAL_STATE:xa();break;case m.Types.PROMOTE_TAB:r.isThreadID(bb.threadID);ga(qa.bind(null,bb.threadID));break;case m.Types.RAISE_TAB:pa(bb.threadID,bb.userAction,bb.signatureID);break;}});i.subscribe(i.ON_CHANGED,ab);ab();fa(u.getInitial(),true);if(ea.lastChangeTime===0)ea.lastChangeTime=z-600000;ea.isInitialized=true;f.exports=za;},null);
__d('ChatTabViewInstances',['Map'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=new h();},null);
__d('ChatTitleBarBlinker',['ChatActivity','ChatConfig','DocumentTitle','JSLogger','MercuryNotificationRenderer','PresenceState','MercuryThreadInformer','MercuryTimestampTracker'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=c('MercuryThreadInformer').get(),o=c('MercuryTimestampTracker').get(),p=k.create('chat_title'),q=null,r=0,s=false;function t(){if(q){q.stop();q=null;return true;}return false;}function u(z){var aa=z||o.getLastUserMessageTimestamp();if(r<=aa){r=aa;if(t()||s)m.doSync();}}var v={blink:function(z,aa){if(!q&&r<aa)l.renderDocumentTitle(z,function(ba){if(!q)q=j.blink(ba);});},stopBlinking:function(){u();},blinkingElsewhere:function(){s=true;}};function w(z){var aa=m.verifyNumber(z.sb2);if(!aa||aa<=r)return null;return aa;}function x(z){var aa=z&&w(z);if(aa){r=aa;p.debug('load',r);t();s=false;}}function y(z){var aa=w(z);if(!aa){p.debug('store',r);z.sb2=r;s=false;}return z;}m.registerStateStorer(y);m.registerStateLoader(x);n.subscribe('thread-read-changed',function(z,aa){var ba=o.getLastUserMessageTimestamp(),ca=0;for(var da in aa)if(aa[da].mark_as_read&&aa[da].timestamp>=ba&&aa[da].timestamp>ca)ca=aa[da].timestamp;ca&&u(ca);});h.subscribe('activity',function(){u();});(function(){var z=m.getInitial();if(z)r=w(z)||0;})();f.exports=v;},null);
__d('MercuryGroupThreadMentions',['CurrentUser','ShortProfiles'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={messageMentionsViewer:function(k,l){i.get(h.getID(),function(m){l(new RegExp('@'+m.firstName,'i').test(k.body));});}};f.exports=j;},null);
__d('MercuryBrowserAlerts',['ArbiterMixin','ChatActivity','ChatConfig','ChatOptions','ChatTitleBarBlinker','MercuryConfig','MercuryGroupThreadMentions','MercuryThreadInfo','MercuryViewer','MessagingTag','Sound','UserActivity','MercuryBlockedParticipants','MercuryThreads'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t=c('MercuryBlockedParticipants').get(),u=c('MercuryThreads').get();r.init(['audio/ogg','audio/mpeg']);function v(){return !s.isOnTab()&&!s.hasBeenInactive();}function w(y){if(k.getSetting('sound')&&!v())r.play([j.get('sound.notif_ogg_url'),j.get('sound.notif_mp3_url')],y,false);}var x={messageReceived:function(y){if(p.isViewer(y.author)||!y.is_unread||y.folder!=q.INBOX&&y.folder!=q.ARCHIVED)return;var z=y.thread_id,aa=i.isActive();if(aa){var ba=false;x.inform('before-alert',{threadID:z,cancelAlert:function(){ba=true;}});}u.getThreadMeta(z,function(ca){var da=o.isMuted(ca);n.messageMentionsViewer(y,function(ea){if(da&&(!m.GroupChatMentionsGK||!ea))return;if(t.isPresentInGroupThread(ca))return;var fa=y.timestamp;if(aa){!ba&&w(fa);}else{l.blink(z,fa);w(fa);}l.blinkingElsewhere();});});}};f.exports=Object.assign(x,h);},null);
__d('ChatNewMessageHandler',['ChatActivity','ChatMentionsNotifications','ChatTabModel','ChatTabViewInstances','JSLogger','MercuryAssert','MercuryBrowserAlerts','UserActivity','MercuryConfig','MercuryThreadlistConstants'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=l.create('chat_new_message'),s={_notify:function(t,u,v){if(p.DesktopNotificationsGK)i.notifyIfMessageToMe(u);var w=k.get(t);v.view_is_visible=w&&w.isVisible();v.view_is_focused=w&&w.isFocused();if(!v.view_is_visible)r.log('message_to_hidden');v.is_active=h.isActive();n.messageReceived(u);},newMessage:function(t,u){m.isThreadID(t);var v=j.getTab(t),w={thread_id:t,message_id:u.message_id,to_new_tab:!v,to_raised_tab:v?!!v.raised:true};this._notify(t,u,w);r.log('message',w);}};n.subscribe('before-alert',function(t,event){var u=event.threadID,v=k.get(u),w=j.getTab(u),x=q.MESSAGE_NOTICE_INACTIVITY_THRESHOLD;if(w&&w.raised&&v&&v.isVisible()&&v.isFocused()&&o.isActive(x)){v.tryMarkAsRead();event.cancelAlert();}});f.exports=s;},null);
__d('ChatTabLRUManager',['ChatTabViewInstances','ChatTabModel','InitialServerTime','MercuryThreads'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('MercuryThreads').get(),l={getLRUVisibleTab:function(m){if(m.hasRoomForRaisedTab())return undefined;var n=Object.keys(m.getTabsToShow()||{}),o=1*60,p=null,q=Infinity;for(var r=0;r<n.length;r++){var s=n[r],t=k.getThreadMetaNow(s);if(i.isTabPromoted(s))continue;if(!h.get(s).hasEmptyInput()||!t)continue;var u=(j.serverTime-t.timestamp)/1000;if(!t.timestamp||t.timestamp&&t.timestamp<q&&u>o){p=t.thread_id;q=t.timestamp;}}return p;}};f.exports=l;},null);
__d('ChatTabPolicy',['ChatBehavior','JSLogger','MercuryActionType','MercuryLogMessageType','MercuryAssert','MercuryConfig','MercuryGroupThreadMentions','MercuryIDs','MercuryParticipantTypes','MercurySourceType','MercuryThreadInfo','MercuryViewer','MessagingTag','OzConstants','PresencePrivacy','Set','ShortProfiles','WorkModeConfig','MercuryBlockedParticipants','MercuryThreadActions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){if(c.__markCompiled)c.__markCompiled();var z=c('MercuryBlockedParticipants').get(),aa=c('MercuryThreadActions').get(),ba=u.M_FBIDS,ca=ba.M_DEV,da=ba.M,ea=ba.P,fa=new w([ca,da,ea]),ga=i.create('tab_policy');f.exports={messageIsAllowed:function(ha,ia,ja){var ka=ha.thread_id,la=ia.message_id;l.isThreadID(ka);l.isParticipantID(ia.author);var ma;if(r.isMuted(ha)){ma={thread_id:ka,message_id:la,mute_settings:ha.mute_settings};ga.log('message_thread_muted',ma);if(m.GroupChatMentionsGK)n.messageMentionsViewer(ia,function(pa){if(pa)ja();});return;}if(ha.read_only){ma={thread_id:ka,message_id:la,mode:ha.mode};ga.log('message_read_only',ma);return;}if(ia.source==q.EMAIL||ia.source==q.TITAN_EMAIL_REPLY){ma={thread_id:ka,message_id:la,source:ia.source};ga.log('message_source_not_allowed',ma);return;}var na=o.getUserIDFromParticipantID(ia.author);if(!na){ga.log('message_bad_author',{thread_id:ka,message_id:la,user:na});return;}if(ia.action_type!=j.USER_GENERATED_MESSAGE&&!this._messageIsNewlyCreatedGroup(ia,ha)){ma={thread_id:ka,message_id:la,type:ia.action_type};ga.log('message_non_user_generated',ma);return;}if(ha.is_canonical_user&&!h.notifiesUserMessages()){ga.log('message_jabber',{thread_id:ka,message_id:la});aa.markSeen(ka,true);return;}if(ha.is_canonical&&!ha.other_user_fbid){ga.log('message_canonical_contact',{thread_id:ka,message_id:la});return;}if(ha.folder!=t.INBOX){ga.log('message_folder',{thread_id:ka,message_id:la,folder:ha.folder});return;}if(z.isPresentInGroupThread(ha)){ma={thread_id:ka,message_id:la};ga.log('message_blocked_participants',ma);return;}var oa=o.getUserIDFromParticipantID(s.getID());x.getMulti([na,oa],function(pa){if(!v.allows(na)){ga.log('message_privacy',{thread_id:ka,message_id:la,user:na});return;}var qa=pa[na].employee&&pa[oa].employee,ra=y.is_work_user;if(!qa&&!ra&&!pa[na].isCommercePage&&!fa.has(na)&&pa[na].type!==p.FRIEND){ga.log('message_non_friend',{thread_id:ka,message_id:la,user:na});return;}ja();});},_messageIsNewlyCreatedGroup:function(ha,ia){return ha.action_type===j.LOG_MESSAGE&&ha.log_message_type===k.THREAD_NAME&&ia.message_count===1;}};},null);
__d('ChatTabPresence',['AvailableList','ChatTabModel','MercuryIDs'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={};function l(m){var n=j.getUserIDFromThreadID(m);if(n)h.updateForID(n);}i.addListener(function(){var m=i.get();m.tabs.forEach(function(n){if(n.raised&&!k[n.id])l(n.id);});k={};m.tabs.forEach(function(n){if(n.raised)k[n.id]=true;});});f.exports={};},null);
__d('ChatTabViewEvents',['Arbiter'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=new h();},null);
__d('MenuDeprecated',['Event','Arbiter','CSS','DataStore','DOM','HTML','Keys','Parent','Style','UserAgent_DEPRECATED','emptyFunction','Run'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s='menu:mouseover',t=null;function u(ea){if(j.hasClass(ea,'uiMenuContainer'))return ea;return o.byClass(ea,'uiMenu');}function v(ea){return o.byClass(ea,'uiMenuItem');}function w(ea){if(document.activeElement){var fa=v(document.activeElement);return ea.indexOf(fa);}return -1;}function x(ea){return l.find(ea,'a.itemAnchor');}function y(ea){return j.hasClass(ea,'checked');}function z(ea){return !j.hasClass(ea,'disabled')&&p.get(ea,'display')!=='none';}function aa(event){var ea=document.activeElement;if(!ea||!o.byClass(ea,'uiMenu')||!l.isInputNode(ea)){var fa=v(event.getTarget());fa&&da.focusItem(fa);}}function ba(ea){q.firefox()&&x(ea).blur();da.inform('select',{menu:u(ea),item:ea});}var ca=function(){ca=r;var ea={};ea.click=function(event){var fa=v(event.getTarget());if(fa&&z(fa)){ba(fa);var ga=x(fa),ha=ga.href,ia=ga.getAttribute('rel');return ia&&ia!=='ignore'||ha&&ha.charAt(ha.length-1)!=='#';}};ea.keydown=function(event){var fa=event.getTarget();if(event.getModifiers().any)return;if(!t||l.isInputNode(fa))return;var ga=h.getKeyCode(event),ha;switch(ga){case n.UP:case n.DOWN:var ia=da.getEnabledItems(t);ha=w(ia);da.focusItem(ia[ha+(ga===n.UP?-1:1)]);return false;case n.SPACE:var ja=v(fa);if(ja){ba(ja);event.prevent();}break;default:var ka=String.fromCharCode(ga).toLowerCase(),la=da.getEnabledItems(t);ha=w(la);var ma=ha,na=la.length;while(~ha&&(ma=++ma%na)!==ha||!~ha&&++ma<na){var oa=da.getItemLabel(la[ma]);if(oa&&oa.charAt(0).toLowerCase()===ka){da.focusItem(la[ma]);return false;}}}};h.listen(document.body,ea);},da=Object.assign(new i(),{focusItem:function(ea){if(ea&&z(ea)){this._removeSelected(u(ea));j.addClass(ea,'selected');x(ea).focus();}},getEnabledItems:function(ea){return da.getItems(ea).filter(z);},getCheckedItems:function(ea){return da.getItems(ea).filter(y);},getItems:function(ea){return l.scry(ea,'li.uiMenuItem');},getItemLabel:function(ea){return ea.getAttribute('data-label',2)||'';},isItemChecked:function(ea){return j.hasClass(ea,'checked');},autoregister:function(ea,fa,ga){ea.subscribe('show',function(){da.register(fa,ga);});ea.subscribe('hide',function(){da.unregister(fa);});},register:function(ea,fa){ea=u(ea);ca();if(!k.get(ea,s))k.set(ea,s,h.listen(ea,'mouseover',aa));if(fa!==false)t=ea;},setItemEnabled:function(ea,fa){if(!fa&&!l.scry(ea,'span.disabledAnchor')[0])l.appendContent(ea,l.create('span',{className:l.find(ea,'a').className+' disabledAnchor'},m(x(ea).innerHTML)));j.conditionClass(ea,'disabled',!fa);},toggleItem:function(ea){var fa=!da.isItemChecked(ea);da.setItemChecked(ea,fa);},setItemChecked:function(ea,fa){j.conditionClass(ea,'checked',fa);x(ea).setAttribute('aria-checked',fa);},unregister:function(ea){ea=u(ea);var fa=k.remove(ea,s);fa&&fa.remove();t=null;this._removeSelected(ea);},_removeSelected:function(ea){da.getItems(ea).filter(function(fa){return j.hasClass(fa,'selected');}).forEach(function(fa){j.removeClass(fa,'selected');});}});f.exports=da;},null);
__d('ChatQuietLinks',['DataStore','DOM','Event','Parent','UserAgent_DEPRECATED','getOrCreateDOMID'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={},o={silenceLinks:function(s){p(s,this.removeEmptyHrefs.bind(this));},nukeLinks:function(s){p(s,this.removeAllHrefs.bind(this));},removeEmptyHrefs:function(s){q(s,function(t){return !t||t==='#';});},removeAllHrefs:function(s){q(s);}};function p(s,t){var u=!!l.chrome(),v=!!l.chrome()||l.ie()>=9||l.firefox()>=4;if(n[m(s)])return;n[m(s)]=true;if(!v)return;if(!u){t&&t(s);return;}j.listen(s,'mouseover',function w(x){var y=k.byTag(x.getTarget(),'a');if(y){var z=y.getAttribute('href');if(r(z)){h.set(y,'stashedHref',y.getAttribute('href'));y.removeAttribute('href');}}});j.listen(s,'mouseout',function w(x){var y=k.byTag(x.getTarget(),'a'),z=y&&h.remove(y,'stashedHref');if(r(z))y.setAttribute('href',z);});j.listen(s,'mousedown',function(w){if(!w.isDefaultRequested())return true;var x=k.byTag(w.getTarget(),'a'),y=x&&h.get(x,'stashedHref');if(r(y))x.setAttribute('href',y);});}function q(s,t){var u=i.scry(s,'a');if(t)u=u.filter(function(v){return t(v.getAttribute('href'));});u.forEach(function(v){v.removeAttribute('href');if(!v.tabIndex)v.setAttribute('tabindex',0);});}function r(s){return s&&s!=='#';}f.exports=o;},null);
__d("CSSClassTransition",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=[];function i(){}Object.assign(i,{go:function(j,k,l,m){var n;for(var o=0;o<h.length;o++)if(h[o](j,k,l,m)===true)n=true;if(!n)j.className=k;},registerHandler:function(j){h.push(j);return {remove:function(){var k=h.indexOf(j);if(k>=0)h.splice(k,1);}};}});f.exports=i;},null);
__d('WebMessengerEvents',['Arbiter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=Object.assign(new h(),{MASTER_DOM_CHANGED:'master-dom-changed',DETAIL_DOM_CHANGED:'detail-dom-changed',FOCUS_COMPOSER:'focus-composer',FOCUS_SEARCH:'focus-search',FOCUS_AND_SELECT_SEARCH:'focus-and-select-search',STICKER_CLICKED:'sticker-clicked',SUBMIT_REPLY:'submit-reply',UPDATE_SELECTION:'update-selection',masterDOMChanged:function(){this.inform(i.MASTER_DOM_CHANGED);},detailDOMChanged:function(){this.inform(i.DETAIL_DOM_CHANGED);},focusComposer:function(){this.inform(i.FOCUS_COMPOSER);},focusSearch:function(){this.inform(i.FOCUS_SEARCH);},focusAndSelectSearch:function(){this.inform(i.FOCUS_AND_SELECT_SEARCH);},updateSelection:function(j){this.inform(i.UPDATE_SELECTION,j);},stickerClicked:function(j,k){this.inform(i.STICKER_CLICKED,{packID:j,stickerID:k});},submitReply:function(){this.inform(i.SUBMIT_REPLY);}});f.exports=i;},null);
__d('WebMessengerSubscriptionsHandler',['SubscriptionsHandler'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=new h('webmessenger');f.exports=i;},null);
__d("isWebMessengerURI",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){return (/^(\/messages)/.test(i.getPath()));}f.exports=h;},null);
__d('WebMessengerWidthControl',['$','Arbiter','BlueBar','CSS','CSSClassTransition','Event','Style','URI','ViewportBounds','WebMessengerEvents','WebMessengerSubscriptionsHandler','cx','getViewportDimensions','isWebMessengerURI','requestAnimationFrame','setTimeoutAcrossTransitions','shield','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){if(c.__markCompiled)c.__markCompiled();var z=205,aa=981,ba=257,ca=18,da=848,ea=724,fa=.57,ga=56,ha,ia,ja;function ka(pa,qa,ra){this.masterChanged=pa;this.detailChaned=qa;r.addSubscriptions(m.listen(window,'resize',y(x(la,this,this),100)),i.subscribe(['sidebar/initialized','sidebar/show','sidebar/hide','minisidebar/show'],x(la,this,this),i.SUBSCRIBE_NEW));var sa=oa()?ga:0;if(ra)sa=z;this._width=oa()?0:da;ja=true;la(this,sa);}function la(pa,qa){var ra=p.getRight()+p.getLeft();ra=ra||qa||0;var sa=t.withoutScrollbars().width-ra,ta=Math.round(Math.max(0,sa/2-aa/2));sa=aa+ta-ba;sa-=ca;sa=Math.max(ea,Math.min(da,sa));if(!isNaN(sa)&&pa._width!==sa){pa._width=sa;var ua=Math.round(sa/(1+fa)),va=sa-ua;pa.masterChanged(va);pa.detailChaned(ua);if(oa()){var wa=sa+ba;ma(function(){if(ia){document.body.className=ia;ia='';}na(wa+'px');k.removeClass(document.body,"_5uj5");ja&&q.detailDOMChanged();ja=false;},ia);}}}function ma(pa,qa){qa&&k.addClass(document.documentElement,"_5uj6");v(pa);qa&&w(k.removeClass.bind(null,document.documentElement,"_5uj6"),1000);}function na(pa){n.set(j.getNavRoot(),'width',pa);n.set(h('globalContainer'),'width',pa);}function oa(){if(!ha)ha=k.hasClass(document.body,"_6nw");return ha;}l.registerHandler(function(pa,qa,ra,sa){function ta(ua){return oa()&&u(new o(ua));}if(ta(sa)){ia=qa;return true;}else if(ta(ra)){ma(function(){pa.className=qa;na('');},true);return true;}});f.exports=ka;},null);
__d('Dock',['Event','shield','Arbiter','ArbiterMixin','BlueBar','ChatQuietLinks','CSS','DataStore','DOM','Parent','Scroll','Style','Toggler','Vector','csx','emptyFunction','WebMessengerWidthControl'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();c('WebMessengerWidthControl');function x(){}Object.assign(x,k,{MIN_HEIGHT:140,INITIAL_FLYOUT_HEIGHT_OFFSET:10,init:function(y){this.init=w;this.rootEl=y;this.calculateViewportDimensions();this.calculateFlyoutHeightOffset();m.removeEmptyHrefs(this.rootEl);h.listen(y,'click',this._onClick.bind(this));h.listen(window,'resize',this._onWindowResize.bind(this));t.subscribe(['show','hide'],function(z,aa){var ba=aa.getActive();if(!p.contains(y,ba))return;if(n.hasClass(ba,'fbNub')){this.notifyNub(ba,z);if(z==='show')this._resizeNubFlyout(ba);}else{var ca=q.byClass(ba,'fbNubFlyout');if(ca)n.conditionClass(ca,'menuOpened',z==='show');}}.bind(this));this.inform('init',{},j.BEHAVIOR_PERSISTENT);},calculateViewportDimensions:function(){return this.viewportDimensions=u.getViewportDimensions();},calculateFlyoutHeightOffset:function(){this.flyoutHeightOffset=this.INITIAL_FLYOUT_HEIGHT_OFFSET+u.getElementDimensions(this.rootEl).y;var y=l.getBar();if(y){var z=s.isFixed(y)?'viewport':'document';this.flyoutHeightOffset+=u.getElementPosition(y,z).y+u.getElementDimensions(y).y;}},toggle:function(y){var z=this._findFlyout(y);if(!z)return;this.subscribe('init',function(){t.toggle(y);});},show:function(y){this.subscribe('init',function(){t.show(y);});},showNub:function(y){n.show(y);},hide:function(y){this.subscribe('init',function(){var z=t.getInstance(y);p.contains(y,z.getActive())&&z.hide();});},hideNub:function(y){n.hide(y);this.hide(y);},setUseMaxHeight:function(y,z){n.conditionClass(y,'maxHeight',z!==false);this._resizeNubFlyout(y);},_resizeNubFlyout:function(y){var z=this._findFlyout(y);if(!z||n.hasClass(y,'placeholder')||!(n.hasClass(y,'openToggler')||n.hasClass(y,'opened')))return;var aa=p.find(z,'div.fbNubFlyoutOuter'),ba=p.find(aa,'div.fbNubFlyoutInner'),ca=p.find(ba,'div.fbNubFlyoutBody'),da=r.getTop(ca),ea=ca.offsetHeight;s.set(ca,'height','auto');var fa=u.getElementDimensions(z),ga=u.getElementDimensions(ca),ha=this.getMaxFlyoutHeight(y);s.set(z,'max-height',ha+'px');s.set(aa,'max-height',ha+'px');fa=u.getElementDimensions(z);var ia=u.getElementDimensions(ba),ja=ia.y-ga.y,ka=fa.y-ja,la=parseInt(ca.style.height||ca.clientHeight,10),ma=ka!==la;if(fa.y>ja&&ma)s.set(ca,'height',ka+'px');n.removeClass(z,'swapDirection');var na=u.getElementPosition(z).x;n.conditionClass(z,'swapDirection',function(){if(na<0)return true;return na+fa.x>this.viewportDimensions.x;}.bind(this)());if(ma&&da+ea>=ga.y){r.setTop(ca,ca.scrollHeight);}else r.setTop(ca,da);this.notifyNub(y,'resize');},getMaxFlyoutHeight:function(y){var z=this._findFlyout(y),aa=u.getElementPosition(z,'viewport'),ba=u.getElementDimensions(z),ca=Math.max(this.MIN_HEIGHT,this.viewportDimensions.y-this.flyoutHeightOffset)-(this.viewportDimensions.y-aa.y-ba.y);return Math.max(ca,0);},resizeAllFlyouts:function(){var y=this._getAllNubs(),z=y.length;while(z--)this._resizeNubFlyout(y[z]);},hideAllFlyouts:function(){var y=this._getAllNubs(),z=y.length;while(z--)this.hide(y[z]);},_getAllNubs:function(){var y=p.scry(this.rootEl,"div._50-v.openToggler");return y.concat(p.scry(this.rootEl,"div._50-v.opened"));},_onClick:function(event){var y=event.getTarget(),z=q.byClass(y,'fbNub');if(z){if(q.byClass(y,'fbNubFlyoutTitlebar')){var aa=q.byTag(y,'a'),ba=y.nodeName=='INPUT'&&y.getAttribute('type')=='submit';if(!aa&&!ba){this.hide(z);return false;}}this.notifyNub(z,'click');}},_onWindowResize:function(event){this.calculateViewportDimensions();this.resizeAllFlyouts();},_findFlyout:function(y){return n.hasClass(y,'fbNubFlyout')?y:p.scry(y,'div.fbNubFlyout')[0]||null;},registerNubController:function(y,z){o.set(y,'dock:nub:controller',z);z.subscribe('nub/button/content-changed',i(this.inform,this,'resize',y));z.subscribe('nub/flyout/content-changed',i(this._resizeNubFlyout,this,y));},unregisterNubController:function(y){o.remove(y,'dock:nub:controller');},notifyNub:function(y,z,aa){var ba=o.get(y,'dock:nub:controller');ba&&ba.inform(z,aa);}});f.exports=b.Dock||x;},null);
__d('NubController',['ArbiterMixin','Dock'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(){}Object.assign(j.prototype,h,{init:function(k){this.el=k;i.registerNubController(k,this);return this;},buttonContentChanged:function(){this.inform('nub/button/content-changed');},flyoutContentChanged:function(){this.inform('nub/flyout/content-changed');},hide:function(){i.hide(this.el);},show:function(){i.show(this.el);}});f.exports=j;},null);
__d('ChatTabViewSelector',['Arbiter','ArbiterMixin','CSS','ChatTabActions','CurrentUser','DOM','DataStore','Event','MenuDeprecated','MercuryThreadTitle.react','NubController','React','ReactDOM','ChatTabTemplates','Toggler','MercuryThreadInformer','MercuryThreads'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w=c('MercuryThreadInformer').get(),x=c('MercuryThreads').get();function y(z){var aa=u[':fb:chat:tab:selector'].build(),ba=aa.getRoot(),ca=aa.getNode('menu'),da=m.find(ca,'.uiMenuInner'),ea={},fa=new r().init(ba);j.hide(ba);m.insertBefore(z,ba);function ga(ja){var ka=0;for(var la in ea){var ma=ea[la],na=x.getThreadMetaNow(la),oa=ma.getNode('unreadCount'),pa=na&&na.unread_count||0;ka+=pa;if(pa>9)pa='+';j.conditionClass(oa,'invisible_elem',!pa);m.setContent(oa,pa);}var qa=aa.getNode('numMessages');j.conditionShow(qa,ka);m.setContent(qa,ka);}this.setTabData=function(ja){var ka=ea;ea={};if(ja.length<1){j.hide(ba);return;}j.show(ba);m.empty(da);ja.forEach(function(na){var oa=u[':fb:chat:tab:selector:item'].build(),pa=oa.getNode('content');ea[na.id]=oa;x.getThreadMeta(na.id,function(ra){t.render(s.createElement(q,{thread:ra,useAndSeparator:true,viewer:l.getID()}),pa);});m.prependContent(da,oa.getRoot());n.set(oa.getRoot(),'threadID',na.id);var qa=oa.getNode('closeButton');o.listen(qa,'click',function(event){k.closeTab(na.id,'selector/close-tab');event.kill();});});for(var la in ka)if(ka.hasOwnProperty(la)){var ma=ka[la].getNode('content');ma&&t.unmountComponentAtNode(ma);}fa.flyoutContentChanged();m.setContent(aa.getNode('numTabs'),ja.length);ga();};function ha(event,ja){if(ja.menu!=ca)return;var ka=n.get(ja.item,'threadID');y.inform('selected',ka);v.hide(ba);}function ia(event,ja){p.register(ca);}p.subscribe('select',ha.bind(this));v.listen('show',ba,function(){h.inform('layer_shown',{type:'ChatTabSelector'});ia();});v.listen('hide',ba,function(){h.inform('layer_hidden',{type:'ChatTabSelector'});});w.subscribe('threads-updated',ga);}Object.assign(y,i);f.exports=y;},null);
__d('ChatTypeaheadBehavior',['BanzaiLogger','ChatOpenTab','ChatTypeaheadConstants','ChatTypeaheadEvent','CSS','MercuryTypeaheadConstants','Parent','Rect','URI','csx','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();function s(u,v){var w=n.bySelector(u,"._4oes");if(w)l.conditionClass(w,"_5q83",v);}function t(u){'use strict';this._typeahead=u;this._loggedQuery=false;}t.prototype.enable=function(){'use strict';var u=this._typeahead;this._subscriptions=[u.subscribe('focus',function(){this._loggedQuery=false;u.getData().refreshData();s(u.getElement(),true);}.bind(this)),u.subscribe('blur',function(v){if(this._loggedQuery)h.log('ChatTypeaheadLoggerConfig',{event:k.ABANDONED_QUERY,max_results:u.getData().getMaxResults(),num_friend_results:u.getView().results.filter(function(w){return w.render_type===m.FRIEND_TYPE;}).length,query:u.getCore().value});u.getCore().reset();s(u.getElement(),false);this._loggedQuery=false;}.bind(this)),u.subscribe('respond',function(v,w){if(!this._loggedQuery&&u.getCore().getValue().length>0){h.log('ChatTypeaheadLoggerConfig',{event:k.NEW_QUERY});this._loggedQuery=true;}if(w.value&&w.value===u.getCore().getValue()){if(!w.results.length){var x=w.value.toLowerCase(),y=u.getData().getQueryCache();if(!w.isAsync&&!y.hasOwnProperty(x))return;u.getView().showNoResults();}l.addClass(u.getElement(),'hasValue');}}.bind(this)),u.subscribe('reset',function(){l.removeClass(u.getElement(),'hasValue');}),u.subscribe('select',function(v,w){var x=w.selected.uid;if(w.selected.mercury_thread&&!w.selected.mercury_thread.is_canonical)x=w.selected.mercury_thread.thread_fbid;u.getView().hide();h.log('ChatTypeaheadLoggerConfig',{event:k.RESULT_SELECTED,max_results:u.getData().getMaxResults(),result_type:w.selected.render_type,query:u.getCore().value});this._loggedQuery=false;if(w.selected.render_type===j.MEETING_ROOM_PAGE_TYPE){window.open(new p('/'+x.toString()),'_self',false);}else i.openTabByType(x,w.selected.type,'typeahead');}.bind(this)),u.subscribe('highlight',function(v,w){if(w.index>=0){var x=u.getView().getItems()[w.index];if(x){var y=new o(x),z=x.offsetParent,aa=y.boundWithin(new o(z)).getPositionVector();y.getPositionVector().sub(aa).scrollElementBy(z);}}})];};t.prototype.disable=function(){'use strict';this._subscriptions.forEach(function(u){this._typeahead.unsubscribe(u);},this);this._subscriptions=null;};Object.assign(t.prototype,{_subscriptions:null});f.exports=t;},null);
__d('ChatTabController',['Arbiter','BanzaiLogger','Bootloader','ChatActivity','ChatConfig','ChatNewMessageHandler','ChatTabActions','ChatTabLRUManager','ChatTabModel','ChatTabPolicy','ChatTabViewEvents','ChatTabViewInstances','ChatTabViewSelector','JSLogger','MercuryViewer','Style','UserAgent_DEPRECATED','ChatTabPresence','ChatTypeaheadBehavior','MercuryThreadInformer','MercuryThreadActions','MercuryThreads'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){if(c.__markCompiled)c.__markCompiled();c('ChatTabPresence');c('ChatTypeaheadBehavior');var y=c('MercuryThreadInformer').get(),z=c('MercuryThreadActions').get(),aa=c('MercuryThreads').get(),ba=l.get('tab_auto_close_timeout')||7200000,ca=u.create('tab_controller');function da(oa,pa,qa){var ra=p.get().tabs,sa=ra[oa],ta,ua;if(ra.length<2)return false;var va=ra.slice(oa+1),wa=ra.slice(0,oa),xa=va.concat(wa);if(!pa)xa.reverse();if(sa)xa.push(sa);for(var ya=0;ya<xa.length;ya++){ta=xa[ya];ua=s.get(ta.id);if(ua&&ua.isVisible()&&(!qa||ta.raised)){ua.focus();return true;}}return false;}function ea(oa,pa){var qa=pa&&pa.getRightmostHiddenTab();if(qa===oa)return null;return qa;}function fa(){return Math.floor(Math.random()*2147483648).toString(16);}function ga(oa,pa,qa,ra){n.raiseTab(oa,true,qa);var sa=pa&&pa.getLeftmostVisibleTab(),ta=pa&&pa.getTabsToShow();if(ta&&!ta[oa]&&sa){p.promoteThreadInPlaceOfThread(oa,sa,ea(oa,pa),true);}else n.promoteTab(oa);h.inform('chat/open-tab',oa);if(ra)return;var ua=s.get(oa);ua&&ua.focus();}function ha(oa,pa){if(!p.getTab(oa))n.raiseTab(oa,false);var qa=pa&&o.getLRUVisibleTab(pa),ra=pa&&pa.getTabsToShow();if(ra&&!ra[oa]&&qa)p.promoteThreadInPlaceOfThread(oa,qa,ea(oa,pa));}function ia(oa){t.subscribe('selected',function(ra,sa){ga(sa,oa);});h.subscribe('page_transition',function(ra,sa){n.closeFragileTabs();});h.subscribe('chat-visibility/go-offline',function(){n.closeAllTabs();});k.subscribe('idle',function(ra,sa){if(sa>ba){var ta=p.get().tabs;ta.forEach(function(ua){var va=ua.id;aa.getThreadMeta(va,function(wa){if(!wa.unread_count){ca.log('autoclose_idle_seen',{thread_id:va,idleness:sa});n.closeTab(va,'autoclose_idle_seen');}});});}});r.subscribe('nub-activated',function(ra,sa){ga(sa,oa);});r.subscribe('focus-tab',function(ra,sa){var ta=p.getTab(sa);if(ta&&ta.raised)ga(sa,oa,ta.signatureID,false);});function pa(ra,sa){i.log('VideoCallLoggerConfig',{event:'chat_tab_call_click'});j.loadModules(["FBRTCCore"],function(ta){ta.startOutgoingCall(sa.userID,sa.clickSource,sa.audioOnly);});}r.subscribe('video-call-clicked',pa);function qa(ra,sa){j.loadModules(["FBRTCCore"],function(ta){ta.startMultiwayCall(sa.threadID,sa.usersToCall,sa.clickSource,sa.audioOnly);});}r.subscribe('group-call-clicked',qa);r.subscribe('interaction-with-tab',function(ra,sa){var ta=p.getTab(sa);ta&&ta.raised&&z.markSeen(sa);});r.subscribe('esc-pressed',function(ra,sa){ca.log('close_esc',{thread_id:sa});var ta=p.indexOf(sa);n.closeTab(sa,'close_esc');setTimeout(function(){da(ta-1,true,true);},0);});y.subscribe('messages-received',function(ra,sa){for(var ta in sa){var ua=sa[ta];for(var va=0;va<ua.length;va++){var wa=ua[va];if(wa.author!=v.getID()){if(!wa.is_unread){ca.log('message_already_read',{action_id:wa.action_id,thread_id:wa.thread_id});continue;}aa.getThreadMeta(ta,function(xa){q.messageIsAllowed(xa,wa,function(){ha(ta,oa);m.newMessage(ta,wa);});});}}}});y.subscribe('thread-read-changed',function(ra,sa){for(var ta in sa)if(!sa[ta].mark_as_read){ca.log('autoclose_marked_unread',{thread_id:ta});n.closeTab(ta,'autoclose_marked_unread');}});r.subscribe('tab-pressed',function(ra,sa){return !da(p.indexOf(sa.id),sa.shiftPressed);});h.subscribe(u.DUMP_EVENT,function(ra,sa){sa.chat_controller={auto_close_timeout:ba};});this.openTab=function(ra,sa,ta,ua){ga(ra,sa,fa(),ua);if(ta)ta(s.get(ra));};}if(x.firefox()){var ja=function(){return w.get(document.body,'overflowX')+' '+w.get(document.body,'overflowY');},ka=ja(),la=function(){var oa=ja();if(oa!==ka){ka=oa;h.inform('overflow-applied-to-body');}};if('MutationObserver' in window){var ma=new MutationObserver(la),na={attributes:true,attributeFilter:['class','style']};ma.observe(document.documentElement,na);}else document.documentElement.addEventListener('DOMAttrModified',function(event){if(event.getTarget()===document.documentElement&&(event.attrName==='class'||event.attrName==='style'))la();},false);}f.exports=ia;},null);
__d('ChatNubLogger',['BanzaiLogger','ScriptPath','pageID'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k='TimeSpentChatNubLoggerConfig',l={INPUT_ACTIVE:'active',INPUT_INACTIVE:'inactive'},m={ENTER:'enter',LEAVE:'leave'},n=l.INPUT_INACTIVE,o=0,p=false;function q(){if(n==l.INPUT_ACTIVE&&!p){n=l.INPUT_INACTIVE;r(m.LEAVE);o=0;}else if(n==l.INPUT_INACTIVE&&p){n=l.INPUT_ACTIVE;o=Date.now();r(m.ENTER);}}function r(event){var t=h.create({retry:true}),u=Date.now();t.log(k,{event:event,client_event_time_ms:u,active_time_ms:event==m.LEAVE?u-o:0,page_id:j,script_path:i.getScriptPath(),page_data:i.getPageInfo()?i.getPageInfo().extraData:{}});}var s={processEvent:function(t){switch(t){case 'focus':p=true;break;case 'blur':p=false;break;default:break;}q();}};f.exports=s;},null);
__d('ChatDateBreak.react',['React','cx','formatDate','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=h.createClass({displayName:'ChatDateBreak',propTypes:{date:l.instanceOf(Date).isRequired},shouldComponentUpdate:function(n){return this.props.date.getTime()!==n.date.getTime();},render:function(){var n=j(this.props.date,{today:'g:ia',withinWeek:'D g:ia',thisYear:'M jS, g:ia',older:'m/d/Y g:ia'});return (h.createElement('time',{className:k(this.props.className,"_5w-5")},h.createElement('span',{className:"_5w-6"},n)));}});f.exports=m;},null);
__d('ChatAnimatedGifs',['URI'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={shouldHideBody:function(j){if(!j.has_attachment)return false;for(var k=0;k<j.attachments.length;k++){var l=j.attachments[k];if(l.preview_url){var m=i.getRawUrlFromSafeUrl(l.preview_url);if(j.body==m)return true;}}return false;},getRawUrlFromSafeUrl:function(j){return new h(j).getQueryData().url;}};f.exports=i;},null);
__d('ChatAttachmentProgressBar.react',['Animation','React','cx'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=i.PropTypes,l=34,m=i.createClass({displayName:'ChatAttachmentProgressBar',propTypes:{ephemeralTTLMode:k.number.isRequired,timestamp:k.number.isRequired,isMessageAuthor:k.bool},componentDidMount:function(){if(!this.refs.progressBar)return;var n=l,o=this.props.ephemeralTTLMode,p=n/o*(Date.now()-this.props.timestamp),q=this._getRemainingTime();if(q>0&&p<n){var r=this.props.isMessageAuthor?'left':'right';new h(this.refs.progressBar).from(r,p).to(r,n).duration(q).go();}},_getRemainingTime:function(){return this.props.ephemeralTTLMode-(Date.now()-this.props.timestamp);},render:function(){return (i.createElement('a',{className:"_4yo"},i.createElement('span',{className:"_1gxq"}),i.createElement('span',{className:"_1gxr",ref:'progressBar'},i.createElement('span',{className:"_4yu"}))));}});f.exports=m;},null);
__d('ChatProgressBar.react',['React','cx'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=h.PropTypes,k=2000,l=250,m=h.createClass({displayName:'ChatProgressBar',_timer:null,propTypes:{isMessageAuthor:j.bool,onDone:j.func,setExpiredAnimation:j.func,timestamp:j.number.isRequired,ttl:j.number.isRequired},getInitialState:function(){return {percentage:this._getRemainingPercentage()};},componentDidMount:function(){if(this._getRemainingTime()>0){this._animateProgressBar();}else this.props.setExpiredAnimation&&this.props.setExpiredAnimation();},componentWillUnmount:function(){this._timer&&clearTimeout(this._timer);},render:function(){return (h.createElement('div',{className:"_3pcc"+(this._getRemainingTime()<0?' '+"_3pcd":''),ref:'item',style:{width:this.state.percentage.toString()+'%'}}));},_getRemainingTime:function(){return this.props.ttl-(Date.now()-this.props.timestamp)-k;},_getRemainingPercentage:function(){return 100-(Date.now()-this.props.timestamp)/(this.props.ttl-k)*100;},_animateProgressBar:function(){this._timer=setInterval(function(){if(this.isMounted())this.setState({percentage:this._getRemainingPercentage()});if(this._getRemainingTime()<0){clearTimeout(this._timer);this.props.onDone&&this.props.onDone();}}.bind(this),l);}});f.exports=m;},null);
__d('MessageBubbleMixin',['DOMDimensions','ReactDOM'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=2,k={getInitialState:function(){return {bubbleWidth:null};},componentDidMount:function(){this._restyleBubble(this.props);},componentDidUpdate:function(l){if(l.maxWidth!==this.props.maxWidth||l.body!==this.props.body||!l.attachments&&this.props.attachments)this._restyleBubble(l);},_restyleBubble:function(l){if(this.props.attachments){this.setState({bubbleWidth:null});return;}var m=i.findDOMNode(this.refs.bubble);if(l.maxWidth!==this.props.maxWidth||h.getElementDimensions(m).width>this.props.maxWidth){var n=this.props.maxWidth;this.setState({bubbleWidth:n},this._shrinkBubble);return;}this._shrinkBubble();},_shrinkBubble:function(){var l=i.findDOMNode(this.refs.bubble),m=h.getElementDimensions(l).width,n=i.findDOMNode(this.refs.content),o=n?h.getElementDimensions(n).width+h.measureElementBox(i.findDOMNode(this.refs.contentWrapper),'width',true,false,false):0,p=o+j;if(o>0&&p<this.props.maxWidth&&m-p-this.getBoxWidth()>0)this.setState({bubbleWidth:p});}};f.exports=k;},null);
__d('ChatBubble.react',['Animation','ChatProgressBar.react','DOMDimensions','EmojiLikeUtils','EmojiOnlyMessage.react','MercuryAttachment','MercuryMessageBody.react','MercuryTagHelper','MessageBubbleMixin','MessagingGiftWrap.react','React','ReactDOM','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){'use strict';if(c.__markCompiled)c.__markCompiled();var v=r.PropTypes,w=1000,x=r.createClass({displayName:'ChatBubble',_boxWidth:0,mixins:[p],propTypes:{attachments:v.node,body:v.string,customLike:v.object,isEmojiLike:v.bool,isGiftWrapped:v.bool,isMessageAuthor:v.bool,maxWidth:v.number.isRequired,onUnwrap:v.func,threadID:v.string,timestamp:v.number,ttl:v.number},getInitialState:function(){return {emojis:undefined,ephemeralExpiring:false,ephemeralExpired:false};},componentDidMount:function(){if(this.props.attachments&&!this.props.isEmojiLike)return;if(!this.props.emojis){var y=this.props.body||'',z=k.richContent(y);if(z)this.setState({emojis:z});}},render:function(){var y=this.props.body||'';return (r.createElement('div',babelHelpers['extends']({},this.props,{className:u("_5w1r"+(this._isEpehmeralStylePreferred()?' '+"_4gx-":'')+(this.state.ephemeralExpiring?' '+"_1xti":'')+(this.state.ephemeralExpired?' '+"_1xtj":'')+(!this.state.emojis?' '+"_3_om":'')+(!!this.state.emojis?' '+"_31xx":''),this.props.className),ref:'bubble',style:{maxWidth:this.props.maxWidth,width:this.state.emojis?null:this.state.bubbleWidth,wordWrap:y.length>=15?'break-word':'inherit'}}),this._renderProgressBar(),r.createElement('div',{className:"_4gx_",ref:'inner'},this._renderContent(),this.props.attachments),this.props.isGiftWrapped?r.createElement(q,{onUnwrap:this.props.onUnwrap}):null));},_renderContent:function(){if(!this.props.body||this.props.isEmojiLike)return null;if(this.state.emojis){var y=k.getSourceURIs(this.state.emojis),z=r.createElement(l,{sourceURIs:y});}else z=r.createElement(n,{body:this.props.body,ranges:this.props.ranges,threadID:this.props.threadID,customLike:this.props.customLike});return (r.createElement('div',{className:"_d97"+(!!this.state.emojis?' '+"_31xy":''),ref:'contentWrapper'},r.createElement('span',{className:"_5yl5",ref:'content'},z)));},_isEpehmeralStylePreferred:function(){if(!this.props.ttl)return false;if(!this.props.attachments)return true;return this.props.attachments.props.attachments.every(function(y){return m.isEphemeralTextStyle(y);});},_onProgressBarAnimationDone:function(){if(this.isMounted()){this.setState({ephemeralExpiring:true});new h(this.refs.inner).to('opacity',0).duration(w).go();}},_setExpiredAnimation:function(){if(this.isMounted()){this.setState({ephemeralExpiring:true});this.setState({ephemeralExpired:true});}},_renderProgressBar:function(){if(!this.props.timestamp||!this.props.ttl||!this._isEpehmeralStylePreferred()||this.state.emojis&&this.state.emojis.length>0)return null;return (r.createElement(i,{ttl:this.props.ttl,timestamp:this.props.timestamp,isMessageAuthor:this.props.isMessageAuthor,onDone:this._onProgressBarAnimationDone,setExpiredAnimation:this._setExpiredAnimation}));},contentWraps:function(){var y=s.findDOMNode(this.refs.content),z=y.getClientRects(),aa=j.getElementDimensions(y).height;return z&&z.length>1&&z[0].height<aa;},getBoxWidth:function(){if(!this._boxWidth)this._boxWidth=j.measureElementBox(s.findDOMNode(this.refs.bubble),'width',true,true,false);return this._boxWidth;}});f.exports=x;},null);
__d('MercuryErrorInfo',['MercuryErrorType','MercuryMessageInfo','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={getMessage:function(l){var m='';if(k.isConnectionError(l)){m=j._("This message didn't send.");if(k.isTransient(l))m=j._("{message} Check your internet connection and click to try again.",[j.param('message',m)]);}else{if(l&&l.description){m=l.description;}else m=j._("This message failed to send.");if(k.isTransient(l))m=j._("{message} Click to send again.",[j.param('message',m)]);}return m;},isConnectionError:function(l){if(l&&l.type==h.TRANSPORT)return l.code===1001||l.code===1004||l.code===1006;return false;},isTransient:function(l){return l&&l.is_transient;},isPermanent:function(l){return l?!this.isTransient(l):false;},hasErrorStatus:function(l){return i.hasError(l);}};f.exports=k;},null);
__d('MercuryMessageError.react',['CurrentUser','ImmutableObject','MercuryErrorInfo','MercuryMessageActions','React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=l.PropTypes,p=l.createClass({displayName:'MercuryMessageError',propTypes:{authorFBID:o.string,message:o.instanceOf(i).isRequired},getDefaultProps:function(){return {authorFBID:h.getID()};},render:function(){var q=this.props.message,r=q.error_data;return (l.createElement('div',babelHelpers['extends']({},this.props,{className:n(this.props.className,this._getClassNameFromStatus(q)),tabIndex:j.isTransient(r)?0:null,onClick:j.isTransient(r)?this.messageResend:null}),l.createElement('div',{className:"_2fs1"}),l.createElement('span',{dangerouslySetInnerHTML:{__html:this._getTextFromStatus(q)}})));},messageResend:function(){k.getForFBID(this.props.authorFBID).resend(this.props.message);},_getClassNameFromStatus:function(q){if(j.hasErrorStatus(q)){return "_2fs2"+(' '+"_2fs3")+(j.isTransient(q.error_data)?' '+"_2fs4":'')+(j.isPermanent(q.error_data)?' '+"_2fs5":'');}else return "_2fs6 _2fs2";},_getTextFromStatus:function(q){var r='',s=q.error_data;if(j.hasErrorStatus(q))r=j.getMessage(s);if(typeof r==='object'&&r.__html)r=r.__html;return r;}});f.exports=p;},null);
__d('ChatMessage.react',['BootloadedComponent.react','ChatAnimatedGifs','ChatAttachmentProgressBar.react','ChatBubble.react','EmojiLikeUtils','MercuryTimestamp','CSS','CurrentUser','ImmutableObject','JSResource','MercuryAttachment','MercuryAttachmentType','MercuryErrorInfo','MercuryIDs','MercuryMessageActions','MercuryMessageError.react','MercuryMessageInfo','MercuryThreads','MessagingGiftWrapChecker','MercuryDisplayTimeFilterMessageRenderer','React','ReactDOM','XUISpinner.react','cssVar','cx','fbt','isRTL','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia){'use strict';if(c.__markCompiled)c.__markCompiled();var ja=ba.PropTypes,ka=ba.createClass({displayName:'ChatMessage',propTypes:{message:ja.instanceOf(p).isRequired,maxBubbleWidth:ja.number.isRequired,onAttachmentLoad:ja.func,onStickerClick:ja.func},componentDidMount:function(){n.conditionClass(ca.findDOMNode(this),"_2cnu",this.isOneLine());},isOneLine:function(){var la=this.props.message;return (x.isInbound(la)&&!this.refs.attachmentsInside&&this.refs.bubble&&!this.refs.bubble.contentWraps());},shouldComponentUpdate:function(la,ma){return la.message!==this.props.message;},render:function(){var la=this.props.message,ma=r.get(la).length>0,na=x.isInbound(la),oa=u.isGroupChat(la.thread_id),pa=ha(la.body),qa=t.hasErrorStatus(la),ra="_5wd4"+(na?' '+"_1nc7":'')+(!na?' '+"_1nc6":'')+(ma?' '+"_2_-t":'')+(na&&oa?' '+"_5ysy":'')+(qa?' '+"_1zcs":'')+(pa?' '+"direction_rtl":'')+(!pa?' '+"direction_ltr":'');return (ba.createElement('div',{className:ia(this.props.className,ra)},this._renderInner(),this._renderUndertext()));},_renderInner:function(){var la=this.props.message,ma={};if(x.isOutbound(la)){ma['data-hover']='tooltip';ma['data-tooltip-position']='right';ma['aria-label']=ga._("{time}",[ga.param('time',m.getPreciseTimestamp(la.timestamp))]);}if(la.is_filtered_content)return (ba.createElement('div',babelHelpers['extends']({className:"_5wd9 _5wdc uiBoxYellow clearfix",ref:'inner'},ma),aa.renderFilteredContent(la)));return (ba.createElement('div',babelHelpers['extends']({className:"_5wd9",ref:'inner'},ma),this._renderBubble(),this._renderAttachments('outside')));},_renderUndertext:function(){if(this.props.message.is_filtered_content)return null;return (ba.createElement('div',{className:"_3ry4",ref:'undertext'},ba.createElement(w,{className:"_5wda clearfix",message:this.props.message,ref:'status'}),this._renderSpoofWarning()));},_renderSpoofWarning:function(){return (this.props.message.is_spoof_warning?ba.createElement(h,{bootloadPlaceholder:ba.createElement('span',null),bootloadLoader:q('MercurySpoofWarning.react'),authorID:this.props.message.author,className:"_5wdb"}):null);},_getAttachmentPlaceholder:function(){return (ba.createElement('div',{style:{padding:'20px',text_align:'center'}},ba.createElement(da,null)));},_renderProgressBar:function(){var la=this.props.message;if(!la.ephemeral_ttl_mode||!la.timestamp)return null;return (ba.createElement(j,{ephemeralTTLMode:la.ephemeral_ttl_mode,timestamp:la.timestamp,isMessageAuthor:!x.isInbound(la)}));},_renderAttachments:function(la){var ma=this.props.message,na=y.getForFBID(o.getID()).getThreadMetaNow(ma.thread_id),oa=na?na.custom_like_icon:null,pa=la=='inside'?'attachmentsInside':'attachmentsOutside',qa=r.get(ma).filter(function(sa){var ta=r.isBubblePreferred(sa);return ta&&la==='inside'||!ta&&la==='outside';}),ra=ma.attachments.length>0&&ma.attachments.every(function(sa){return r.isEphemeralAttachmentStyle(sa);});if(qa.length>0)return (ba.createElement(h,{bootloadPlaceholder:this._getAttachmentPlaceholder(),bootloadLoader:q('MercuryAttachments.react'),className:(la==='outside'?"_3e7u":'')+(!!ma.body?' '+"_16ys":'')+(!!ma.ephemeral_ttl_mode?' '+"_3-rb":'')+(' '+"_n4o"),attachments:qa,customLike:oa,isChat:true,isGiftWrapped:z.shouldRenderWithGiftWrap(ma)&&la==='outside',maxWidth:this.props.maxBubbleWidth,message:ma,onUnwrap:this._handleUnwrap,renderProgressBar:ra?this._renderProgressBar:null,onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick,ref:pa}));},_renderBubble:function(){var la=this.props.message,ma=la.body,na=this._renderAttachments('inside'),oa=x.isInbound(la);if(i.shouldHideBody(la))ma='';if(ma||na)return (ba.createElement('div',{className:"_5wde _n4o"},ba.createElement(k,{attachments:na,body:ma,className:"_5wdf",isMessageAuthor:!oa,maxWidth:this.props.maxBubbleWidth,ranges:la.ranges,ref:'bubble',isEmojiLike:l.isEmojiLike(la),isGiftWrapped:z.shouldRenderWithGiftWrap(la),onUnwrap:this._handleUnwrap,threadID:la.thread_id,ttl:la.ephemeral_ttl_mode,timestamp:la.timestamp,customLike:la.customLike})));},_handleUnwrap:function(){var la="2500ms";setTimeout(function(){return this._persistUnwrapping();}.bind(this),la.substring(0,la.length-2));},_persistUnwrapping:function(){v.get().unwrap(this.props.message);}});f.exports=ka;},null);
__d('ChatMessageGroup.react',['ChatConfig','ChatDateBreak.react','ChatMessage.react','Image.react','immutable','ImmutableObject','MercuryIDs','MercuryParticipants','MercuryTimestamp','React','StoreAndPropBasedStateMixin','cx','fbt','MercuryThreads'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';if(c.__markCompiled)c.__markCompiled();var u=c('MercuryThreads').get(),v=q.PropTypes,w=new m({name:'',href:'#',image_src:''}),x=h.get('chattab_rounded_profile',false),y=q.createClass({displayName:'ChatMessageGroup',mixins:[r(o)],propTypes:{activeMessageID:v.string,author:v.string,hasDateBreak:v.bool,isCanonical:v.bool,isFromViewer:v.bool,isPageMessage:v.bool,maxBubbleWidth:v.number,messages:v.instanceOf(l.List).isRequired,onAttachmentLoad:v.func,onStickerClick:v.func,threadID:v.string},statics:{calculateState:function(aa){return {participants:z(aa)};}},shouldComponentUpdate:function(aa,ba){return (this.props.activeMessageID!==aa.activeMessageID||this.props.isFromViewer!==aa.isFromViewer||!l.is(this.props.messages,aa.messages)||!l.is(this.state.participants,ba.participants));},render:function(){return (q.createElement('div',{className:"_4tdt"},this._renderProfileColumn(),this._renderName(),q.createElement('div',{className:"_4tdv"},this._renderMessages())));},_renderProfileColumn:function(){if(this.props.isFromViewer)return null;var aa=this.state.participants.get(this.props.author)||w,ba=t._("{name} {time}",[t.param('name',aa.name),t.param('time',p.getPreciseTimestamp(this.props.messages.last().timestamp))]),ca=aa.image_src?q.createElement(k,{src:aa.image_src}):null;return (q.createElement('div',{className:"_31o4"+(x?' '+"_3njy":'')},q.createElement('a',{'aria-label':ba,className:"_4tdw",'data-hover':'tooltip','data-tooltip-content':ba,'data-tooltip-position':'left',href:aa.href,ref:'link'},ca)));},_renderName:function(){if(this.props.isCanonical||this.props.isFromViewer)return null;var aa=this.state.participants.get(this.props.messages.first().author);if(!aa)return null;var ba=u.getThreadMetaNow(this.props.threadID),ca=aa.short_name;if(ba&&ba.custom_nickname){var da=n.getUserIDFromParticipantID(aa.id);if(ba.custom_nickname[da])ca=ba.custom_nickname[da];}return (q.createElement('div',{className:"_4tdx"},ca));},_renderMessages:function(){var aa=this.props.messages.size,ba=[];this.props.messages.forEach(function(ca,da,ea){var fa=ca.message_id===this.props.activeMessageID;if(fa&&!(da===0&&this.props.hasDateBreak))ba.push(q.createElement(i,{date:new Date(ca.timestamp),key:'db:'+ca.message_id}));ba.push(q.createElement(j,{isFromViewer:this.props.isFromViewer,key:ca.message_id,maxBubbleWidth:this.props.maxBubbleWidth,message:ca,nextTimestamp:this._getNextTimestamp(ea,aa,da),onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick}));}.bind(this));return ba;},_getNextTimestamp:function(aa,ba,ca){return ca<ba-1?aa.get(ca+1).timestamp:this.props.nextTimestamp;}});function z(aa){return l.Map().withMutations(function(ba){aa.readReceipts.forEach(function(ca,da){ba.set(da,o.getOrFetch(da));});ba.set(aa.author,o.getOrFetch(aa.author));});}f.exports=y;},null);
__d('HovercardLink',['Bootloader','URI'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={getBaseURI:function(){return new i('/ajax/hovercard/hovercard.php');},constructEndpoint:function(k,l){return j.constructEndpointWithGroupAndLocation(k,l,null);},constructEndpointWithLocation:function(k,l){return j.constructEndpointWithGroupAndLocation(k,null,l);},constructEndpointWithGroupAndLocation:function(k,l,m,n){return j.constructEndpointWithGroupLocationAndExtraParams(k,l,m,n);},constructEndpointWithGroupLocationAndExtraParams:function(k,l,m,n){var o=arguments.length<=4||arguments[4]===undefined?null:arguments[4],p=new i(j.getBaseURI()).setQueryData({id:k.id}),q={};if(o!==null)for(var r in o)q[r]=o[r];if((k.weakreference||n)&&l)q.group_id=l;if(m)q.hc_location=m;p.addQueryData({extragetparams:JSON.stringify(q)});return p;}};f.exports=j;},null);
__d('MercuryLogMessageRenderer',['Bootloader','CSS','HovercardLink','MercuryViewer','MercuryXMATRenderer','MessagesViewer','MercuryLogMessageType','MercuryParticipants','React','ReactDOM','Image.react','TextWithEntities.react','TooltipLink.react','UserAgent','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){if(c.__markCompiled)c.__markCompiled();var y={renderText:function(na,oa,pa){switch(na.log_message_type){case n.SUBSCRIBE:ba(na,pa);break;case n.UNSUBSCRIBE:ga(na,pa);break;case n.THREAD_NAME:ha(na,oa,pa);break;case n.THREAD_IMAGE:ia(na,oa,pa);break;case n.WALLPAPER:ja(na,pa);break;case n.GENERIC_ADMIN_TEXT:ka(na,pa);break;default:h.loadModules(["MercurySpecialLogMessageRenderer"],function(qa){qa.renderText(na,pa);});break;}},renderIcon:function(na){return (p.createElement(r,{className:z(na),src:x('images/spacer.gif')}));},renderLegacy:function(na,oa,pa,qa){z(qa).split(' ').forEach(function(ra){return ra&&i.addClass(na,ra);});this.renderText(qa,null,function(ra){q.render(p.createElement('span',null,ra),oa);});this.renderAttachmentLegacy(pa,qa);},renderAttachmentLegacy:function(na,oa){if(oa.log_message_type==n.THREAD_IMAGE){var pa=oa.log_message_data.image;if(pa&&pa.preview_url){q.render(p.createElement(r,{className:"_z6a",onClick:function(){return aa(pa);},src:pa.preview_url}),na);i.show(na);}}}};f.exports=y;function z(na){var oa=na.log_message_type,pa=na.log_message_data;return "_5wzu"+(oa==n.SUBSCRIBE?' '+"_5wzj":'')+(oa==n.UNSUBSCRIBE?' '+"_5wzk":'')+(oa==n.THREAD_NAME?' '+"_5wzl":'')+(oa==n.THREAD_IMAGE?' '+"_5wzm":'')+(oa==n.VIDEO_CALL&&pa.answered?' '+"_5wzn":'')+(oa==n.VIDEO_CALL&&!pa.answered?' '+"_5wzo":'')+(oa==n.PHONE_CALL&&pa.answered?' '+"_5wzp":'')+(oa==n.PHONE_CALL&&!pa.answered?' '+"_5wzq":'')+(oa==n.SERVER_ERROR?' '+"_5wzr":'');}function aa(na){m.bootstrapWithConfig({src:na.preview_url,endpoint:na.url,fbid:na.metadata.fbid,dimensions:na.metadata.dimensions,disablePaging:true},null);}function ba(na,oa){var pa=ma(na.log_message_data.added_participants);switch(pa.length){case 1:ca(na,oa,pa);break;case 2:da(na,oa,pa);break;case 3:ea(na,oa,pa);break;default:fa(na,oa,pa);break;}}function ca(na,oa,pa){var qa=[na.author,pa[0]];o.getMulti(qa,function(ra){if(na.author==k.getID()){oa(w._("You added {subscriber1}.",[w.param('subscriber1',la(ra[pa[0]]))]));}else if(pa[0]==k.getID()){oa(w._("{actor} added you.",[w.param('actor',la(ra[na.author]))]));}else oa(w._("{actor} added {subscriber1}.",[w.param('actor',la(ra[na.author])),w.param('subscriber1',la(ra[pa[0]]))]));});}function da(na,oa,pa){var qa=[na.author].concat(pa);o.getMulti(qa,function(ra){if(na.author==k.getID()){oa(w._("You added {subscriber1} and {subscriber2}.",[w.param('subscriber1',la(ra[pa[0]])),w.param('subscriber2',la(ra[pa[1]]))]));}else if(pa[0]==k.getID()){oa(w._("{actor} added you and {subscriber2}.",[w.param('actor',la(ra[na.author])),w.param('subscriber2',la(ra[pa[1]]))]));}else oa(w._("{actor} added {subscriber1} and {subscriber2}.",[w.param('actor',la(ra[na.author])),w.param('subscriber1',la(ra[pa[0]])),w.param('subscriber2',la(ra[pa[1]]))]));});}function ea(na,oa,pa){var qa=[na.author].concat(pa);o.getMulti(qa,function(ra){if(na.author==k.getID()){oa(w._("You added {subscriber1}, {subscriber2} and {subscriber3}.",[w.param('subscriber1',la(ra[pa[0]])),w.param('subscriber2',la(ra[pa[1]])),w.param('subscriber3',la(ra[pa[2]]))]));}else if(pa[0]==k.getID()){oa(w._("{actor} added you, {subscriber2} and {subscriber3}.",[w.param('actor',la(ra[na.author])),w.param('subscriber2',la(ra[pa[1]])),w.param('subscriber3',la(ra[pa[2]]))]));}else oa(w._("{actor} added {subscriber1}, {subscriber2} and {subscriber3}.",[w.param('actor',la(ra[na.author])),w.param('subscriber1',la(ra[pa[0]])),w.param('subscriber2',la(ra[pa[1]])),w.param('subscriber3',la(ra[pa[2]]))]));});}function fa(na,oa,pa){var qa=[na.author].concat(pa);o.getMulti(qa,function(ra){function sa(ua){var va=p.createElement('div',null,ua.map(function(wa){return p.createElement('div',null,wa.name);}));return (p.createElement(t,{alignH:'center',position:'above',tooltip:va},w._({"*":"{num} more"},[w.param('num',ua.length,[0])])));}var ta=pa.map(function(ua){return ra[ua];});if(na.author==k.getID()){oa(w._("You added {subscriber1}, {subscriber2} and {more_people}.",[w.param('subscriber1',la(ta[0])),w.param('subscriber2',la(ta[1])),w.param('more_people',sa(ta.slice(2)))]));}else if(pa[0]==k.getID()){oa(w._("{actor} added you, {subscriber2} and {more_people}.",[w.param('actor',la(ra[na.author])),w.param('subscriber2',la(ta[1])),w.param('more_people',sa(ta.slice(2)))]));}else oa(w._("{actor} added {subscriber1}, {subscriber2} and {more_people}.",[w.param('actor',la(ra[na.author])),w.param('subscriber1',la(ta[0])),w.param('subscriber2',la(ta[1])),w.param('more_people',sa(ta.slice(2)))]));});}function ga(na,oa){var pa=[na.author],qa=na.log_message_data.removed_participants,ra;if(qa.length===1){ra=qa[0];pa.push(ra);}o.getMulti(pa,function(sa){var ta=sa[na.author],ua=sa[ra];if(na.author==k.getID()){if(!ra||ra==na.author){oa(w._("You left the conversation."));}else oa(w._("You removed {name} from the conversation.",[w.param('name',la(ua))]));}else if(!ra||ra==na.author){oa(w._("{actor} left the conversation.",[w.param('actor',la(ta))]));}else if(ra==k.getID()){oa(w._("{actor} removed you from the conversation.",[w.param('actor',la(ta))]));}else oa(w._("{actor} removed {name} from the conversation.",[w.param('actor',la(ta)),w.param('name',la(ua))]));});}function ha(na,oa,pa){var qa=na.log_message_data.name,ra="_5wzs"+(u.isBrowser('Chrome')?' '+"_4fbd":'');if(na.author==k.getID()){if(qa){pa(w._("You named the conversation: {name}.",[w.param('name',p.createElement('span',{className:ra},p.createElement(s,{renderEmoticons:true,renderEmoji:true,text:qa})))]));}else pa(w._("You removed the conversation name."));}else o.get(na.author,function(sa){var ta=la(sa,oa);if(qa){pa(w._("{actor} named the conversation: {name}.",[w.param('actor',ta),w.param('name',p.createElement('span',{className:ra},p.createElement(s,{renderEmoticons:true,renderEmoji:true,text:qa})))]));}else pa(w._("{actor} removed the conversation name.",[w.param('actor',ta)]));});}function ia(na,oa,pa){if(na.author==k.getID()){if(na.log_message_data.image){pa(w._("You changed the conversation picture."));}else pa(w._("You removed the conversation picture."));}else o.get(na.author,function(qa){var ra=la(qa,oa);if(na.log_message_data.image){pa(w._("{actor} changed the conversation picture.",[w.param('actor',ra)]));}else pa(w._("{actor} removed the conversation picture.",[w.param('actor',ra)]));});}function ja(na,oa){if(na.author==k.getID()){oa(w._("You changed the wallpaper."));}else o.get(na.author,function(pa){var qa=la(pa);oa(w._("{actor} changed the wallpaper.",[w.param('actor',qa)]));});}function ka(na,oa){var pa=l.renderText(na);oa(pa);}function la(na,oa){var pa=na.fbid,qa=j.constructEndpoint({id:pa}),ra=oa&&oa.custom_nickname&&oa.custom_nickname[pa],sa=ra?ra:na.name;if(na.href)return (p.createElement('a',{className:"_5wzt",href:na.href,'data-hovercard':qa},sa));return sa;}function ma(na){var oa=na.indexOf(k.getID());if(oa>0){var pa=na.filter(function(qa){return qa!==k.getID();});return [k.getID()].concat(pa);}return na;}},null);
__d('MercuryLogMessage.react',['DOM','DOMDimensions','Event','ImmutableObject','MercuryLogMessageRenderer','MercuryLogMessageType','React','ReactDOM','cx','fbt','cancelAnimationFrame','emptyFunction','formatDate','joinClasses','requestAnimationFrame'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){'use strict';if(c.__markCompiled)c.__markCompiled();var w=n.PropTypes,x=n.createClass({displayName:'MercuryLogMessage',propTypes:{loadMoreMessages:w.func,maxWidth:w.number,message:w.instanceOf(k).isRequired,onImageLoad:w.func,thread:w.object},getDefaultProps:function(){return {onImageLoad:s};},getInitialState:function(){return {messageText:null};},componentDidMount:function(){this.componentWillReceiveProps(this.props);},componentWillUnmount:function(){if(this._raf)r(this._raf);},_renderErrorMessage:function(){return (n.createElement('a',{onClick:this._loadMoreMessages},q._("Show previous messages.")));},_loadMoreMessages:function(){var y=this.props.loadMoreMessages&&this.props.loadMoreMessages();if(y){this.setState({messageText:this._renderErrorMessage()});}else{var z=q._("Couldn't find previous messages.");this.setState({messageText:z});}},componentWillReceiveProps:function(y){if(y.message.log_message_type===m.SERVER_ERROR){this._loadMoreMessages();return;}l.renderText(y.message,y.thread,function(z){this.setState({messageText:z});}.bind(this));},shouldComponentUpdate:function(y,z){return (this.state.messageText!=z.messageText||y.maxWidth!==this.props.maxWidth);},componentDidUpdate:function(){this._informAttachmentLoaded();if(!this.refs.attachment)return;l.renderAttachmentLegacy(this.refs.attachment,this.props.message);h.scry(this.refs.wrap,'img').forEach(function(y){var z=j.listen(y,'load',function(){this._informAttachmentLoaded();z.remove();}.bind(this));}.bind(this));},render:function(){return (n.createElement('div',babelHelpers['extends']({},this.props,{className:u(this.props.className,"_5ye6"),ref:'wrap',style:babelHelpers['extends']({},this.props.style,this._getStyle()),title:t(new Date(this.props.message.timestamp),'g:ia')}),n.createElement('div',{className:"_5ye7"},l.renderIcon(this.props.message),this.state.messageText),n.createElement('div',{className:"_5ye8",ref:'attachment'})));},_getStyle:function(){return this.props.maxWidth?{maxWidth:this.props.maxWidth}:null;},_informAttachmentLoaded:function(){if(this._raf)r(this._raf);this._raf=v(function(){this.props.onImageLoad&&this.props.onImageLoad(i.getElementDimensions(this.refs.wrap).height);delete this._raf;}.bind(this));}});f.exports=x;},null);
__d('ChatConversation.react',['ChatDateBreak.react','ChatMessageGroup.react','ChatMessage.react','immutable','MercuryActionType','MercuryLogMessage.react','MessageList.react','React','MercuryShareAttachmentRenderLocations','cancelAnimationFrame','invariant','requestAnimationFrame'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){'use strict';if(c.__markCompiled)c.__markCompiled();var t=o.PropTypes,u=o.createClass({displayName:'ChatConversation',_raf:(undefined,Number),_onMountTimeout:(undefined,Number),propTypes:{contextBanner:t.object,isCanonical:t.bool.isRequired,loadMoreMessages:t.func,maxBubbleWidth:t.number.isRequired,messages:t.instanceOf(k.List).isRequired,onAttachmentLoad:t.func,onMount:t.func,onStickerClick:t.func,viewer:t.string.isRequired,thread:t.object,threadID:t.string},componentDidMount:function(){this._raf=s(function(){this._onMountTimeout=setTimeout(function(){this.props.onMount&&this.props.onMount();delete this._onMountTimeout;}.bind(this),0);delete this._raf;}.bind(this));},componentWillUnmount:function(){if(this._raf)q(this._raf);clearTimeout(this._onMountTimeout);},componentWillReceiveProps:function(v){!(v.maxBubbleWidth===this.props.maxBubbleWidth)?r(0):undefined;},render:function(){return (o.createElement('div',null,this.props.contextBanner,o.createElement(n,{DateBreak:h,LogMessage:m,MessageGroup:i,deliveryTimestamp:0,isCanonical:this.props.isCanonical,location:p.CHAT,loadMoreMessages:this.props.loadMoreMessages,maxBubbleWidth:this.props.maxBubbleWidth,messages:this.props.messages,onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick,readReceipts:k.OrderedMap(),viewer:this.props.viewer,thread:this.props.thread,threadID:this.props.threadID})));}});f.exports=u;},null);
__d('MercuryIndicatorController',['ArbiterMixin','DOM','MercuryActionType','MercuryDelayedRoger','MercuryIDs','MercuryMessageSourceTags','MercuryParticipants','MercuryViewer','WorkModeConfig','arrayContains','formatDate','removeFromArray','fbt','MercuryRoger','MercuryThreads','MercuryTypingReceiver'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=c('MercuryRoger').get(),v=c('MercuryThreads').get(),w=c('MercuryTypingReceiver').get(),x=[];function y(z){this._threadID=z;this._canonicalUser=l.getUserIDFromThreadID(z);x.push(this);}Object.assign(y.prototype,h,{destroy:function(){s(x,this);},setLastMessage:function(z){this._lastMsg=z;this._handleStateChange();},_informStateChanged:function(z){if(z.activity=='none'&&this._currentActivity=='none')return;if(this._lastMsg&&o.isViewer(this._lastMsg.author))z.self_authored=true;this._currentActivity=z.activity;this.inform('state-changed',z);},_notifySentFrom:function(){var z,aa,ba=this._lastMsg.source_tags||[];if(q(ba,m.MESSENGER)){if(!p.is_work_user){z=i.create('a',{href:'/mobile/messenger','class':'fcg',target:'_blank'},t._("Sent from Messenger"));}else z=i.create('a',{href:'/mobile','class':'fcg',target:'_blank'},t._("Sent from Work Chat"));aa='sentFromMobile';}else if(q(ba,m.MOBILE)){z=i.create('a',{href:'/mobile','class':'fcg',target:'_blank'},t._("Sent from Mobile"));aa='sentFromMobile';}else if(q(ba,m.EMAIL)){z=t._("Sent from email");aa='sentFromEmail';}else{this._informStateChanged({activity:'none'});return;}this._informStateChanged({activity:aa,text:z});},_notifySeenTimestamp:function(z){var aa=u.getSeenTimestamp(this._threadID,z[0])*.001,ba=Date.now()*.001,ca;if(aa<ba-518400){ca='M j';}else if(aa<ba-86400){ca='D g:ia';}else ca='g:ia';this._informStateChanged({activity:'seen-timestamp',text:t._("Seen {timestamp}",[t.param('timestamp',r(aa,ca))])});},_nameNormalizer:function(z){var aa;n.getMulti(z,function(ba){function ca(ea){if(ba[ea]!==undefined&&ba[ea].short_name){return ba[ea].short_name.toLowerCase();}else return ea;}var da=z.map(ca);aa=function(ea){var fa=ca(ea),ga=da.indexOf(fa)!==da.lastIndexOf(fa);return ga?ba[ea].name:ba[ea].short_name;};});return aa;},_seenByEveryone:function(z,aa,ba){var ca=ba?ba.participants.length:0,da=z.length;if(aa.author!=o.getID()&&(!ba||ba.participants.indexOf(aa.author)>-1))da++;return ca>2&&da>=ca-1;},_notifySeenBy:function(z){var aa=this._lastMsg,ba=true;n.getMulti(z,function(ca){ba=false;if(this._lastMsg!=aa)return;var da=v.getThreadMetaNow(this._threadID),ea=null;if(da&&da.custom_nickname)ea=da.custom_nickname;var fa=[];for(var ga in ca){var ha=ca[ga],ia=ha.short_name;if(ea&&ea[ha.fbid])ia=ea[ha.fbid];fa[ga]=ia;}var ja,ka=false;if(this._seenByEveryone(z,aa,da)){ja=t._("Seen by everyone");}else if(z.length==1){ja=t._("Seen by {user}",[t.param('user',fa[z[0]])]);}else if(z.length==2){ja=t._("Seen by {user1}, {user2}",[t.param('user1',fa[z[0]]),t.param('user2',fa[z[1]])]);}else if(z.length==3){ja=t._("Seen by {user1}, {user2}, {user3}",[t.param('user1',fa[z[0]]),t.param('user2',fa[z[1]]),t.param('user3',fa[z[2]])]);}else if(z.length>3){var la=Object.keys(ca).length-2,ma=t._({"*":"{num} more"},[t.param('num',la,[0])]),na=i.create('span',{className:'more'},ma);ja=t._("Seen by {user1}, {user2}, {=num more link}",[t.param('user1',fa[z[0]]),t.param('user2',fa[z[1]]),t.param('=num more link',na)]);ka=true;}this._informStateChanged({activity:'seen-by',text:ja,seenBy:z,tooltip:ka});}.bind(this));ba&&this._informStateChanged({activity:'none'});},_notifyTyping:function(z){var aa=this._lastMsg,ba=true;n.getMulti(z,function(ca){ba=false;if(this._lastMsg!=aa)return;var da=v.getThreadMetaNow(this._threadID),ea=da?da.participants.length:0,fa;if(da)fa=this._nameNormalizer(da.participants);if(!fa)fa=function(la){return ca[la].short_name;};var ga,ha=false;if(ea>2&&z.length>=ea-1){ga=t._("Everyone is typing...");}else if(z.length==1){ga=t._("{name} is typing...",[t.param('name',ca[z[0]].short_name)]);}else if(z.length==2){ga=t._("{user1} and {user2} are typing...",[t.param('user1',ca[z[0]].short_name),t.param('user2',ca[z[1]].short_name)]);}else if(z.length==3){ga=t._("{user1}, {user2}, and {user3} are typing...",[t.param('user1',ca[z[0]].short_name),t.param('user2',ca[z[1]].short_name),t.param('user3',ca[z[2]].short_name)]);}else if(z.length>3){var ia=Object.keys(ca).length-2,ja=t._({"*":"{num} more"},[t.param('num',ia,[0])]),ka=i.create('a',{href:'#'},ja);ga=t._("{user1}, {user2}, and {=num more link} are typing...",[t.param('user1',ca[z[0]].short_name),t.param('user2',ca[z[1]].short_name),t.param('=num more link',ka)]);ha=true;}this._informStateChanged({activity:'typing',text:ga,typing:z,tooltip:ha});}.bind(this));ba&&this._informStateChanged({activity:'none'});},_handleStateChange:function(){var z=j.LOG_MESSAGE;if(!this._lastMsg||this._lastMsg.action_type==z){this._informStateChanged({activity:'none'});return;}if(this._typing&&this._typing.length){this._notifyTyping(this._typing);return;}if(this._canonicalUser&&this._lastMsg.author!=o.getID()){this._notifySentFrom();return;}var aa=k.getSeenBy(this._threadID,true);if(aa.length)if(this._canonicalUser){this._notifySeenTimestamp(aa);return;}else{this._notifySeenBy(aa);return;}this._informStateChanged({activity:'none'});}});w.addRetroactiveListener('state-changed',function(z){x.forEach(function(aa){var ba=z[aa._threadID];if(ba!==undefined){aa._typing=ba;aa._handleStateChange();}});});k.subscribe('state-changed',function(z,aa){x.forEach(function(ba){aa[ba._threadID]&&ba._handleStateChange();});});f.exports=y;},null);
__d('MercuryLastMessageIndicator.react',['DOM','MercuryIndicatorController','MercuryParticipants','React','ReactDOM','TooltipData','cx','emptyFunction','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=k.PropTypes,r=k.createClass({displayName:'MercuryLastMessageIndicator',propTypes:{hideTyping:q.bool,indicatorWillShow:q.func,indicatorDidShow:q.func,lastMessage:q.object,threadID:q.string.isRequired},getDefaultProps:function(){return {indicatorWillShow:o,indicatorDidShow:o};},getInitialState:function(){return {data:{}};},componentDidMount:function(){this._setup(this.props);},componentWillReceiveProps:function(s){if(s.threadID!=this.props.threadID){this._destroy();this._setup(s);}else if(s.lastMessage!=this.props.lastMessage)this._controller.setLastMessage(s.lastMessage);},componentWillUpdate:function(s,t){if(this.isVisible(s,t))this.props.indicatorWillShow();},componentDidUpdate:function(){if(!this.isVisible())return;this.setText();this.setTooltip();this.props.indicatorDidShow();},componentWillUnmount:function(){this._destroy();},render:function(){return (k.createElement('div',{className:this.getRootClass()},k.createElement('div',{className:"_510h"}),k.createElement('span',{className:"_510f",ref:'text'},'')));},getRootClass:function(){var s="_510g"+(this.state.data.self_authored?' '+"_510e":''),t=this.state.data.activity,u=null;if(String(t).startsWith('seen')){u='seen';}else if(t=='typing'){u=this.props.hideTyping?null:t;}else u=t;return p(s,u,this.props.className);},isVisible:function(s,t){s=s||this.props;t=t||this.state;return (t.data&&t.data.activity!='none'&&!(s.hideTyping&&t.data.activity=='typing'));},setText:function(){if(this.state.data.text)h.setContent(l.findDOMNode(this.refs.text),this.state.data.text);},setTooltip:function(){if(this.state.data.activity=='seen-by'&&this.state.data.tooltip)j.getMulti(this.state.data.seenBy,function(s){var t=h.create('div',null,this.state.data.seenBy.map(function(u){return h.create('div',null,s[u].name);}));m.set(h.find(l.findDOMNode(this),'span.more'),t,'above','center');}.bind(this));},_setup:function(s){this._controller=new i(s.threadID);this._subscription=this._controller.subscribe('state-changed',function(t,u){return this.setState({data:u});}.bind(this));s.lastMessage&&this._controller.setLastMessage(s.lastMessage);},_destroy:function(){this._subscription.unsubscribe();this._controller.destroy();}});f.exports=r;},null);
__d('MessengerContextBannerBootloader',['BootloadedComponent.react','CurrentUser','DOM','JSResource','React','ReactDOM'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();function n(q,r,s,t,u){var v=j.create('div');o(q,r,function(w){m.render(w,v,s(v));},t,u);}function o(q,r,s,t,u,v){v=babelHelpers['extends']({left:0,position:'absolute',right:0,top:0},v);p({otherUserFBIDs:t&&[t],threadID:q,style:v},r,s,u);}function p(q,r,s,t){s(l.createElement(h,babelHelpers['extends']({bootloadPlaceholder:l.createElement('div',{style:{height:80}}),bootloadLoader:k('MessengerContextBannerContainer.react'),location:r,onResize:t,viewer:i.getID()},q)));}f.exports={bootload:n,getBootloadedComponent:o};},null);
__d('ChatTabMessagesView',['Animation','Arbiter','BanzaiLogger','CSS','ChatConversation.react','ChatPerfInstrumentation','ChatTabViewEvents','ChatTypingIndicators.react','ChatWelcomeMessage','CurrentUser','DOM','Event','immutable','MercuryLastMessageIndicator.react','LiveTimer','MercuryIDs','MercuryViewer','MercuryMessageStore','MessengerContextBannerBootloader','MessengerHotLikePreviewEvents','React','ReactDOM','ReactComponentRenderer','MercuryShareAttachmentRenderLocations','Scroll','ServerTime','StickerActions','StickerState','StickerStoreController','Style','SubscriptionsHandler','UserAgent_DEPRECATED','arrayContains','getElementPosition','throttle','MercuryThreads'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa){'use strict';if(c.__markCompiled)c.__markCompiled();var qa=c('MercuryThreads').get(),ra=64,sa=null,ta=20;function ua(wa){if(sa===null){var xa=wa.childNodes[0];ka.set(wa,'overflow','scroll');sa=xa.clientWidth-ra;ka.set(wa,'overflow','');}return sa;}function va(wa,xa,ya,za,ab,bb,cb,db,eb){this.loadingIcon=ab;this.threadID=wa;this.sheetController=xa;this.scrollContainer=ya;this.conversationElem=za;this.contextBannerEligible=eb;this.contextBannerElem=null;this.tabView=db;v.restart(ga.get()/1000);this._loadingMoreMessages=false;this._initialLoadFinished=false;function fb(){n.inform('interaction-with-tab',wa);}this._subscriptions=new la();this._subscriptions.addSubscriptions(i.subscribe('overflow-applied-to-body',this.scrollToBottom.bind(this)),s.listen(this.scrollContainer,'mousedown',fb));if(ma.firefox()){var gb='WheelEvent' in window?'wheel':'DOMMouseScroll';this.scrollContainer.addEventListener(gb,fb,false);}else this._subscriptions.addSubscriptions(s.listen(this.scrollContainer,'mousewheel',fb));this._subscriptions.addSubscriptions(s.listen(this.scrollContainer,'scroll',pa(this.scrolling,50,this)));var hb;ca.render(ba.createElement(o,{threadID:this.threadID,indicatorsWillShow:function(){return (hb=this.isScrolledToBottom());}.bind(this),indicatorsDidShow:function(){return (hb&&this.scrollToBottom(true));}.bind(this),viewer:q.getID()}),cb);var ib;this.lastMessageIndicatorNode=bb;this.lastMessageIndicator=new da(u,this.lastMessageIndicatorNode);this.lastMessageIndicator.setProps({threadID:this.threadID,hideTyping:true,indicatorWillShow:function(){return ib=this.isScrolledToBottom();}.bind(this),indicatorDidShow:function(){return ib&&this.scrollToBottom(true);}.bind(this)});this.initializeConversation();}Object.assign(va.prototype,{initializeConversation:function(){this._store=new y(this.threadID);this._conversation=new da(l,this.conversationElem);this._conversation.setProps({isCanonical:w.isCanonical(this.threadID),loadMoreMessages:this._loadMoreMessages.bind(this),maxBubbleWidth:ua(this.scrollContainer),messages:t.List(),onAttachmentLoad:function(wa){var xa=this.scrollContainer,ya=fa.getTop(xa)+xa.clientHeight;if(ya+wa>=xa.scrollHeight-ta||this._shouldScrollToBottom){this._shouldScrollToBottom=true;this.scrollToBottom();}}.bind(this),onMount:this.scrollToBottom.bind(this),onStickerClick:this._onStickerClick.bind(this),viewer:q.getID(),threadID:this.threadID});qa.getThreadMeta(this.threadID,function(wa){return this._conversation.setProps({thread:wa});}.bind(this));this._subscriptions.addSubscriptions(this._store.subscribe(this._updateMessageFromStore.bind(this)),aa.addListener(aa.START,function(wa,xa){if(this.threadID!==xa)return;this._likePreview=wa;this._conversation.setProps({messages:this._getNormalizedMessages()},this.scrollToBottom.bind(this));this.scrollToBottom();clearInterval(this._scrollToBottomInterval);this._scrollToBottomInterval=setInterval(this.scrollToBottom.bind(this),50);}.bind(this)),aa.addListener(aa.STOP,function(wa){if(this.threadID!==wa)return;this._likePreview=null;}.bind(this)),aa.addListener(aa.FINISH_ANIMATION,function(wa){clearInterval(this._scrollToBottomInterval);}.bind(this)),aa.addListener(aa.REMOVE,function(wa){if(this.threadID!==wa)return;clearInterval(this._scrollToBottomInterval);this._likePreview=null;this._conversation.setProps({messages:this._getNormalizedMessages()});}.bind(this)));},_updateMessageFromStore:function(wa){if(wa.eventType==y.MESSAGES_RECEIVED&&wa.allFromOthers&&!this.isScrolledToBottom()){this.sheetController.openNewMessagesSheet();this._newMessagesSheetOpened=true;}if(wa.eventType==y.MESSAGES_REORDERED){this._loadingMoreMessages=false;k.hide(this.loadingIcon);}var xa=this.isScrolledToBottom(),ya=this._getLoadingHeight(),za=this.scrollContainer.scrollHeight,ab=fa.getTop(this.scrollContainer);this._messages=wa.messages;var bb=p.getWelcomeMessage(this.threadID);if(bb)this._messages.push(bb);this._conversation.setProps({messages:this._getNormalizedMessages()},function(){if(xa||this._shouldScrollToBottom){this.scrollToBottom();this.setShouldScrollToBottom(false);}else if(wa.eventType==y.MESSAGES_REORDERED)this.scrollToPosition(this.scrollContainer.scrollHeight-za-ya+ab);if(!this._initialLoadFinished){this._initialLoadFinished=true;m.logCHAT_CONVERSATION_TTI();}if(this._store.hasFetchedAll()&&this.contextBannerEligible)this.renderContextBanner(this.threadID);}.bind(this));this.lastMessageIndicator.setProps({lastMessage:this._messages.length>0?this._messages[this._messages.length-1]:null});if(wa.eventType==y.MESSAGES_RECEIVED&&this._shouldShowStickerReplyNUX(this._messages)&&this.tabView&&this.tabView.isFocused())this.tabView.showStickerReplyNUX();if(wa.eventType==y.MESSAGES_CHANGED)this._checkToAnimateSticker();},setShouldScrollToBottom:function(wa){this._shouldScrollToBottom=wa;},scrolling:function(){this._checkToAnimateSticker();if(this.isScrolledNearTop()&&!this._loadingMoreMessages&&!this.isScrolledToBottom()&&!this.tabView._isDragDropActive)if(this._store.fetchMoreMessages()){k.show(this.loadingIcon);this._loadingMoreMessages=true;}if(!this._newMessagesSheetOpened)return;if(this.isScrolledToBottom()){this.sheetController.closeNewMessagesSheet();this._newMessagesSheetOpened=false;}},getScrollTop:function(){return this.scrollContainer&&fa.getTop(this.scrollContainer);},getThreadID:function(){return this.threadID;},destroy:function(){r.scry(this.conversationElem,'.stickerContainer').forEach(function(wa){return ca.unmountComponentAtNode(wa);});this.unmountContextBanner();ca.unmountComponentAtNode(this.conversationElem);this._subscriptions&&this._subscriptions.release();ca.unmountComponentAtNode(this.lastMessageIndicatorNode);delete this.lastMessageIndicator;this._store&&this._store.destroy();this.destroyed=true;},_getLoadingHeight:function(){return this.loadingHeight||this.loadingIcon.clientHeight;},_shouldShowStickerReplyNUX:function(wa){if(!ia.shouldShowStickerReplyNUX()||!wa.length)return false;var xa=wa[wa.length-1];if(xa.author===x.getID())return false;if(xa.has_attachment)return xa.attachments.some(function(ya){return ya.attach_type==='sticker';});return false;},isScrolledToBottom:function(wa){var xa=this.scrollContainer;wa=wa||ta;return fa.getTop(xa)+xa.clientHeight>=xa.scrollHeight-wa;},isScrolledNearTop:function(){return fa.getTop(this.scrollContainer)<this.scrollContainer.clientHeight;},scrollToBottom:function(wa){this.scrollToPosition(this.scrollContainer.scrollHeight,wa);},scrollToPosition:function(wa,xa){this._scrollTopAnimation&&this._scrollTopAnimation.stop();if(xa===true){this._scrollTopAnimation=new h(this.scrollContainer).to('scrollTop',wa).ease(h.ease.end).duration(400).go();}else fa.setTop(this.scrollContainer,wa);},_loadMoreMessages:function(){return this._store.fetchMoreMessages();},_onStickerClick:function(wa,xa){if(!wa)return;j.log('StickersLoggerConfig',{event:'click_sticker',packid:wa,stickerid:xa});var ya=this.tabView;ia.onTrayDataReady(function(){if(na(ia.getPackIDsInTray(),wa)){var za=ia.getPack(wa);if(za&&za.isPromoted)ha.addPack(wa);ya.setStickersFlyoutPackID(wa);}else ja.showStore(wa);});},_checkToAnimateSticker:function(){var wa=oa(this.scrollContainer);i.inform('chatScrolled/'+this.threadID,{scrollTop:fa.getTop(this.scrollContainer),top:wa.y,viewHeight:wa.height});},setNewThreadID:function(wa){this._store.setNewThreadID(wa);},_getNormalizedMessages:function(){if(this._likePreview){this._messages.push(this._likePreview);}else this._messages=this._messages.filter(function(wa){return !wa.is_like_preview;});return t.List(this._messages);},renderContextBanner:function(wa,xa){z.getBootloadedComponent(wa,ea.CHAT,function(ya){ka.set(this.conversationElem,'padding-top','80px');this._conversation.setProps({contextBanner:ya});}.bind(this),xa,function(ya){ka.set(this.conversationElem,'padding-top',ya+'px');}.bind(this));},unmountContextBanner:function(){if(this._conversation)this._conversation.setProps({contextBanner:null});}});f.exports=va;},null);
__d('ChatPrivacyActionController',['ChatVisibility','JSLogger','PresencePrivacy'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=function(l,m){this._userID=l;this._logger=i.create('blackbird');this._getState=function(){if(h.isOnline())return j.allows(this._userID)?k.NORMAL:k.BLOCKED;return k.OFFLINE;};this._togglePrivacy=function(){var o=this._getState();switch(this._getState()){case k.OFFLINE:if(h.isOnline()){this._logger.error('tabs_already_online');break;}this._logger.log('tabs_go_online',{tab_id:this._userID});h.goOnline(function(){if(!j.allows(this._userID)){if(this._getState()!==k.BLOCKED)this._logger.error('privacy_action_controller_blocked_inconsistency');this._togglePrivacy();}}.bind(this));break;case k.BLOCKED:j.allow(this._userID);this._logger.log('tabs_unblock',{tab_id:this._userID});break;case k.NORMAL:j.disallow(this._userID);this._logger.log('tabs_block',{tab_id:this._userID});break;}};var n=function(){m&&m(this._getState());}.bind(this);n();this._subscribeToken=j.subscribe('privacy-changed',n);};k.OFFLINE='offline';k.BLOCKED='blocked';k.NORMAL='normal';Object.assign(k.prototype,{togglePrivacy:function(){this._logger.log('gear_menu_toggle_privacy',{tab_id:this._userID});this._togglePrivacy();},destroy:function(){this._subscribeToken&&j.unsubscribe(this._subscribeToken);}});f.exports=k;},null);
__d('ChatTabSheetListener',['ChatPrivacyActionController','MercuryIDs','MercuryParticipants','MercuryThreadInformer','MercuryThreads','MercuryViewer'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();function n(o,p){this.$ChatTabSheetListener1=p;this.$ChatTabSheetListener3=o;this.$ChatTabSheetListener4=i.getUserIDFromThreadID(this.$ChatTabSheetListener3);k.get().subscribe('threads-updated',function(){return this.$ChatTabSheetListener5();}.bind(this));if(this.$ChatTabSheetListener4)this.$ChatTabSheetListener2=new h(this.$ChatTabSheetListener4,function(q){return this.$ChatTabSheetListener6(q);}.bind(this));}n.prototype.destroy=function(){this.$ChatTabSheetListener2&&this.$ChatTabSheetListener2.destroy();};n.prototype.$ChatTabSheetListener5=function(){var o=l.get();o.getThreadMeta(this.$ChatTabSheetListener3,function(p){var q=m.getID(),r=p.participants.filter(function(s){return s!==q;});r.length<1&&!o.isNewEmptyLocalThread(this.$ChatTabSheetListener3)?this.$ChatTabSheetListener1.openNoRecipientsSheet():this.$ChatTabSheetListener1.closeNoRecipientsSheet();}.bind(this));};n.prototype.$ChatTabSheetListener6=function(o){switch(o){case h.OFFLINE:this.$ChatTabSheetListener1.closeUserBlockedSheet();this.$ChatTabSheetListener1.openOfflineSheet();break;case h.NORMAL:this.$ChatTabSheetListener1.closeUserBlockedSheet();this.$ChatTabSheetListener1.closeOfflineSheet();break;case h.BLOCKED:this.$ChatTabSheetListener1.closeOfflineSheet();j.get(i.getParticipantIDFromUserID(this.$ChatTabSheetListener4),function(p){p.is_friend?this.$ChatTabSheetListener1.openUserBlockedSheet():this.$ChatTabSheetListener1.closeUserBlockedSheet();}.bind(this));break;}};f.exports=n;},null);
__d('ChatTabSheetController',['Bootloader','ChatTabSheetListener','Deferred','MercuryIDs'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=function(m,n,o,p){this._threadID=m;this._rootElement=n;this._tabElement=o;this._view=p;this._deferred=new j();this._isLoading=false;this._listener=new i(this._threadID,this);};Object.assign(l.prototype,{openAddFriendsSheet:function(){this._load(function(){this._addFriendsTabSheet.open();}.bind(this));},openMessageBlockedTabSheet:function(){this._load(function(){this._threadIsMessageBlockedSheet.open();}.bind(this));},getAddFriendsParticipants:function(){return this._addFriendsTabSheet?this._addFriendsTabSheet.getParticipants():[];},openNameConversationSheet:function(m){this._load(function(){this._nameConversationTabSheet.open(m);}.bind(this));},openReadOnlySheet:function(){this._load(function(){this._readOnlyTabSheet.open();}.bind(this));},openNewMessagesSheet:function(){this._load(function(){this._newMessagesTabSheet.open();}.bind(this));},openUploadWarningTabSheet:function(){this._load(function(){this._uploadWarningTabSheet.open();}.bind(this));},openThreadIsMutedTabSheet:function(){this._load(function(){this._threadIsMutedTabSheet.open();}.bind(this));},openEmployeeAwaySheet:function(){this._load(function(){this._employeeAwaySheet.open();}.bind(this));},openOfflineSheet:function(){this._load(function(){this._offlineTabSheet.open();}.bind(this));},openUserBlockedSheet:function(){this._load(function(){this._userBlockedTabSheet.open();}.bind(this));},openNoRecipientsSheet:function(){this._load(function(){this._noRecipientsTabSheet&&this._noRecipientsTabSheet.open();}.bind(this));},openSecretModeSheet:function(){this._load(function(){this._secretModeSheet.open();}.bind(this));},closeAddFriendsSheet:function(){this._lazy(function(){this._addFriendsTabSheet.close();}.bind(this));},closeAutomaticNameConversationSheet:function(){this._lazy(function(){if(this._nameConversationTabSheet&&this._nameConversationTabSheet.isAutomatic())this._nameConversationTabSheet.close();}.bind(this));},closeMessageBlockedTabSheet:function(){this._lazy(function(){this._threadIsMessageBlockedSheet.close();}.bind(this));},closeThreadIsMutedTabSheet:function(){this._lazy(function(){this._threadIsMutedTabSheet.close();}.bind(this));},closeNewMessagesSheet:function(){this._lazy(function(){this._newMessagesTabSheet.close();}.bind(this));},closeUploadWarningTabSheet:function(){this._lazy(function(){this._uploadWarningTabSheet.close();}.bind(this));},closeOfflineSheet:function(){this._lazy(function(){this._offlineTabSheet.close();}.bind(this));},closeUserBlockedSheet:function(){this._lazy(function(){this._userBlockedTabSheet.close();}.bind(this));},closeSecretModeSheet:function(){this._lazy(function(){this._secretModeSheet.close();}.bind(this));},onClickMessagesBlockedSheet:function(m){this._lazy(function(){this._unblockMessagesSub=this._threadIsMessageBlockedSheet.subscribe('clicked',m);}.bind(this));},closeNoRecipientsSheet:function(){this._lazy(function(){this._noRecipientsTabSheet&&this._noRecipientsTabSheet.close();}.bind(this));},onClickNewMessagesSheet:function(m){this._lazy(function(){this._newMessageClickSub=this._newMessagesTabSheet.subscribe('clicked',m);}.bind(this));},onClickThreadIsMutedSheet:function(m){this._lazy(function(){this._threadIsMutedClickSub=this._threadIsMutedTabSheet.subscribe('clicked',m);}.bind(this));},onClickSecretModeSheet:function(m){this._lazy(function(){this._secretModeClickSub=this._secretModeSheet.subscribe('clicked',m);}.bind(this));},onResize:function(m){this._lazy(function(){this._sheetView.subscribe('resize',m);}.bind(this));},onTokensChanged:function(m){this._lazy(function(){this._addFriendsTabSheet.subscribe('chat/tokens-changed',m);}.bind(this));},onEscape:function(m){this._lazy(function(){this._addFriendsTabSheet.subscribe('esc-pressed',m);}.bind(this));},destroy:function(){this._listener&&this._listener.destroy();this._sheetView&&this._sheetView.destroy();this._offlineTabSheet&&this._offlineTabSheet.destroy();this._userBlockedTabSheet&&this._userBlockedTabSheet.destroy();this._newMessageClickSub&&this._newMessageClickSub.unsubscribe();this._threadIsMutedClickSub&&this._threadIsMutedClickSub.unsubscribe();},_load:function(m){this._bootload();this._deferred.then(m);},_lazy:function(m){this._deferred.then(m);},_bootload:function(){if(this._isLoading)return;this._isLoading=true;h.loadModules(["ChatAddFriendsTabSheet","ChatEmployeeAwaySheet","ChatNameConversationTabSheet","ChatNewMessagesTabSheet","ChatNoRecipientsTabSheet","ChatOfflineTabSheet","ChatReadOnlyTabSheet","ChatThreadIsMessageBlockedSheet","ChatThreadIsMutedTabSheet","ChatThreadSecretModeSheet","ChatUploadWarningTabSheet","ChatUserBlockedTabSheet","MercurySheetView"],function(m,n,o,p,q,r,s,t,u,v,w,x,y){this._sheetView=new y(this._threadID,this._rootElement,this._tabElement);var z=this._threadID,aa=this._rootElement,ba=this._sheetView,ca=this._view;this._addFriendsTabSheet=new m(z,aa,ba,ca);this._employeeAwaySheet=new n(z,aa,ba);this._nameConversationTabSheet=new o(z,aa,ba);this._newMessagesTabSheet=new p(z,aa,ba);this._offlineTabSheet=new r(z,aa,ba);this._readOnlyTabSheet=new s(z,aa,ba);this._threadIsMessageBlockedSheet=new t(z,aa,ba);this._threadIsMutedTabSheet=new u(z,aa,ba);this._secretModeSheet=new v(z,aa,ba);this._uploadWarningTabSheet=new w(z,aa,ba);this._userBlockedTabSheet=new x(z,aa,ba);if(!k.getUserIDFromThreadID(this._threadID))this._noRecipientsTabSheet=new q(z,aa,ba);this._deferred.resolve();}.bind(this));}});f.exports=l;},null);
__d('TrackingNodes',['TrackingNodeTypes'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={types:h,BASE_CODE_START:58,BASE_CODE_END:126,BASE_CODE_SIZE:69,PREFIX_CODE_START:42,PREFIX_CODE_END:47,PREFIX_CODE_SIZE:6,TN_URL_PARAM:'__tn__',encodeTN:function(j,k){var l=(j-1)%i.BASE_CODE_SIZE,m=parseInt((j-1)/i.BASE_CODE_SIZE,10);if(j<1||m>i.PREFIX_CODE_SIZE)throw Error('Invalid tracking node: '+j);var n="";if(m>0)n+=String.fromCharCode(m-1+i.PREFIX_CODE_START);n+=String.fromCharCode(l+i.BASE_CODE_START);if(typeof k!="undefined"&&k>0)n+=String.fromCharCode(48+Math.min(k,10)-1);return n;},decodeTN:function(j){if(j.length===0)return [0];var k=j.charCodeAt(0),l=1,m,n;if(k>=i.PREFIX_CODE_START&&k<=i.PREFIX_CODE_END){if(j.length==1)return [0];n=k-i.PREFIX_CODE_START+1;m=j.charCodeAt(1);l=2;}else{n=0;m=k;}if(m<i.BASE_CODE_START||m>i.BASE_CODE_END)return [0];var o=n*i.BASE_CODE_SIZE+(m-i.BASE_CODE_START)+1;if(j.length>l&&j.charAt(l)>='0'&&j.charAt(l)<='9')return [l+1,[o,parseInt(j.charAt(l),10)+1]];return [l,[o]];},parseTrackingNodeString:function(j){var k=[];while(j.length>0){var l=i.decodeTN(j);if(l.length==1)return [];k.push(l[1]);j=j.substring(l[0]);}return k;},getTrackingInfo:function(j,k){return '{"tn":"'+i.encodeTN(j,k)+'"}';},addDataAttribute:function(j,k,l){if(k===undefined)return;['data-ft','data-gt'].forEach(function(m){var n;if(j.getAttribute){n=j.getAttribute(m)||"{}";}else if(j.props){n=j.props[m]||"{}";}else return;var o=i.encodeTN(k,l);try{n=JSON.parse(n);if(n.tn&&n.tn===o)return;n.tn=o;if(j.setAttribute){j.setAttribute(m,JSON.stringify(n));}else if(j.props){j.props[m]=JSON.stringify(n);}else return;}catch(p){}});}};f.exports=i;},null);
__d('ChatTitleLink.react',['Link.react','MercuryThreadTitle.react','React','TrackingNodes','UserAgent','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=j.PropTypes,o=j.createClass({displayName:'ChatTitleLink',propTypes:{href:n.string,isNewThread:n.bool,thread:n.object,viewer:n.string},getDefaultProps:function(){return {href:null};},getTitle:function(){return this.refs.threadTitle.getTitle();},render:function(){if(!this.props.thread)return null;return (j.createElement(h,{'aria-level':'3',className:"titlebarText"+(l.isBrowser('Chrome')&&!l.isPlatform('Windows')?' '+"fixemoji":'')+(this.props.href===null?' '+"noLink":''),'data-ft':k.getTrackingInfo(k.types.TITLE),'data-hover':'tooltip',href:this.props.href},j.createElement(i,{ref:'threadTitle',isNewThread:this.props.isNewThread,thread:this.props.thread,useAndSeparator:true,useShortName:!this.props.thread.is_canonical,viewer:this.props.viewer})));}});f.exports=o;},null);
__d("DragDropFileUpload",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();g.isSupported=function(){return typeof FileList!=="undefined";};},null);
__d('DocumentDragDrop',['Arbiter','CSS','DOMQuery','DragDropFileUpload','Event','emptyFunction','getObjectValues','getOrCreateDOMID'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p={},q=0;function r(){q=0;n(p).forEach(function(w){i.removeClass(w.element,w.className);h.inform('dragleave',{element:w.element});});}var s=null;function t(){s&&clearTimeout(s);s=setTimeout(function(){r();},500);}var u=function(){if(!k.isSupported())return;l.listen(document,'dragenter',function(w){if(q===0)n(p).forEach(function(x){i.addClass(x.element,x.className);h.inform('dragenter',{element:x.element,event:w});});q++;t();});l.listen(document,'dragleave',function(w){q--;if(q===0)r();t();});l.listen(document,'drop',function(w){r();var x=w.getTarget();if(j.isNodeOfType(w.getTarget(),'input'))if(x.type==='file')return;w.prevent();});l.listen(document,'dragover',l.prevent);document.addEventListener('dragover',t,true);u=m;},v={init:function(){u();},registerStatusElement:function(w,x){u();p[o(w)]={element:w,className:x};if(q>0)i.addClass(w,x);},removeStatusElement:function(w){var x=o(w),y=p[x];if(y){i.removeClass(y.element,y.className);delete p[x];}}};f.exports=v;},null);
__d('DragDropTarget',['Arbiter','Event','SubscriptionsHandler','CSS','DataTransfer','DocumentDragDrop','DragDropFileUpload','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();function p(q){this._element=q;this._listeners=new j();this._statusElem=q;this._dragEnterCount=0;this._enabled=false;}Object.assign(p.prototype,{_onFilesDropCallback:o,_onURLDropCallback:o,_onPlainTextDropCallback:o,_onDropCallback:o,_fileFilterFn:o.thatReturnsArgument,setOnDocumentDragEnterCallback:function(q){this._onDocumentDragEnterCallback=q;return this;},setOnDocumentDragLeaveCallback:function(q){this._onDocumentDragLeaveCallback=q;return this;},setOnDragEnterCallback:function(q){this._onDragEnterCallback=q;return this;},setOnDragLeaveCallback:function(q){this._onDragLeaveCallback=q;return this;},setOnFilesDropCallback:function(q){this._onFilesDropCallback=q;return this;},setOnURLDropCallback:function(q){this._onURLDropCallback=q;return this;},setOnPlainTextDropCallback:function(q){this._onPlainTextDropCallback=q;return this;},setOnDropCallback:function(q){this._onDropCallback=q;return this;},enable:function(){if(!n.isSupported())return this;this._listeners.engage();m.registerStatusElement(this._statusElem,'fbWantsDragDrop');this._listeners.addSubscriptions(i.listen(this._element,'dragenter',this._onDragEnter.bind(this)),i.listen(this._element,'dragleave',this._onDragLeave.bind(this)),i.listen(this._element,'dragover',this._onDragOver.bind(this)),i.listen(this._element,'drop',function(q){this._dragEnterCount=0;k.removeClass(this._statusElem,'fbDropReady');k.removeClass(this._statusElem,'fbDropReadyPhoto');k.removeClass(this._statusElem,'fbDropReadyPhotos');k.removeClass(this._statusElem,'fbDropReadyLink');var r=new l(q.dataTransfer),s={},t=false,u=this._fileFilterFn(q.dataTransfer.files);if(u.length){this._onFilesDropCallback(u,q);s.files=u;t=true;}var v=r.getLink();if(v){this._onURLDropCallback(v,q);s.url=v;t=true;}var w=r.getText();if(w){this._onPlainTextDropCallback(w,q);s.plainText=w;t=true;}if(t)this._onDropCallback(s,q);q.kill();}.bind(this)));this._listeners.addSubscriptions(h.subscribe('dragenter',this._onDocumentDragEnter.bind(this)),h.subscribe('dragleave',this._onDocumentDragLeave.bind(this)));this._enabled=true;return this;},disable:function(){if(!this._enabled)return this;m.removeStatusElement(this._statusElem,'fbWantsDragDrop');k.removeClass(this._statusElem,'fbDropReady');k.removeClass(this._statusElem,'fbDropReadyPhoto');k.removeClass(this._statusElem,'fbDropReadyPhotos');k.removeClass(this._statusElem,'fbDropReadyLink');this._listeners.release();this._enabled=false;return this;},setFileFilter:function(q){this._fileFilterFn=q;return this;},setStatusElement:function(q){this._statusElem=q;return this;},_onDragEnter:function(q){if(this._dragEnterCount===0){var r=new l(q.dataTransfer);k.addClass(this._statusElem,'fbDropReady');if(r.isLink()||!r.isImage()){k.addClass(this._statusElem,'fbDropReadyLink');}else if(r.getCount()>1){k.addClass(this._statusElem,'fbDropReadyPhotos');}else k.addClass(this._statusElem,'fbDropReadyPhoto');this._onDragEnterCallback&&this._onDragEnterCallback();}this._dragEnterCount++;q.preventDefault();},_onDragLeave:function(q){this._dragEnterCount=Math.max(this._dragEnterCount-1,0);if(this._dragEnterCount===0){k.removeClass(this._statusElem,'fbDropReady');k.removeClass(this._statusElem,'fbDropReadyPhoto');k.removeClass(this._statusElem,'fbDropReadyPhotos');k.removeClass(this._statusElem,'fbDropReadyLink');this._onDragLeaveCallback&&this._onDragLeaveCallback();}},_onDragOver:function(q){if(!q.dataTransfer){i.kill(q);return;}try{var s=q.dataTransfer.effectAllowed;q.dataTransfer.dropEffect=s=='move'||s=='linkMove'?'move':'copy';}catch(r){}i.kill(q);},_onDocumentDragEnter:function(event,q){if(this._onDocumentDragEnterCallback&&q.element==this._element)this._onDocumentDragEnterCallback();},_onDocumentDragLeave:function(event,q){this._dragEnterCount=0;this._onDragLeave(event);if(this._onDocumentDragLeaveCallback&&q.element==this._element)this._onDocumentDragLeaveCallback();}});f.exports=p;},null);
__d('EmoticonUtils',['EmoticonsList','Parent'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j='emoticon_',k=h.symbols,l={getEmoteFromTarget:function(m){var n=i.byClass(m,'emoticon');if(!n)return null;var o=null;n.className.split(' ').forEach(function(p){if(p.startsWith(j))o=p.substring(j.length);});return k[o]||null;},insertEmoticon:function(m,n,o){var p=n.substring(0,o.start),q=n.substring(o.end);if(o.start>0&&!p.endsWith(' '))m=' '+m;if(!q.startsWith(' '))m+=' ';var r=p+m+q;o.start+=m.length;o.end=o.start;return {result:r,start:o.start,end:o.end};}};f.exports=l;},null);
__d('FBRTCCallabilityStore',['FBRTCDispatcher','RTCCallabilityStore'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=new i(h);},null);
__d("XPagesMercuryIndicatorController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/messaging\/mercury\/indicator\/",{});},null);
__d('PagesMercuryChatTabIndicatorHandler',['Animation','AsyncRequest','AvailableListConstants','DOM','FBID','MercuryIDs','XPagesMercuryIndicatorController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();o.tryCreateHandler=function(p,q,r){'use strict';if(!q)return null;var s=m.getUserIDFromThreadID(p);if(!s||l.isUser(s))return null;return new o(s,q,r);};function o(p,q,r){'use strict';this.$PagesMercuryChatTabIndicatorHandler2=false;this.$PagesMercuryChatTabIndicatorHandler3=q;this.$PagesMercuryChatTabIndicatorHandler4=false;this.$PagesMercuryChatTabIndicatorHandler5=false;this.$PagesMercuryChatTabIndicatorHandler6=r;this.$PagesMercuryChatTabIndicatorHandler7=false;this.$PagesMercuryChatTabIndicatorHandler8=p;}o.prototype.__getEnableTimeSwitch=function(){'use strict';return this.$PagesMercuryChatTabIndicatorHandler2;};o.prototype.__getIndicator=function(){'use strict';return this.$PagesMercuryChatTabIndicatorHandler3;};o.prototype.__getIsShown=function(){'use strict';return this.$PagesMercuryChatTabIndicatorHandler5;};o.prototype.__getPageOnlineStatus=function(){'use strict';return this.$PagesMercuryChatTabIndicatorHandler6;};o.prototype.__getShouldPreventFutureShown=function(){'use strict';return this.$PagesMercuryChatTabIndicatorHandler7;};o.prototype.__getTargetID=function(){'use strict';return this.$PagesMercuryChatTabIndicatorHandler8;};o.prototype.__getIsChecking=function(){'use strict';return this.$PagesMercuryChatTabIndicatorHandler4;};o.prototype.__getResponsivenessDescription=function(){'use strict';return this.$PagesMercuryChatTabIndicatorHandler1;};o.prototype.checkResponsiveness=function(){'use strict';if(this.$PagesMercuryChatTabIndicatorHandler4)return;var p=n.getURIBuilder().getURI();this.$PagesMercuryChatTabIndicatorHandler4=true;new i().setURI(p).setMethod('POST').setData({page_id:this.$PagesMercuryChatTabIndicatorHandler8}).setHandler(function(q){this.$PagesMercuryChatTabIndicatorHandler4=false;var r=q.payload;if(r.responsiveness)this.$PagesMercuryChatTabIndicatorHandler9(r.responsiveness,r.enableTimeSwitch);}.bind(this)).send();};o.prototype.hideIndicator=function(){'use strict';this.$PagesMercuryChatTabIndicatorHandler10(false);};o.prototype.hideIndicatorAndPreventFutureShow=function(){'use strict';this.$PagesMercuryChatTabIndicatorHandler10(true);};o.prototype.$PagesMercuryChatTabIndicatorHandler10=function(p){'use strict';this.$PagesMercuryChatTabIndicatorHandler7=this.$PagesMercuryChatTabIndicatorHandler7||p;if(this.$PagesMercuryChatTabIndicatorHandler3&&this.$PagesMercuryChatTabIndicatorHandler5){this.$PagesMercuryChatTabIndicatorHandler5=false;new h(this.$PagesMercuryChatTabIndicatorHandler3).to('height',0).duration(100).hide().go();}};o.prototype.showIndicator=function(){'use strict';if(!this.$PagesMercuryChatTabIndicatorHandler3||this.$PagesMercuryChatTabIndicatorHandler5||this.$PagesMercuryChatTabIndicatorHandler6!==j.OFFLINE||!this.$PagesMercuryChatTabIndicatorHandler1||this.$PagesMercuryChatTabIndicatorHandler7)return;k.setContent(this.$PagesMercuryChatTabIndicatorHandler3,this.$PagesMercuryChatTabIndicatorHandler1);this.$PagesMercuryChatTabIndicatorHandler5=true;new h(this.$PagesMercuryChatTabIndicatorHandler3).show().to('height',16).duration(100).go();};o.prototype.notifyPageOnlineStatusChanged=function(p){'use strict';if(this.$PagesMercuryChatTabIndicatorHandler6===p)return;this.$PagesMercuryChatTabIndicatorHandler6=p;if(!this.$PagesMercuryChatTabIndicatorHandler2)return;switch(p){case j.ACTIVE:this.hideIndicator();break;default:this.showIndicator();break;}};o.prototype.$PagesMercuryChatTabIndicatorHandler9=function(p,q){'use strict';this.$PagesMercuryChatTabIndicatorHandler1=p;this.$PagesMercuryChatTabIndicatorHandler2=q;this.showIndicator();};f.exports=o;},null);
__d("XPhotosWaterfallBatchLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/photos\/logging\/waterfall\/batch\/",{});},null);
__d('PhotosUploadWaterfall',['AsyncRequest','AsyncSignal','Banzai','PhotosUploadWaterfallXConfig','XPhotosWaterfallBatchLoggingController','emptyFunction','randomInt','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=[],q={APP_SIMPLE:'simple',APP_ARCHIVE:'archive',APP_COMPOSER:'composer',APP_MESSENGER:'messenger',APP_HTML5:'html5',APP_CHAT:'chat',INSTALL_CANCEL:1,INSTALL_INSTALL:2,INSTALL_UPDATE:3,INSTALL_REINSTALL:4,INSTALL_PERMA_CANCEL:5,INSTALL_SILENT_SKIP:6,INSTALL_DOWNLOAD:7,CERROR_RESIZING_FAILED:6,CERROR_MARKER_EXTRACTION_FAILED:9,BEGIN:1,UPLOAD_START:4,ALL_UPLOADS_DONE:6,CLIENT_ERROR:7,RECOVERABLE_CLIENT_ERROR:12,IMAGES_SELECTED:9,UPGRADE_REQUIRED:11,VERSION:15,SELECT_START:18,SELECT_CANCELED:19,CANCEL:22,CANCEL_DURING_UPLOAD:83,ONE_RESIZING_START:2,ONE_UPLOAD_START:10,ONE_UPLOAD_DONE:29,ONE_RESIZING_DONE:34,PROGRESS_BAR_STOPPED:44,MISSED_BEAT:45,HEART_ATTACK:46,PUBLISH_SENT:99,PUBLISH_START:100,PUBLISH_SUCCESS:101,PUBLISH_FAILURE:102,CLUSTERING_START:103,CLUSTERING_SUCCESS:104,CLUSTERING_FAILURE:105,POST_BUTTON_CLICKED:110,POST_BUTTON_ERROR:111,PHOTO_DELETED:114,PUBLISH_CLIENT_SUCCESS:115,PHOTO_ROTATED:117,SAVE_DRAFT_BUTTON_CLICKED:123,RECOVERY_START_ON_CLIENT:124,CHANGE_PHOTO_QUALITY_SETTING:126,TAG_ADDED:127,TAG_REMOVED:128,TAB_BUTTON_CLICKED:129,EDITABLE_PHOTO_FETCH_START:106,EDITABLE_PHOTO_FETCH_SUCCESS:107,EDITABLE_PHOTO_FETCH_FAILURE:108,EDITABLE_PHOTO_FETCH_DELAY:116,CANCEL_INDIVIDUAL_UPLOAD:109,MISSING_OVERLAY_NODE:118,PUBLISH_RETRY_FAILURE:119,MISSING_UPLOAD_STATE:120,SESSION_POSTED:72,POST_PUBLISHED:80,ONE_UPLOAD_CANCELED:81,ONE_UPLOAD_CANCELED_DURING_UPLOAD:82,RESIZER_AVAILABLE:20,OVERLAY_FIRST:61,ASYNC_AVAILABLE:63,FALLBACK_TO_HTML5:130,RETRY_UPLOAD:17,TAGGED_ALL_FACES:14,VAULT_IMAGES_SELECTED:62,VAULT_CREATE_POST_CANCEL:65,VAULT_SEND_IN_MESSAGE_CLICKED:66,VAULT_DELETE_CANCEL:68,VAULT_ADD_TO_ALBUM_CANCEL:74,VAULT_SHARE_IN_AN_ALBUM_CLICKED:76,VAULT_SHARE_OWN_TIMELINE_CLICKED:77,VAULT_SHARE_FRIENDS_TIMELINE_CLICKED:78,VAULT_SHARE_IN_A_GROUP_CLICKED:79,VAULT_SYNCED_PAGED_LINK_CLICKED:84,VAULTBOX:'vaultbox',GRID:'grid',SPOTLIGHT_VAULT_VIEWER:'spotlight_vault_viewer',REF_VAULT_NOTIFICATION:'vault_notification',_checkRequiredFields:function(s){},sendBanzai:function(s,t){this._checkRequiredFields(s);var u={};s.scuba_ints=s.scuba_ints||{};s.scuba_ints.client_time=Math.round(Date.now()/1000);if(k.retryBanzai){u.retry=true;s.scuba_ints.nonce=n(4294967296);}j.post(k.deprecatedBanzaiRoute,s,u);if(t)setTimeout(t,0);},sendSignal:function(s,t){this._checkRequiredFields(s);if(k.useBanzai){this.sendBanzai(s,t);}else if(k.reduceLoggingRequests){this.queueLog(s,t);}else{var u=new i('/ajax/photos/waterfall.php',{data:JSON.stringify(s)}).setHandler(t);if(k.timeout)u.setTimeout(10*1000);u.send();}},queueLog:function(s,t){p.push(s);if(!!t){this.flushQueue(t);}else r();},flushQueue:function(s){var t=JSON.stringify(p);p=[];var u=l.getURIBuilder().getURI();new h().setURI(u).setData({logs:t}).setFinallyHandler(s||m).setTimeoutHandler(10*1000,s||m).send();}},r=o(q.flushQueue,k.batchInterval*1000);f.exports=q;},null);
__d('SelectionPosition',['Event','InputSelection','SubscriptionsHandler'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l){'use strict';this.$SelectionPosition1=l;this.$SelectionPosition2={start:0,end:0};this.$SelectionPosition3=new j();this.$SelectionPosition4=false;this.updatePos();this.enable();}k.prototype.getPos=function(){'use strict';return babelHelpers['extends']({},this.$SelectionPosition2);};k.prototype.setPos=function(l,m){'use strict';this.$SelectionPosition2={start:l,end:m};this.restore();};k.prototype.updatePos=function(){'use strict';this.$SelectionPosition2=i.get(this.$SelectionPosition1);};k.prototype.restore=function(){'use strict';i.set(this.$SelectionPosition1,this.$SelectionPosition2.start,this.$SelectionPosition2.end);};k.prototype.enable=function(){'use strict';if(!this.$SelectionPosition4){this.$SelectionPosition3.addSubscriptions(h.listen(this.$SelectionPosition1,'keyup',this.updatePos.bind(this)),h.listen(this.$SelectionPosition1,'click',this.updatePos.bind(this)));this.$SelectionPosition4=true;}};k.prototype.disable=function(){'use strict';if(this.$SelectionPosition4){this.$SelectionPosition3.release();this.$SelectionPosition4=false;}};f.exports=k;},null);
__d('LayerDestroyOnHide',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._layer=i;}h.prototype.enable=function(){'use strict';var i=this._layer.destroy.bind(this._layer);this._subscription=this._layer.subscribe('hide',function(){setTimeout(i,0);});};h.prototype.disable=function(){'use strict';if(this._subscription){this._subscription.unsubscribe();this._subscription=null;}};Object.assign(h.prototype,{_subscription:null});f.exports=h;},null);
__d('XUIDialogOkayButton.react',['React','XUIDialogButton.react','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=h.PropTypes,n=h.createClass({displayName:'XUIDialogOkayButton',propTypes:{action:m.oneOf(['confirm','cancel','button']).isRequired},render:function(){return (h.createElement(i,babelHelpers['extends']({},this.props,{className:l(this.props.className,"_2z1w"),action:this.props.action,label:k._("OK")})));}});f.exports=n;},null);
__d('SimpleXUIDialog',['DialogX','LayerDestroyOnHide','LayerFadeOnHide','LayerFadeOnShow','LayerHideOnBlur','LayerHideOnEscape','React','XUIDialogCancelButton.react','XUIDialogBody.react','XUIDialogFooter.react','XUIDialogOkayButton.react','XUIDialogTitle.react','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';if(c.__markCompiled)c.__markCompiled();var u=445,v={show:function(w,x,y,z){var aa=n.createElement(r,{action:'cancel',use:'confirm'});return this.showEx(w,x,aa,y,z);},showConfirm:function(w,x,y,z){var aa=false,ba=n.createElement('div',null,n.createElement(o,{onClick:function(){aa=false;}}),n.createElement(r,{action:'cancel',className:z&&z.autofocusConfirm?"autofocus":'',use:'confirm',onClick:function(){aa=true;}}));function ca(){y(aa);}return this.showEx(w,x,ba,ca,z);},showEx:function(w,x,y,z,aa){aa=aa||{};var ba=[i,k,j,m];if(aa.hideOnBlur!==false)ba.push(l);var ca={width:aa.width||u,xui:true,addedBehaviors:ba};if(x)x=n.createElement(s,{showCloseButton:true},x);if(y)y=n.createElement(q,{'data-testid':'simple_xui_dialog_footer'},y);var da=n.createElement('div',null,x,n.createElement(p,null,w),y),ea=new h(ca,da);if(z)ea.subscribe('hide',z);ea.show();return ea;}};f.exports=v;},null);
__d('TextInputControl',['DOMControl','Event','Input','debounce'],function a(b,c,d,e,f,g,h,i,j,k){var l,m;if(c.__markCompiled)c.__markCompiled();l=babelHelpers.inherits(n,h);m=l&&l.prototype;function n(o){'use strict';m.constructor.call(this,o);var p=this.getRoot(),q=k(this.update.bind(this),0);i.listen(p,{input:q,keydown:q,paste:q});}n.prototype.setMaxLength=function(o){'use strict';j.setMaxLength(this.getRoot(),o);return this;};n.prototype.getValue=function(){'use strict';return j.getValue(this.getRoot());};n.prototype.isEmpty=function(){'use strict';return j.isEmpty(this.getRoot());};n.prototype.setValue=function(o){'use strict';j.setValue(this.getRoot(),o);this.update();return this;};n.prototype.clear=function(){'use strict';return this.setValue('');};n.prototype.setPlaceholderText=function(o){'use strict';j.setPlaceholder(this.getRoot(),o);return this;};f.exports=n;},null);
__d('transferTextStyles',['Style'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={fontFamily:null,fontSize:null,fontStyle:null,fontWeight:null,lineHeight:null,wordWrap:null};function j(k,l){for(var m in i)if(i.hasOwnProperty(m))i[m]=h.get(k,m);h.apply(l,i);}f.exports=j;},null);
__d('TextMetrics',['DOM','Style','UserAgent','transferTextStyles'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(n){var o=n.clientWidth,p=i.get(n,'-moz-box-sizing')=='border-box';if(p&&j.isBrowser('Firefox < 29'))return o;var q=i.getFloat(n,'paddingLeft')+i.getFloat(n,'paddingRight');return o-q;}function m(n,o){'use strict';this.$TextMetrics1=n;this.$TextMetrics2=!!o;var p='textarea',q='textMetrics';if(this.$TextMetrics2){p='div';q+=' textMetricsInline';}this.$TextMetrics3=h.create(p,{className:q});k(n,this.$TextMetrics3);document.body.appendChild(this.$TextMetrics3);}m.prototype.measure=function(n){'use strict';var o=this.$TextMetrics1,p=this.$TextMetrics3;n=(n||o.value)+'...';if(!this.$TextMetrics2){var q=l(o);i.set(p,'width',Math.max(q,0)+'px');}if(o.nodeName==='TEXTAREA'){p.value=n;}else h.setContent(p,n);return {width:p.scrollWidth,height:p.scrollHeight};};m.prototype.destroy=function(){'use strict';h.remove(this.$TextMetrics3);};f.exports=m;},null);
__d('TextAreaControl',['Arbiter','ArbiterMixin','CSS','DOMControl','Event','Style','TextInputControl','TextMetrics','classWithMixins','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r,s;if(c.__markCompiled)c.__markCompiled();function t(v,w){return m.getFloat(v,w)||0;}r=babelHelpers.inherits(u,p(n,q(i)));s=r&&r.prototype;function u(v){'use strict';s.constructor.call(this,v);this.autogrow=j.hasClass(v,'uiTextareaAutogrow');this.autogrowWithPlaceholder=j.hasClass(v,'uiTextareaAutogrowWithPlaceholder');this.width=null;l.listen(v,'focus',this._handleFocus.bind(this));}u.prototype.setAutogrow=function(v){'use strict';this.autogrow=v;return this;};u.prototype.onupdate=function(){'use strict';s.onupdate.call(this);this.updateHeight();};u.prototype.updateHeight=function(){'use strict';if(this.autogrow){var v=this.getRoot();if(!this.metrics)this.metrics=new o(v);if(typeof this.initialHeight==='undefined'){this.isBorderBox=m.get(v,'box-sizing')==='border-box'||m.get(v,'-moz-box-sizing')==='border-box'||m.get(v,'-webkit-box-sizing')==='border-box';this.borderBoxOffset=t(v,'padding-top')+t(v,'padding-bottom')+t(v,'border-top-width')+t(v,'border-bottom-width');this.initialHeight=v.offsetHeight-this.borderBoxOffset;}var w=null;if((!v.value||v.value.length===0)&&this.autogrowWithPlaceholder){w=this.metrics.measure(v.placeholder);}else w=this.metrics.measure();var x=Math.max(this.initialHeight,w.height);if(this.isBorderBox)x+=this.borderBoxOffset;if(this.maxHeight&&x>this.maxHeight){x=this.maxHeight;h.inform('maxHeightExceeded',{textArea:v});}if(x!==this.height){this.height=x;m.set(v,'height',x+'px');h.inform('reflow');this.inform('resize');}}else if(this.metrics){this.metrics.destroy();this.metrics=null;}};u.prototype.resetHeight=function(){'use strict';this.height=-1;this.update();};u.prototype.setMaxHeight=function(v){'use strict';this.maxHeight=v;};u.prototype.setAutogrowWithPlaceholder=function(v){'use strict';this.autogrowWithPlacedholder=v;};u.prototype._handleFocus=function(){'use strict';this.width=null;};u.getInstance=function(v){'use strict';return k.getInstance(v)||new u(v);};f.exports=u;},null);
__d("str2rstr",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){var j="",k,l;for(var m=0;m<i.length;m++){k=i.charCodeAt(m);l=m+1<i.length?i.charCodeAt(m+1):0;if(55296<=k&&k<=56319&&56320<=l&&l<=57343){k=65536+((k&1023)<<10)+(l&1023);m++;}if(k<=127){j+=String.fromCharCode(k);}else if(k<=2047){j+=String.fromCharCode(192|k>>>6&31,128|k&63);}else if(k<=65535){j+=String.fromCharCode(224|k>>>12&15,128|k>>>6&63,128|k&63);}else if(k<=2097151)j+=String.fromCharCode(240|k>>>18&7,128|k>>>12&63,128|k>>>6&63,128|k&63);}return j;}f.exports=h;},null);
__d('md5',['str2rstr'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(v,w){var x=v[0],y=v[1],z=v[2],aa=v[3];x=k(x,y,z,aa,w[0],7,-680876936);aa=k(aa,x,y,z,w[1],12,-389564586);z=k(z,aa,x,y,w[2],17,606105819);y=k(y,z,aa,x,w[3],22,-1044525330);x=k(x,y,z,aa,w[4],7,-176418897);aa=k(aa,x,y,z,w[5],12,1200080426);z=k(z,aa,x,y,w[6],17,-1473231341);y=k(y,z,aa,x,w[7],22,-45705983);x=k(x,y,z,aa,w[8],7,1770035416);aa=k(aa,x,y,z,w[9],12,-1958414417);z=k(z,aa,x,y,w[10],17,-42063);y=k(y,z,aa,x,w[11],22,-1990404162);x=k(x,y,z,aa,w[12],7,1804603682);aa=k(aa,x,y,z,w[13],12,-40341101);z=k(z,aa,x,y,w[14],17,-1502002290);y=k(y,z,aa,x,w[15],22,1236535329);x=l(x,y,z,aa,w[1],5,-165796510);aa=l(aa,x,y,z,w[6],9,-1069501632);z=l(z,aa,x,y,w[11],14,643717713);y=l(y,z,aa,x,w[0],20,-373897302);x=l(x,y,z,aa,w[5],5,-701558691);aa=l(aa,x,y,z,w[10],9,38016083);z=l(z,aa,x,y,w[15],14,-660478335);y=l(y,z,aa,x,w[4],20,-405537848);x=l(x,y,z,aa,w[9],5,568446438);aa=l(aa,x,y,z,w[14],9,-1019803690);z=l(z,aa,x,y,w[3],14,-187363961);y=l(y,z,aa,x,w[8],20,1163531501);x=l(x,y,z,aa,w[13],5,-1444681467);aa=l(aa,x,y,z,w[2],9,-51403784);z=l(z,aa,x,y,w[7],14,1735328473);y=l(y,z,aa,x,w[12],20,-1926607734);x=m(x,y,z,aa,w[5],4,-378558);aa=m(aa,x,y,z,w[8],11,-2022574463);z=m(z,aa,x,y,w[11],16,1839030562);y=m(y,z,aa,x,w[14],23,-35309556);x=m(x,y,z,aa,w[1],4,-1530992060);aa=m(aa,x,y,z,w[4],11,1272893353);z=m(z,aa,x,y,w[7],16,-155497632);y=m(y,z,aa,x,w[10],23,-1094730640);x=m(x,y,z,aa,w[13],4,681279174);aa=m(aa,x,y,z,w[0],11,-358537222);z=m(z,aa,x,y,w[3],16,-722521979);y=m(y,z,aa,x,w[6],23,76029189);x=m(x,y,z,aa,w[9],4,-640364487);aa=m(aa,x,y,z,w[12],11,-421815835);z=m(z,aa,x,y,w[15],16,530742520);y=m(y,z,aa,x,w[2],23,-995338651);x=n(x,y,z,aa,w[0],6,-198630844);aa=n(aa,x,y,z,w[7],10,1126891415);z=n(z,aa,x,y,w[14],15,-1416354905);y=n(y,z,aa,x,w[5],21,-57434055);x=n(x,y,z,aa,w[12],6,1700485571);aa=n(aa,x,y,z,w[3],10,-1894986606);z=n(z,aa,x,y,w[10],15,-1051523);y=n(y,z,aa,x,w[1],21,-2054922799);x=n(x,y,z,aa,w[8],6,1873313359);aa=n(aa,x,y,z,w[15],10,-30611744);z=n(z,aa,x,y,w[6],15,-1560198380);y=n(y,z,aa,x,w[13],21,1309151649);x=n(x,y,z,aa,w[4],6,-145523070);aa=n(aa,x,y,z,w[11],10,-1120210379);z=n(z,aa,x,y,w[2],15,718787259);y=n(y,z,aa,x,w[9],21,-343485551);v[0]=t(x,v[0]);v[1]=t(y,v[1]);v[2]=t(z,v[2]);v[3]=t(aa,v[3]);}function j(v,w,x,y,z,aa){w=t(t(w,v),t(y,aa));return t(w<<z|w>>>32-z,x);}function k(v,w,x,y,z,aa,ba){return j(w&x|~w&y,v,w,z,aa,ba);}function l(v,w,x,y,z,aa,ba){return j(w&y|x&~y,v,w,z,aa,ba);}function m(v,w,x,y,z,aa,ba){return j(w^x^y,v,w,z,aa,ba);}function n(v,w,x,y,z,aa,ba){return j(x^(w|~y),v,w,z,aa,ba);}function o(v){var w=v.length,x=[1732584193,-271733879,-1732584194,271733878],y;for(y=64;y<=v.length;y+=64)i(x,p(v.substring(y-64,y)));v=v.substring(y-64);var z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(y=0;y<v.length;y++)z[y>>2]|=v.charCodeAt(y)<<((y&3)<<3);z[y>>2]|=128<<((y&3)<<3);if(y>55){i(x,z);for(y=0;y<16;y++)z[y]=0;}z[14]=w*8;i(x,z);return x;}function p(v){var w=[],x=0;while(x<64)w[x>>2]=v.charCodeAt(x++)|v.charCodeAt(x++)<<8|v.charCodeAt(x++)<<16|v.charCodeAt(x++)<<24;return w;}var q='0123456789abcdef'.split('');function r(v){var w='',x=0;for(;x<4;x++)w+=q[v>>(x<<3)+4&15]+q[v>>(x<<3)&15];return w;}function s(v){for(var w=0;w<v.length;w++)v[w]=r(v[w]);return v.join('');}var t=function(v,w){return v+w&4294967295;};function u(v){if(null===v||undefined===v){return null;}else{for(var w=0;w<v.length;w++)if(v[w]>"\u007F"){v=h(v);break;}return s(o(v));}}if(u('hello')!='5d41402abc4b2a76b9719d911017c592')t=function(v,w){var x=(v&65535)+(w&65535),y=(v>>16)+(w>>16)+(x>>16);return y<<16|x&65535;};f.exports=u;},null);
__d('WaterfallIDGenerator',['CurrentUser','md5'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(){var m=2147483647;return Math.random()*m;}function k(){return Math.floor(Date.now()/1000);}var l={generate:function(){return i([h.getID(),k(),j()].join(':'));}};f.exports=l;},null);
__d('WebMessengerThreadPermalinks',['MercuryIDs','MessagingTag','URI','WebMessengerPermalinkConstants','WWWBase','requireWeak'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n={getThreadURI:function(r,s,t){if(h.isCanonical(r)){o(r,s,t);}else p(r,s,t);}};function o(r,s,t){var u=new j(l.uri),v=h.tokenize(r).value;u.setPath(q(t)+'/'+v);s&&s(u.toString());}function p(r,s,t){m('MercuryThreadIDMap',function(u){var v=u.get();v.getServerIDFromClientID(r,function(w){var x=new j(l.uri);x.setPath(k.getURIPathForThreadID(w,q(t)));s&&s(x.toString());});});}function q(r){var s=k.BASE_PATH;if(r&&r!=i.INBOX)s+='/'+r;return s;}f.exports=n;},null);
__d('ChatTabView',['Promise','AsyncRequest','AsyncSignal','AvailableListConstants','BanzaiODS','BootloadedComponent.react','Bootloader','ChatBehavior','ChatConfig','ChatNubLogger','ChatOpenTab','ChatPhotoUploader.react','ChatTabActions','ChatTabMessagesView','ChatTabSheetController','ChatTabViewEvents','ChatTabViewInstances','ChatTitleLink.react','ChatVisibility','CSS','CurrentUser','Dock','DOM','DOMQuery','DragDropTarget','EmojiLikeUtils','EmoticonsList','EmoticonUtils','Event','FBID','FBRTCCallabilityStore','JSResource','Keys','LogHistory','MercuryCanonicalGroupThreadManager','MercuryConfig','MercuryIDs','MercuryParticipants','MercuryShareAttachmentRenderLocations','MercurySourceType','MercuryThreadInfo','MercuryThreadTitle.react','MercuryTypingAnimation.react','MercuryViewer','MessagingTag','NubController','P2PGKValues','P2PSendMoneyContainerBootloader.react','PagesMercuryChatTabIndicatorHandler','Parent','PhotosUploadWaterfall','PresenceStatus','React','ReactComponentRenderer','ReactDOM','Run','Scroll','SelectionPosition','ShortProfiles','SimpleXUIDialog','SiteData','StickerActions','StickerConstants','StickerState','Style','SubscriptionsHandler','SyntheticMouseEvent','ChatTabTemplates','TextAreaControl','TooltipData','TypingDetectorController','UserAgent_DEPRECATED','WaterfallIDGenerator','WebMessengerThreadPermalinks','WorkFileUploadsGating','WorkModeConfig','XStickerReplyNUXController','createCancelableFunction','csx','cx','emptyFunction','fbt','getActiveElement','isEmpty','requireWeak','setIntervalAcrossTransitions','ChatReactInput','MercuryBlockedParticipants','MercuryTypingReceiver','MercuryMessageObject','MercuryMessages','MercuryServerRequests','MercuryThreadActions','MercuryThreadIDMap','MercuryThreadInformer','MercuryThreads','MercuryMessageActions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,ac,bc,cc,dc,ec,fc,gc,hc,ic,jc,kc,lc,mc,nc,oc){'use strict';if(c.__markCompiled)c.__markCompiled();var pc=c('ChatReactInput').module,qc=c('MercuryBlockedParticipants').get(),rc=c('MercuryTypingReceiver').get(),sc=c('MercuryMessageObject').get(),tc=c('MercuryMessages').get(),uc=c('MercuryServerRequests').get(),vc=c('MercuryThreadActions').get(),wc=c('MercuryThreadIDMap').get(),xc=c('MercuryThreadInformer').get(),yc=c('MercuryThreads').get(),zc=c('MercuryMessageActions').get(),ad=/^\s*$/,bd=x,cd,dd='right',ed=960,fd=10,gd=p.get('chat_react_composer'),hd=oa.getInstance('chat_tab_view');nc('AvailableList',function(de){de.subscribe(k.ON_AVAILABILITY_CHANGED,zd);});function id(de,ee){var fe=da.create('div');ee=ee&&ee.filter(function(ie){return ie!=ya.getID();});if(mc(ee))return yb.remove(de);var ge=ee.length,he=ge-fd;if(he>1)ee=ee.slice(0,fd);sa.getMulti(ee,function(ie){for(var je in ie){var ke=ie[je],le=wb[':fb:mercury:chat:multichat-tooltip-item'].build();da.setContent(le.getNode('name'),ke.name);var me=ra.getUserIDFromParticipantID(je),ne=me&&gb.get(me)==k.ACTIVE;aa.conditionShow(le.getNode('icon'),ne);aa.conditionClass(le.getNode('name'),'tooltipItemWithIcon',ne);da.appendContent(fe,le.getRoot());}if(he>1){var oe=kc._("and {number of hidden chat participants} more.",[kc.param('number of hidden chat participants',he)]);da.appendContent(fe,da.create('div',{},oe));}yb.set(de,fe,'above');});}var jd={},kd=null,ld=false;function md(de,ee,fe){if(fe){jd[de]=ee;if(!kd)kd=oc(nd,600);}else{aa.removeClass(ee,'highlightTitle');delete jd[de];}}function nd(){for(var de in jd){var ee=jd[de];if(ee.parentNode){aa.conditionClass(ee,'highlightTitle',ld);}else delete jd[de];}ld=!ld;if(!Object.keys(jd).length){clearInterval(kd);kd=null;}}function od(de){var ee=ra.tokenize(de);switch(ee.type){case 'user':return wb[':fb:mercury:chat:user-tab'].build();}return wb[':fb:mercury:chat:multichat-tab'].build();}function pd(de){var ee=de._getInputValue(),fe=de._filesUploader,ge=fe?fe.getAttachments():[];if(ud(de))rd(de,ee,ge,function(he){he=ce(he,fe);zc.send(he,function(ie){var je=yc.getThreadMetaNow(ie);if(je&&je.folder===za.PENDING)vc.movePendingToInbox(ie);});fe&&fe.removeAttachments();if(de._sharePreview)de._sharePreview.setProps({share:null,uri:null});if(gd){de._composer.onSend();}else de._chatInput.component.resetState();de._typingDetector&&de._typingDetector.resetState();if(de._messagesView){de._messagesView.scrollToBottom();de._messagesView.setShouldScrollToBottom(true);de.tryMarkAsRead();}});}function qd(de,ee){if(ee===0)return;wd(de,fb.POST_PUBLISHED,{count:ee});de._waterfallID=bc.generate();}function rd(de,ee,fe,ge){yc.getThreadMeta(de._threadID,function(he){if(he&&he.is_canonical&&!va.canReply(he)){de._showMessageBlockedDialog(he);return;}var ie=ua.CHAT_WEB,je=sc.constructUserGeneratedMessageObject(ee,ie,de._threadID);if(fe.length>0){je.has_attachment=true;je.raw_attachments=fe;}if(de._sharePreview){var ke=de._sharePreview.component.getShareData();if(ke){je.has_attachment=true;je.shareable_attachment=ke;}}if(yc.isNewEmptyLocalThread(de._threadID)){var le=de._sheetController.getAddFriendsParticipants();de._sheetController.closeAddFriendsSheet();if(le===null||le.length===0)return;le=le.filter(function(pe){return pe!=ya.getID();});if(le.length===0){je.thread_id=ra.getThreadIDFromUserID(ba.getID());}else if(le.length===1){je.thread_id=ra.getThreadIDFromParticipantID(le[0]);}else{var me=de.getMessagesView().getThreadID();if(me!=de._threadID)je.thread_id=me;vc.addParticipants(de._threadID,le);}}if(yc.isEmptyLocalThread(de._threadID)){je.offline_threading_id=ra.tokenize(de._threadID).value;var ne=yc.getThreadMetaNow(he.thread_id);je.specific_to_list=Array.from(ne.participants);}if(typeof je!='undefined')je.signatureID=de._signatureID;je.ui_push_phase=pb.push_phase;ge(je);if(de._threadID!==je.thread_id&&!de.isUploading()){var oe=de._getInputValue();t.closeTab(de._threadID);r.openThread(je.thread_id,'ChatTabView',null,ee?jc:function(pe){return pe.appendTextToInput(oe);});}});}function sd(de){de._blocked=true;de._sheetController.openUploadWarningTabSheet();}function td(de){return de.isUploading();}function ud(de){var ee=de._getInputValue();if(!ad.test(ee))return true;var fe=de._filesUploader;if(fe&&(fe.getAttachments().length>0||fe.getImageFiles().length>0||fe.getAnimatedImageFiles().length>0||fe.getVideoFiles().length>0||fe.getAudioFiles().length>0||fe.getFiles().length>0))return true;if(de._sharePreview&&de._sharePreview.component.getShareData())return true;return false;}function vd(de){de._nubController.flyoutContentChanged();var ee=de._getNode('attachmentShelf');lb.setTop(ee,ee.scrollHeight);}function wd(de,ee,fe){fb.sendSignal(babelHelpers['extends']({qn:de._waterfallID,step:ee,uploader:fb.APP_CHAT},fe||{}));}function xd(de,ee,fe,ge,he){if(ee)uc.ensureThreadIsFetched(ee);this._threadID=de;this._signatureID=fe;this._eventListeners=[];this._onlineStatus=k.OFFLINE;this._tabTemplate=od(de);this._tabElem=this._tabTemplate.getRoot();if(he&&he.getTabElem()){this.insertBefore(he);}else this.appendTo(ge);this._stickersFlyoutShown=false;this._messagesView=null;this._titlebar=this._getNode('nubFlyoutTitlebar');if(!gd){this._iconsContainerNode=this._getNode('iconsContainer');this._inputContainerNode=this._getNode('inputContainer');this._contentSearchNode=this._getNode('contentSearchContainer');this._fileUploaderNode=this._getNode('fileUploaderContainer');}this._pagesMessageIndicator=this._getNode('pagesMessageIndicator');this._waterfallID=bc.generate();this._subscriptionsHandler=new ub();this._canonicalGroupSearchSubscriptionID=null;this._initializeSheetController();var ie=[jc,this._initializeHeader.bind(this),this._initializeUIListeners.bind(this),this._initializeAutoSendPhotoUploader.bind(this),this._initializeAutoSendFileUploader.bind(this),this._initializeTitleHREF.bind(this),this._initializeP2P.bind(this),this._initializeInput.bind(this),this._initializeStickers.bind(this),this._initializeContentSearch.bind(this),function(){this.updateAvailableStatus();this.updateTab();this._setCloseTooltip(false);}.bind(this),this._initializeUnloadListeners.bind(this),this._initializeDragDropTarget.bind(this),this._initializePageMessagingIndicator.bind(this),this._initializeP2PChatThreadBannerContainer.bind(this),this._initializeP2PRainMoneyContainer.bind(this)];for(var je=ie,ke=Array.isArray(je),le=0,je=ke?je:je[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var me;if(ke){if(le>=je.length)break;me=je[le++];}else{le=je.next();if(le.done)break;me=le.value;}var ne=me;ne();}bd.set(de,this);this._logOpenTab();}function yd(de){if(de._photoUploader&&de._photoUploader.isUploading())wd(de,fb.CANCEL_DURING_UPLOAD);}function zd(){for(var de=bd.values(),ee=Array.isArray(de),fe=0,de=ee?de:de[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ge;if(ee){if(fe>=de.length)break;ge=de[fe++];}else{fe=de.next();if(fe.done)break;ge=fe.value;}var he=ge;he.updateAvailableStatus();he.updateTitlebarTooltip();}}function ae(){for(var de=bd.values(),ee=Array.isArray(de),fe=0,de=ee?de:de[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ge;if(ee){if(fe>=de.length)break;ge=de[fe++];}else{fe=de.next();if(fe.done)break;ge=fe.value;}var he=ge;he.updateCallLink();}}la.addListener(ae);o.subscribe(o.ON_CHANGED,function(){for(var de=bd.keys(),ee=Array.isArray(de),fe=0,de=ee?de:de[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ge;if(ee){if(fe>=de.length)break;ge=de[fe++];}else{fe=de.next();if(fe.done)break;ge=fe.value;}var he=ge;yc.getThreadMeta(he,function(ie){bd.get(he)._updateUnreadCount(ie);});}});rc.addRetroactiveListener('state-changed',function(de){for(var ee in de){var fe=de[ee]&&de[ee].length,ge=bd.get(ee);ge&&ge.showTypingIndicator(fe);}});xc.subscribe('threads-updated',function(de,ee){for(var fe=bd.keys(),ge=Array.isArray(fe),he=0,fe=ge?fe:fe[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ie;if(ge){if(he>=fe.length)break;ie=fe[he++];}else{he=fe.next();if(he.done)break;ie=he.value;}var je=ie,ke=bd.get(je);ee[je]&&ke.updateTab();if(ke._newThreadIDFromPhotoUpload&&!ke.isUploading()&&ee[ke._newThreadIDFromPhotoUpload]){t.closeTab(ke._threadID);r.openThread(ke._newThreadIDFromPhotoUpload,'ChatTabView');ke._newThreadIDFromPhotoUpload=null;}}});xc.subscribe('threads-deleted',function(de,ee){for(var fe=bd.keys(),ge=Array.isArray(fe),he=0,fe=ge?fe:fe[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ie;if(ge){if(he>=fe.length)break;ie=fe[he++];}else{he=fe.next();if(he.done)break;ie=he.value;}var je=ie;ee[je]&&t.closeTab(je,'thread_deleted');if(yc.isNewEmptyLocalThread(je)){var ke=bd.get(je);ke.ensureValidCanonicalGroup(ee);}}});Object.assign(xd.prototype,{getThreadID:function(){return this._threadID;},getTabElem:function(){return this._tabElem;},showAddFriend:function(){setTimeout(function(){this._sheetController.openAddFriendsSheet();}.bind(this),0);},showNameConversation:function(de){setTimeout(function(){this._sheetController.openNameConversationSheet(de);}.bind(this),0);},hideAutomaticNameConversation:function(){setTimeout(function(){this._sheetController.closeAutomaticNameConversationSheet();}.bind(this),0);},isVisible:function(){return aa.shown(this._tabElem);},isUploading:function(){var de=gd?this._composer&&this._composer.isUploading():!!(this._fileUploader&&this._fileUploader.isUploading()||this._photoUploader&&this._photoUploader.isUploading());return !!(de||this._filesUploader&&this._filesUploader.isUploading()||this._sharePreview&&this._sharePreview.component.isLoading());},setVisibleState:function(de,ee){var fe=aa.shown(this._tabElem),ge=aa.hasClass(this._tabElem,'opened');aa.conditionShow(this._tabElem,de);aa.conditionClass(this._tabElem,'opened',ee);if(!(fe&&ge)&&de&&ee){if(!this._messagesView)this._updateChatTabMessagesView(this._threadID);this._nubController.flyoutContentChanged();this._messagesView.scrollToBottom();this.setP2PChatThreadBannerContainerVisibility();}},_updateChatTabMessagesView:function(de){if(this._messagesView&&this._messagesView.getThreadID()===de)return;var ee=ra.tokenize(de);this._messagesView&&this._messagesView.destroy();this._messagesView=new u(de,this._sheetController,this._getNode('scrollingArea'),this._getNode('conversation'),this._getNode('loadingIndicator'),this._getNode('lastMessageIndicator'),this._getNode('typingIndicator'),this,qa.ShowContextBanner&&ee.type==='user');},focus:function(){if(aa.hasClass(this._tabElem,'opened')){try{this._focusInput();}catch(de){}}else this._getNode('dockButton').focus();},isFocused:function(){var de=lc();return eb.bySelector(de,"._50mz")===this._tabElem;},hasEmptyInput:function(){return ad.test(this._getInputValue());},getInputElem:function(){if(gd)return this._composer&&jb.findDOMNode(this._composer.getInput());if(!this._chatInput||!this._chatInput.component.isMounted())return null;return jb.findDOMNode(this._chatInput.component);},getMessagesView:function(){return this._messagesView;},setStickersFlyoutPackID:function(de){if(!this._stickerButton.isMounted())return;qb.selectPack(de);this._toggleStickersFlyoutShown(true);},loadShareFromParams:function(de,ee){this._getSharePreview().done(function(fe){fe.setProps({share:{params:ee,type:de},uri:null});});},_linkDropped:function(de){this._getSharePreview().done(function(ee){ee.setProps({share:null,uri:de});});},_filesDropped:function(de){this._loadReactMenu().done(function(ee){var fe=ee.component.getFileUploaderPromise();if(fe)fe.done(function(ge){setTimeout(function(){ge.addDroppedFiles(de);},0);});});},_toggleStickersFlyoutShown:function(de){this._stickerButton.showFlyout();this._stickersFlyoutShown=de;},showStickerReplyNUX:function(){if(cd)return;new i(fc.getURIBuilder().getURI()).setRelativeTo(this._getNode('stickerButtonContainer')).setData({thread_id:this._threadID}).setHandler(function(de){sb.clearShowStickerReplyNUX();}).send();},insertBefore:function(de){da.insertBefore(de.getTabElem(),this._tabElem);},appendTo:function(de){da.appendContent(de,this._tabElem);},nextTabIs:function(de){var ee=de&&de.getTabElem();return this._tabElem.nextSibling==ee;},getScrollTop:function(){return lb.getTop(da.find(this._tabElem,'.fbNubFlyoutBody.scrollable'));},setScrollTop:function(de){lb.setTop(da.find(this._tabElem,'.fbNubFlyoutBody.scrollable'),de);},destroy:function(){this._selectionPosition&&this._selectionPosition.disable();while(this._eventListeners.length)this._eventListeners.pop().remove();if(this._dropTarget)this._dropTarget.disable();this._checkUnsentMessages&&this._checkUnsentMessages.cancel();this._logUnsentPhotos&&this._logUnsentPhotos.cancel();this._messagesView&&this._messagesView.destroy();this._sheetController&&this._sheetController.destroy();jb.unmountComponentAtNode(this._getNode('animationContainer'));jb.unmountComponentAtNode(this._getNode('menuContainer'));if(this._addToThreadButton){this._addToThreadButton.unmount();this._addToThreadButton=null;}if(this._archiveWarning){this._archiveWarning.unmount();this._archiveWarning=null;}if(this._videoCallButton){this._videoCallButton.unmount();this._videoCallButton=null;}if(this._closeButton){this._closeButton.unmount();this._closeButton=null;}if(this._title){this._title.unmount();this._title=null;}if(this._sharePreview){this._sharePreview.unmount();this._sharePreview=null;}this._subscriptionsHandler&&this._subscriptionsHandler.release();jb.unmountComponentAtNode(this._getNode('name'));if(gd){jb.unmountComponentAtNode(this._getNode('footer'));}else{try{jb.unmountComponentAtNode(this._getNode('photoUploaderContainer'));jb.unmountComponentAtNode(this._getNode('fileUploaderContainer'));}catch(de){l.bumpEntityKey('chat.web','chattab.unmount_failed');}jb.unmountComponentAtNode(this._getNode('stickerButtonContainer'));jb.unmountComponentAtNode(this._getNode('inputContainer'));if(this._getNode('hotLikeContainer'))jb.unmountComponentAtNode(this._getNode('hotLikeContainer'));if(this._p2pButtonContainer){if(this._p2pButton)this._p2pButton.unmount();this._p2pButtonContainer=null;this._p2pButton=null;}if(this._p2pChatThreadBannerContainerEl){jb.unmountComponentAtNode(this._p2pChatThreadBannerContainerEl);this._p2pChatThreadBannerContainerEl=null;}if(this._p2pRainMoneyContainerEl){jb.unmountComponentAtNode(this._p2pRainMoneyContainerEl);this._p2pRainMoneyContainerEl=null;}}da.remove(this._tabElem);bd['delete'](this._threadID);ca.unregisterNubController(this._nubController);},updateAvailableStatus:function(){yc.getThreadMeta(this._threadID,function(de){var ee=k.OFFLINE,fe=this._getCanonicalUserID(),ge=null;if(fe){ee=gb.get(fe);ge=nb.getNow(fe);}else{var he=de.participants.map(function(je){return ra.getUserIDFromParticipantID(je);});ee=gb.getGroup(he);}if(!z.isOnline())ee=k.OFFLINE;this.updateCallLink();aa.conditionClass(this._tabElem,"_5238",ee===k.ACTIVE&&(ge===undefined||ge===null||!ge.is_messenger_only));var ie=this._getNode('presenceIndicator');this._onlineStatus=ee;this._pagesMessageIndicatorHandler&&this._pagesMessageIndicatorHandler.notifyPageOnlineStatusChanged(ee);switch(ee){case k.ACTIVE:ie.setAttribute('alt',kc._("Online"));break;default:ie.removeAttribute('alt');break;}}.bind(this));},updateTab:function(){yc.getThreadMeta(this._threadID,function(de){var ee=[this._getNode('name')];if(this._title)this._title.setProps({thread:de},function(){this._getNode('chatWrapper').setAttribute('aria-label',this._title.component.getTitle());}.bind(this));for(var fe=ee,ge=Array.isArray(fe),he=0,fe=ge?fe:fe[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ie;if(ge){if(he>=fe.length)break;ie=fe[he++];}else{he=fe.next();if(he.done)break;ie=he.value;}var je=ie;jb.render(hb.createElement(wa,{isNewThread:yc.isNewEmptyLocalThread(this._threadID),thread:de,useAndSeparator:true,useShortName:!de.is_canonical,viewer:ba.getID()}),je);}this._updateControls(de);this._updateMessageBlockSettings(de);this._updateMessageManageSettings(de);this._updateSecretModeSettings(de);this._updateMutingSettings(de);this._updateUnreadCount(de);this.updateTitlebarTooltip();this._updateArchiveWarning(de);this._updateConfidentialStatus(de);this._updateEmployeeAwayWarning(de);this._updateOfficeStatus(de);this._updateNewThread(de);this._updateNameConversationSheet(de);this._updateReadOnlySheet(de);this._updateSwitchToWork(de);this._updateCustomLike(de);}.bind(this));},_updateNameConversationSheet:function(de){if(va.canReply(de)&&!de.name&&!de.is_canonical&&!de.name_conversation_sheet_dismissed&&!de.has_email_participant&&!de.read_only&&!yc.isEmptyLocalThread(de.thread_id)&&!qa.SuppressNamingUpsell){this.showNameConversation(true);}else this.hideAutomaticNameConversation();},_updateReadOnlySheet:function(de){var ee=va.showComposer(de),fe=va.canReply(de),ge=yc.isEmptyLocalThread(de.thread_id);if(!fe&&!ee&&!ge)this._sheetController.openReadOnlySheet();},_updateMessageManageSettings:function(de){var ee=ra.getParticipantIDFromFromThreadID(de.thread_id),fe=sa.getNow(ee);this._updateMenuPropsSafe({isBusinessEnabled:fe&&fe.is_business_enabled});},updateSignatureID:function(de){this._signatureID=de;},_updateMessageBlockSettings:function(de){this._updateMenuPropsSafe({hasMessageBlocked:qc.isMessageBlocked(de),isEmptyConversation:de&&de.message_count==0});},_updateCustomLike:function(de){if(gd||!this._getNode('hotLikeContainer'))return;var ee="_6h1 _6gb";jb.render(hb.createElement(m,{bootloadPlaceholder:hb.createElement('a',{className:ee}),bootloadLoader:ma('MessengerHotLikeButton.react'),className:ee,customLike:de.custom_like_icon,sendSticker:this._stickerSelected.bind(this),sendCustomLike:this._customLikeSelected.bind(this),threadID:this._threadID}),this._getNode('hotLikeContainer'));aa.addClass(this._inputContainerNode,"_n4k");},_updateSecretModeSettings:function(de){var ee=!!(de&&de.ephemeral_ttl_mode);this._updateMenuPropsSafe({hasSecretModeOn:ee});aa.conditionClass(this._tabElem,"_5iq8",ee);var fe=ee?kc._("Type a disappearing message..."):kc._("Type a message...");if(gd){this._composer&&this._composer.setPlaceholder(fe);}else this._chatInput.setProps({placeholder:fe});},_updateMutingSettings:function(de){var ee=!!de&&va.isMuted(de);ee&&!this._reactChatTabMenu&&this._loadReactMenu();this._updateMenuPropsSafe({isMuted:ee});},_updateMenuPropsSafe:function(de){if(this._menuPromise)this._menuPromise.done(function(ee){ee&&ee.component&&ee.component.isMounted()&&ee.setProps(de);});},_updateArchiveWarning:function(de){if(ba.isEmployee())sa.getMulti(de.participants,this._showArchiveWarningIfAllParticipantsAreEmployees.bind(this));},_updateConfidentialStatus:function(de){if(de.other_user_fbid)sa.getMulti(de.participants,function(ee){var fe=this._getNode('titlebarConfidentialStatus');if(fe){var ge=de.other_user_fbid&&ee[ra.getParticipantIDFromUserID(de.other_user_fbid)].is_anonymous_crisis_support;aa.conditionShow(fe,ge);}}.bind(this));},_updateEmployeeAwayWarning:function(de){if(!ba.isEmployee())return;kb.onAfterLoad(function(){n.loadModules(["ChatEmployeeAwayWarning"],function(ee){ee.updateEmployeeAwayWarning(de,function(){this._sheetController.openEmployeeAwaySheet();}.bind(this),jc);}.bind(this));}.bind(this));},_updateOfficeStatus:function(de){var ee=this._getNode('officeStatus');if(!ee||ra.isGroupChat(de.thread_id))return;kb.onAfterLoad(function(){n.loadModules(["ChatTabOfficeStatus"],function(fe){var ge=ra.getParticipantIDFromUserID(de.other_user_fbid);sa.get(ge,function(he){fe.update(ee,he);});});});},_updateSwitchToWork:function(de){if(ba.isEmployee()&&ba.hasWorkUser()&&ra.isGroupChat(de.thread_id)){sa.getMulti(de.participants,function(ee){var fe=this._isEmployeesOnly(ee);this._updateMenuPropsSafe({hasSwitchToWork:fe});}.bind(this));}else this._updateMenuPropsSafe({hasSwitchToWork:false});},_updateControls:function(de,ee,fe){var ge=false;if(de&&de.thread_id){var he=ra.tokenize(de.thread_id);if(he.type==='user'){var ie=he.value;ge=!ka.isUser(ie);}}var je=va.showComposer(de)&&(!mc(de.participants)||!!ee)&&!this._pendingActions,ke=this._getNode('footer');aa.conditionShow(ke,je);aa.conditionShow(this._getNode('menuContainer'),je);var le={isEmptyChat:yc.isNewEmptyLocalThread(de.thread_id),show:je};if(ge)le.showAddFriend=null;this._updateMenuPropsSafe(le);var me=je&&!ge;this._addToThreadButton&&this._addToThreadButton.setProps({shown:me});if(fe&&fe.length===1&&qa.ShowContextBanner&&qa.ShowContextBannerNullState){this._messagesView&&this._messagesView.renderContextBanner(null,fe[0].info&&fe[0].info.uid);}else this._messagesView&&this._messagesView.unmountContextBanner();this._resizeInputContainer();},_isP2PEnabled:function(){return bb.P2PEnabled;},_getP2PProps:function(){return {button:hb.createElement('i',{className:"hidden_elem"}),className:"_6ga _6gb",flyoutAlignment:dd,onTrigger:this._p2pTriggered.bind(this),referrer:ta.CHAT,threadID:this._threadID};},_renderP2PButton:function(){var de=this._getCanonicalUserID();if(this._isP2PEnabled()&&de!==ba.getID()){this._p2pButtonContainer=this._getNode('orionTriggerContainer');this._p2pButton=new ib(cb,this._p2pButtonContainer);this._p2pButton.setProps(this._getP2PProps());aa.addClass(this._inputContainerNode,"_11d6");}else aa.addClass(this._getNode('orionTriggerContainer'),"hidden_elem");},_resizeInputContainer:function(){if(gd)return;},_updateNewThread:function(de){if(yc.isNewEmptyLocalThread(de.thread_id))this.showAddFriend();},_isEmployeesOnly:function(de){for(var ee in de)if(!de[ee].employee)return false;return true;},_showArchiveWarningIfAllParticipantsAreEmployees:function(de){var ee=this._isEmployeesOnly(de),fe=this._getNode('archiveContainer');if(fe){if(this._titlebarTooltipAnchor)aa.conditionClass(this._titlebarTooltipAnchor,'narrowTitleBar',ee);aa.conditionShow(fe,ee);this._archiveWarning&&this._archiveWarning.setProps({shown:ee});}},updateTitlebarTooltip:function(){yc.getThreadMeta(this._threadID,function(de){var ee=jb.findDOMNode(this._title.component);if(!ee)return;id(ee,de.participants);}.bind(this));},_getNode:function(de){return this._tabTemplate.getNode(de);},_getCanonicalUserID:function(){return ra.getUserIDFromThreadID(this._threadID);},_listen:function(de,event,ee,fe){var ge=this._getNode(de);if(ge){this._eventListeners.push(ja.listen(ge,event,ee.bind(this)));}else if(!fe)throw new Error('Could not find node "'+de+'"');},_closePreClicked:function(de){this._closeMouseDown=true;},_closeClicked:function(de){yd(this);t.closeTab(this._threadID);if(de instanceof vb){de.stopPropagation();return;}de.kill();},_closeEnter:function(de){if(de.keyCode===na.RETURN)this._closeClicked(de);},_nubClicked:function(de){de.kill();return w.inform('nub-activated',this._threadID);},_dockKeyDown:function(event){if(event.keyCode===na.RETURN||event.keyCode===na.SPACE){w.inform('nub-activated',this._threadID);event.kill();}else this._handleHotkeyPressed(event);},_handleHotkeyPressed:function(event){if(event.keyCode===na.ESC){this._handleEscape();event.kill();}else if(event.keyCode===na.TAB)this._handleTabPressed(event);},_handleTabPressed:function(event){if(!event.ctrlKey){var de=w.inform('tab-pressed',{id:this._threadID,shiftPressed:event.shiftKey});!de&&event.preventDefault();}},_handleEscape:function(){if(this._stickersFlyoutShown){this._toggleStickersFlyoutShown(false);return;}yd(this);if(this.hasEmptyInput()){w.inform('esc-pressed',this._threadID);}else{var de=kc._("Are you sure you want to close this chat window?"),ee=kc._("You haven't sent your message.");ob.showConfirm(de,ee,function(fe){if(fe){w.inform('esc-pressed',this._threadID);}else this.focus();}.bind(this),{autofocusConfirm:true});}},_titleClicked:function(event){var de=event.getTarget();if(!eb.byClass(de,'titlebarText')&&!eb.byClass(de,'uiSelector')&&!eb.byClass(de,'addToThread')&&!eb.byClass(de,'optionMenu')&&!eb.byClass(de,'videoicon')&&!eb.byClass(de,'phoneicon')&&!eb.bySelector(de,"._1fu3")&&!eb.bySelector(de,"._1fu4")&&!eb.byClass(de,'close')){event.kill();t.lowerTab(this._threadID);this.focus();}},_groupCallEnter:function(de){if(de.keyCode===na.RETURN)this._groupCallClicked(de);},_groupCallClicked:function(de){if(de.target)de.target.blur();if(this._videoCallLinkEnabled){var ee;if(de.target&&(aa.hasClass(de.target,'phoneicon')||aa.hasClass(de.target,"_1fu4"))){ee='chat_tab_voice_icon';}else ee='chat_tab_icon';yc.getThreadMeta(this._threadID,function(fe){var ge=fe.participants.map(function(ie){return ra.getUserIDFromParticipantID(ie);}),he=ge.filter(function(ie){return ie!==ba.getID();});w.inform('group-call-clicked',{threadID:'GROUP:'+fe.thread_fbid.toString(),usersToCall:he,clickSource:ee,audioOnly:ee==='chat_tab_voice_icon'});});}de.stopPropagation();},_callEnter:function(de){if(de.keyCode===na.RETURN)this._callClicked(de);},_callClicked:function(de){if(de.target)de.target.blur();var ee=this._getCanonicalUserID();if(this._videoCallLinkEnabled){var fe;if(de.target&&(aa.hasClass(de.target,'phoneicon')||aa.hasClass(de.target,"_1fu4"))){fe='chat_tab_voice_icon';}else fe='chat_tab_icon';w.inform('video-call-clicked',{threadID:this._threadID,userID:ee,clickSource:fe,audioOnly:fe==='chat_tab_voice_icon'});}de.stopPropagation();},_addFriendLinkClicked:function(){this.showAddFriend();},_getUserParticipants:function(de){var ee=[];de.forEach(function(fe){var ge=ra.getUserIDFromParticipantID(fe);ge&&ee.push(ge);});return ee;},_enableDesktopNotif:function(){Notification.requestPermission();},_inputPasted:function(event){if(ac.chrome()){var de=event.clipboardData||event.originalEvent.clipboardData;if(!de||!de.items||de.items.length<1)return;var ee=de.items[0].type;if(ee!=='image/png')return;if(de.items[0].getAsFile){var fe=de.items[0].getAsFile();this._photoUploader&&this._photoUploader.uploadFiles([fe]);}}},_focusInput:function(){q.processEvent('focus');if(gd){this._composer&&this._composer.getInput().focus();}else this._chatInput&&this._chatInput.component.isMounted()&&this._chatInput.component.focus();},_focusTab:function(){aa.addClass(this._tabElem,'focusedTab');this.tryMarkAsRead();this._closeMouseDown=false;this._setCloseTooltip(true);w.inform('focus-tab',this._threadID);},_blurTab:function(){q.processEvent('blur');aa.removeClass(this._tabElem,'focusedTab');!this._closeMouseDown&&this._setCloseTooltip(false);},_setCloseTooltip:function(de){if(this._closeButton){this._closeButton.setProps({active:de});return;}var ee=this._getNode('titlebarCloseButton');if(!ee)return;var fe=de?kc._("Press Esc to close"):kc._("Close tab");yb.set(ee,fe,'above');},_inputKeyDown:function(event){this.tryMarkAsRead();if(event.keyCode===na.RETURN&&!event.shiftKey){if(td(this)){sd(this);event.kill&&event.kill();return;}pd(this);event.kill?event.kill():event.preventDefault();return;}if(event.keyCode===na.DOWN&&event.shiftKey&&this.hasEmptyInput()){event.kill&&event.kill();t.lowerTab(this._threadID);this.focus();return;}this._handleHotkeyPressed(event);},_showMessageBlockedDialog:function(de){var ee=this._getCanonicalUserID();if(!ee)return;var fe='fbid:'+ee;sa.get(fe,function(ge){n.loadModules(["MessageBlockedDialog"],function(he){he.show(de.thread_id,de.can_reply,qc.isMessageBlocked(de),ge.short_name);});});},_initializeInput:function(){if(gd){var de=new ib(m,this._getNode('footer'));de.setProps({bootloadPlaceholder:hb.createElement('div',null),bootloadLoader:ma('ChatTabComposerContainer.react'),initializeThingsWithInputFn:this._initializeThingsWithInputFn.bind(this),inputKeyDown:this._inputKeyDown.bind(this),onMount:function(fe){this._composer=fe;}.bind(this),onBlur:this._blurTab.bind(this),onEscape:this._handleEscape.bind(this),onFocus:this._focusTab.bind(this),onTab:this._handleTabPressed.bind(this),openFlyoutFn:function(){return this._toggleStickersFlyoutShown(true);}.bind(this),resizeFn:function(){this._nubController.flyoutContentChanged();}.bind(this),placeholder:kc._("Type a message..."),photoUploaderProps:this._getPhotoUploaderProps(),fileUploaderProps:this._getFileUploaderProps(),stickerButtonProps:this._getStickerButtonProps(),p2pProps:this._getP2PProps(),onCustomLikeSelect:this._customLikeSelected.bind(this),onStickerSelect:this._stickerSelected.bind(this),threadID:this._threadID,viewer:ba.getID()});return;}var ee=kc._("Type a message...");this._chatInput=new ib(pc,this._getNode('chatInputContainer'));this._chatInput.setProps({initializeThingsWithInputFn:this._initializeThingsWithInputFn.bind(this),inputKeyDown:this._inputKeyDown.bind(this),onBlur:this._blurTab.bind(this),onEscape:this._handleEscape.bind(this),onFocus:this._focusTab.bind(this),onTab:this._handleTabPressed.bind(this),openFlyoutFn:function(){return this._toggleStickersFlyoutShown(true);}.bind(this),resizeFn:function(fe){tb.set(this._getNode('inputContainer'),'height',fe+'px');this._nubController.flyoutContentChanged();}.bind(this),uploadPhotoFn:function(fe){this._photoUploader&&this._photoUploader.uploadFiles([fe]);}.bind(this),placeholder:ee});},_initializeSharePreview:function(de,ee){ja.listen(de,'keyup',function(){var fe=ee?ee():de.value;if(!fe.length)if(this._urlScraper){this._urlScraper.reset();delete this._urlScraperData;}}.bind(this));kb.onAfterLoad(function(){n.loadModules(["URLScraper"],function(fe){this._urlScraper=new fe(de,ee);this._urlScraper.subscribe('match',function(ge,he){this._urlScraperData=he;this._getSharePreview().done(function(ie){var je=this._urlScraperData;ie.setProps({share:null,uri:je&&je.url});}.bind(this));}.bind(this));}.bind(this));}.bind(this));},_getSharePreview:function(){if(!this._sharePreview&&!this._sharePreviewPromise){this._sharePreviewLoading=true;this._sharePreviewPromise=new h(function(de){n.loadModules(["MercurySharePreview.react"],function(ee){this._sharePreview=new ib(ee,this._getNode('shareAttachmentShelf'));this._sharePreview.setProps({imageSize:{width:ed,height:ed},location:ta.CHAT_PREVIEW,onClose:this._focusInput.bind(this),onUpdate:function(){vd(this);this._unblockSend();}.bind(this)});this._sharePreviewLoading=false;de(this._sharePreview);}.bind(this));}.bind(this));}return this._sharePreviewPromise;},_initializeThingsWithInputFn:function(de,ee){if(gd)this._getValueFromReactComposer=ee;this._initializeSharePreview(de,ee);yc.getThreadMeta(this._threadID,function(fe){if(fe&&fe.folder===za.PENDING){var ge=da.create('div');da.appendContent(this._getNode('chatConv'),ge);this._pendingActions=ge;jb.render(hb.createElement(m,{bootloadPlaceholder:hb.createElement('div',{style:{height:27}}),bootloadLoader:ma('ChatPendingActions.react'),onDeleteClick:function(he){vc.changeFolder(this._threadID,za.OTHER);t.closeTab(this._threadID);}.bind(this),onReplyClick:function(he){vc.changeFolder(this._threadID,za.INBOX);da.remove(ge);delete this._pendingActions;this._updateControls(fe);}.bind(this)}),ge);}wc.getServerIDFromClientID(this._threadID,function(he){this._typingDetector=new zb(this._getCanonicalUserID(),de,'mercury-chat',null,he,ee);}.bind(this));}.bind(this));},_getInputValue:function(){if(this._getValueFromReactComposer)return this._getValueFromReactComposer();if(!this._chatInput||!this._chatInput.component.isMounted())return '';return this._chatInput.component.getValue()||'';},appendTextToInput:function(de){if(gd){this._composer&&this._composer.getInput().appendText(de);}else if(this._chatInput&&this._chatInput.component.isMounted())this._chatInput.component.appendText(de);},_hasUnfinishedPost:function(){return ud(this)||this.isUploading();},tryMarkAsRead:function(){if(!this._messagesView||this._messagesView.isScrolledToBottom()){vc.markRead(this._threadID);vc.markSeen(this._threadID);return true;}return false;},_chatConvClicked:function(de){this.tryMarkAsRead();if(eb.byTag(de.getTarget(),'a')||da.getSelection())return;this.focus();},_inputContainerClicked:function(de){this.tryMarkAsRead();this.focus();},_initializePageMessagingIndicator:function(){if(!this._pagesMessageIndicator)return;aa.hide(this._pagesMessageIndicator);this._pagesMessageIndicatorHandler=db.tryCreateHandler(this._threadID,this._pagesMessageIndicator,this._onlineStatus);this._pagesMessageIndicatorHandler&&this._pagesMessageIndicatorHandler.checkResponsiveness();},showTypingIndicator:function(de){this._renderTypingIndicator();aa.conditionClass(this._tabElem,"_54m8",de);},_renderTypingIndicator:function(){var de=aa.hasClass(this._tabElem,'highlightTab')?'light':'dark';jb.render(hb.createElement(xa,{color:de}),this._getNode('animationContainer'));},_updateUnreadCount:function(de){var ee=de.unread_count;if(typeof ee!='undefined'){var fe=!!ee&&(!o.showsTabUnreadUI||o.showsTabUnreadUI()),ge=this._getNode('numMessages');aa.conditionShow(ge,fe);aa.conditionClass(this._tabElem,'highlightTab',fe);this._renderTypingIndicator();md(this._threadID,this._tabElem,fe);da.setContent(ge,ee);}},ensureValidCanonicalGroup:function(de){if(this._messagesView&&this._messagesView.getThreadID()===this._threadID)return;if(de[this._messagesView.getThreadID()])this._updateChatTabMessagesView(this._threadID);},updateCallLink:function(){var de=ra.isGroupChat(this._threadID);if(de&&p.get('rtc_conferencing_www')){this._videoCallLinkEnabled=true;}else{var ee=this._getCanonicalUserID();if(!ee||ee===ba.getID()||!ka.isUser(ee)){if(this._videoCallButton)this._videoCallButton&&this._videoCallButton.setProps({shown:false});this._videoCallLinkEnabled=false;return;}this._videoCallLinkEnabled=la.isCallable(ee);}},_setCallButtonTooltips:function(de,ee){var fe=la.callButtonTooltip(de,ee),ge=la.voiceCallButtonTooltip(de,ee);yb.set(this._getNode('videoCallLink'),fe);var he=this._getNode('voiceCallLink');if(he)yb.set(he,ge);},_initializeSheetController:function(){this._sheetController=new v(this._threadID,this._getNode('sheet'),this._tabElem,this);this._sheetController.onClickMessagesBlockedSheet(function(){vc.unblockMessages(this._threadID);this.focus();}.bind(this));this._sheetController.onClickNewMessagesSheet(function(){this._messagesView&&this._messagesView.scrollToBottom();this.focus();this.tryMarkAsRead();}.bind(this));this._sheetController.onClickThreadIsMutedSheet(function(){vc.unmute(this._threadID);this.focus();}.bind(this));this._sheetController.onClickSecretModeSheet(function(){vc.turnOffSecretMode(this._threadID);this.focus();}.bind(this));this._sheetController.onTokensChanged(function(de,ee){this._handleSheetControllerTokensChanged(ee);}.bind(this));this._nubController=new ab().init(this._tabElem);this._sheetController.onResize(function(){this._nubController.flyoutContentChanged();}.bind(this));this._nubController.subscribe('resize',function(){this._resizeInputContainer();}.bind(this));},_handleSheetControllerTokensChanged:function(de){this._updateP2PParticipants(de.tokens);yc.getThreadMeta(this._threadID,function(ee){this._updateControls(ee,de.token_count,de.tokens);}.bind(this));this._updateMessagesViewIfNecessary(de);},_updateMessagesViewIfNecessary:function(de){if(!qa.MessengerChatTabSnapCanonialGK||!yc.isEmptyLocalThread(this._threadID))return;var ee=pa.get();ee.unsubscribe(this._canonicalGroupSearchSubscriptionID);if(de.token_count===1){var fe=de.tokens[0].info&&de.tokens[0].info.uid;this._updateMercuryMessagesViewCanonical(ra.getThreadIDFromUserID(fe));return;}this._updateMercuryMessagesViewCanonical(this._threadID);if(de.token_count>1){var ge=de.tokens.map(function(he){return he.info.uid;});this._canonicalGroupSearchSubscriptionID=ee.getCanonicalGroupThreadIDForParticipants(Array.from(ge),this._updateMercuryMessagesViewCanonical.bind(this));}},_updateMercuryMessagesViewCanonical:function(de){if(de){this._updateChatTabMessagesView(de);this._messagesView.scrollToBottom();}},_updateP2PParticipants:function(de){var ee;if(de&&de.length===1&&de[0].info&&de[0].info.uid)ee=[ra.getParticipantIDFromUserID(de[0].info.uid)];if(this._p2pButton){this._p2pButton.setProps({participantIDs:ee});}else if(this._composer)this._composer.setParticipantIDs(ee);},_initializeHeader:function(){this._initializeTitle();this._initializeCloseButton();this._initializeReactMenu();this._initializeAddToThreadButton();this._initializeVideoCallButton();this._initializeArchiveWarning();},_loadReactMenu:function(){var de=ra.isGroupChat(this._threadID),ee=yc.isNewEmptyLocalThread(this._threadID),fe=this._sheetController.openAddFriendsSheet.bind(this._sheetController);ma('ChatTabMenu.react').load().done(function(ge){this._reactChatTabMenu=new ib(ge,this._getNode('menuContainer'));this._reactChatTabMenu.setProps({sheetController:this._sheetController,onFileUploaderMounted:this.setFilesUploader.bind(this),nameConversationFunc:function(){return this.showNameConversation();}.bind(this),isGroupChat:de,isEmptyChat:ee,showAddFriend:fe,threadID:this._threadID,otherUserID:this._getCanonicalUserID(),attachmentsShelf:this._getNode('fileAttachmentShelf'),onUploadFinished:this._unblockSend.bind(this),onUpdateAttachmentsShelf:function(){return vd(this);}.bind(this),onSubmit:this._focusInput.bind(this)},function(){this._menuPromiseResolve(this._reactChatTabMenu);}.bind(this));}.bind(this));return this._menuPromise;},_initializeReactMenu:function(){this._menuPromise=new h(function(de){this._menuPromiseResolve=de;}.bind(this));this._listen('menuButton','click',function(de){de.preventDefault();this._loadReactMenu().done(function(ee){ee.component.open();});}.bind(this));},_initializeArchiveWarning:function(){var de=this._getNode('archiveContainer');if(!de)return;kb.onAfterLoad(function(){n.loadModules(["ChatArchiveWarning.react"],function(ee){this._archiveWarning=new ib(ee,de);this._archiveWarning.setProps({isFBAtWork:ec.is_work_user,shown:true});}.bind(this));}.bind(this));},_initializeAddToThreadButton:function(){kb.onAfterLoad(function(){n.loadModules(["ChatAddToThreadButton.react"],function(de){this._addToThreadButton=new ib(de,this._getNode('addToThreadContainer'));this._addToThreadButton.setProps({isFBAtWork:ec.is_work_user,onClick:this._addFriendLinkClicked.bind(this),shown:true});}.bind(this));}.bind(this));},_initializeVideoCallButton:function(){kb.onAfterLoad(function(){n.loadModules(["ChatVideoCallButton.react"],function(de){var ee=ra.isGroupChat(this._threadID);if(ee&&p.get('rtc_conferencing_www')){this._videoCallButton=new ib(de,this._getNode('videoCallButtonContainer'));this._videoCallButton.setProps({shown:true,isAudio:false,isGroupChat:true,userID:null,onClick:this._groupCallClicked.bind(this),onKeyUp:this._groupCallEnter.bind(this)});this._voiceCallButton=new ib(de,this._getNode('voiceCallButtonContainer'));this._voiceCallButton.setProps({shown:true,isAudio:true,isGroupChat:true,userID:null,onClick:this._groupCallClicked.bind(this),onKeyUp:this._groupCallEnter.bind(this)});}else{if(!ra.getUserIDFromThreadID(this._threadID))return;var fe=this._getCanonicalUserID();this._videoCallButton=new ib(de,this._getNode('videoCallButtonContainer'));this._videoCallButton.setProps({shown:true,isAudio:false,userID:fe,onClick:this._callClicked.bind(this),onKeyUp:this._callEnter.bind(this)});var ge=this._getNode('voiceCallButtonContainer');if(ge){this._voiceCallButton=new ib(de,ge);this._voiceCallButton.setProps({shown:true,isAudio:true,userID:fe,onClick:this._callClicked.bind(this),onKeyUp:this._callEnter.bind(this)});}}}.bind(this));}.bind(this));},_initializeCloseButton:function(){this._listen('titlebarCloseButton','click',this._closeClicked);this._listen('titlebarCloseButton','keyup',this._closeEnter);this._listen('titlebarCloseButton','mousedown',this._closePreClicked);kb.onAfterLoad(function(){n.loadModules(["ChatCloseButton.react"],function(de){this._closeButton=new ib(de,this._getNode('titlebarCloseButtonContainer'));this._closeButton.setProps({active:this.isFocused(),className:"_3olu _3olv",onClick:this._closeClicked.bind(this),onKeyUp:this._closeEnter.bind(this),onMouseDown:this._closePreClicked.bind(this)});}.bind(this));}.bind(this));},_initializeTitle:function(){var de=yc.getThreadMetaNow(this._threadID);this._title=new ib(y,this._getNode('titleContainer'));this._title.setProps({isNewThread:yc.isNewEmptyLocalThread(this._threadID),thread:de,viewer:ba.getID()});},_initializeTitleHREF:function(){cc.getThreadURI(this._threadID,function(ee){return this._setTitleHref(ee);}.bind(this));this._titlebarTooltipAnchor=this._getNode('titlebarText');var de=this._getCanonicalUserID();if(this._getCanonicalUserID())sa.get(ra.getParticipantIDFromUserID(de),function(ee){if(ee.href)this._setTitleHref(ee.href);}.bind(this));},_initializeUIListeners:function(){if(this._pagesMessageIndicator)this._listen('scrollingArea','scroll',function(event){var de=event.target;if(de.scrollHeight-de.offsetHeight!==de.scrollTop)this._pagesMessageIndicatorHandler&&this._pagesMessageIndicatorHandler.hideIndicatorAndPreventFutureShow();}.bind(this));this._listen('closeButton','click',this._closeClicked);this._listen('dockButton','click',this._nubClicked);this._listen('dockButton','keydown',this._dockKeyDown);this._listen('nubFlyoutTitlebar','click',this._titleClicked);this._listen('chatConv','click',this._chatConvClicked);if(this._getNode('inputContainer'))this._listen('inputContainer','click',this._inputContainerClicked);this._listen('sheet','keydown',function(event){if(!event.getModifiers().any&&event.keyCode===na.TAB){this._focusInput();event.kill();}if(event.keyCode===na.ESC)this._handleEscape();}.bind(this));if(this._getNode('officeStatus'))this._listen('officeStatus','click',function(){return false;},true);},setFilesUploader:function(de){this._filesUploader=de;},_getPhotoUploaderProps:function(){return {className:"_6gd",customUI:true,imageClassName:"hidden_elem",linkClassName:"_6gb _6ge",onSubmit:this._handlePUSubmit.bind(this),onAllUploadsComplete:this._handlePUAllUploadsCompleted.bind(this),onLastUploadFail:this._handlePULastUploadFailed.bind(this),onLastUploadCancel:this._handlePULastUploadCanceled.bind(this)};},_initializeAutoSendPhotoUploader:function(){if(gd)return;this._photoUploader=jb.render(hb.createElement(s,this._getPhotoUploaderProps()),this._getNode('photoUploaderContainer'));},_getStickerButtonProps:function(){return {className:"_6gb _6gf",flyoutAlignment:dd,onFlyoutShown:this._onStickerFlyoutShown.bind(this),onFlyoutHidden:this._onStickerFlyoutHidden.bind(this),onLoad:function(de){this._stickerButton=de;}.bind(this),onStickerSelect:this._stickerSelected.bind(this),onEmoticonSelect:this._emoticonSelected.bind(this),threadID:this._threadID};},_initializeStickers:function(){if(gd)return;var de=this._getStickerButtonProps();jb.render(hb.createElement(m,babelHelpers['extends']({bootloadPlaceholder:hb.createElement('a',{className:de.className}),bootloadLoader:ma('ChatStickerButton.react')},de)),this._getNode('stickerButtonContainer'));},_getFileUploaderProps:function(){var de=this._getPhotoUploaderProps();de.linkClassName="_6gb _6gg";de.imagesOnly=false;return de;},_initializeAutoSendFileUploader:function(){if(gd)return;if(!this._fileUploaderNode)return;this._fileUploader=jb.render(hb.createElement(s,this._getFileUploaderProps()),this._fileUploaderNode);},_initializeContentSearch:function(){if(gd)return;if(this._contentSearchNode){var de="_6gb _6gs";jb.render(hb.createElement(m,{bootloadPlaceholder:hb.createElement('a',{className:de}),bootloadLoader:ma('ChatContentSearchButton.react'),className:de,getQuery:function(){return this._getInputValue();}.bind(this),onLoad:function(ee){this._contentSearchButton=ee;}.bind(this),onSelect:function(ee,fe){var ge=this.getInputElem();ge&&ge.select&&ge.select();if(ee.platformFBID.toString()===qa.MessengerAppID){this._stickerSelected(ee.resultID.toString());}else{this._photoUploader&&this._photoUploader.uploadURL({attribution_app_id:ee.platformFBID,errorDialogParams:{body:kc._("There was a problem sending this GIF. Choose another one and try again."),title:kc._("Couldn't Send GIF")},external_image_url:ee.source.url,preview_url:ee.media.preview?ee.media.preview.url:ee.media.thumbnail.url,source:ee.source});this._messagesView&&this._messagesView.scrollToBottom();}}.bind(this)}),this._contentSearchNode);aa.addClass(this._inputContainerNode,"_35li");l.bumpEntityKey('chat.web','content_search_button.mounting_attempted');}},_initializeDragDropTarget:function(){if(dc.canUploadFiles){var de=ea.scry(this._tabElem,"._1ia");if(de&&de.length>0){this._dropTarget=new fa(de[0]);this._dropTarget.setOnFilesDropCallback(this._filesDropped.bind(this));this._dropTarget.setOnURLDropCallback(this._linkDropped.bind(this));this._dropTarget.enable();}}},_initializeP2PChatThreadBannerContainer:function(){var de=ea.scry(this._tabElem,"._2hc2");if(de&&de.length>0){this._p2pChatThreadBannerContainerEl=de[0];kb.onAfterLoad(function(){n.loadModules(["P2PChatThreadBannerContainer.react"],function(ee){this._p2pChatThreadBannerContainer=new ib(ee,this._p2pChatThreadBannerContainerEl);this._p2pChatThreadBannerContainer.setProps({isVisible:this.isChatViewable(),otherUserID:ra.getUserIDFromThreadID(this._threadID),threadID:this._threadID});}.bind(this));}.bind(this));}},_initializeP2PRainMoneyContainer:function(){if(!this._isP2PEnabled||!bb.P2PRainMoneyWWW)return false;var de=ea.scry(this._tabElem,"._3bpu");if(de&&de.length>0){this._p2pRainMoneyContainerEl=de[0];kb.onAfterLoad(function(){n.loadModules(["P2PRainMoneyContainer.react"],function(ee){this._p2pRainMoneyContainer=new ib(ee,this._p2pRainMoneyContainerEl);this._p2pRainMoneyContainer.setProps({threadID:this._threadID,width:this._tabElem.clientWidth});}.bind(this));}.bind(this));}},setP2PChatThreadBannerContainerVisibility:function(){if(this._p2pChatThreadBannerContainer)this._p2pChatThreadBannerContainer.setProps({isVisible:this.isChatViewable()});},isChatViewable:function(){return (this._tabElem&&aa.hasClass(this._tabElem,'opened')&&!aa.hasClass(this._tabElem,'hidden_elem'));},_initializeP2P:function(){if(gd)return;this._renderP2PButton();},_initializeUnloadListeners:function(){this._checkUnsentMessages=gc(function(){if(this._hasUnfinishedPost())return kc._("You haven't sent your message yet. Do you want to leave without sending?");if(tc.getNumberLocalMessages(this._threadID))return kc._("Your message is still being sent. Are you sure you want to leave?");return null;}.bind(this));kb.onBeforeUnload(this._checkUnsentMessages,false);this._logUnsentPhotos=gc(yd.bind(null,this));kb.onUnload(this._logUnsentPhotos);},_handlePUSubmit:function(de,ee){wd(this,fb.UPLOAD_START,ee);rd(this,'',[],function(fe){if(this._threadID!==fe.thread_id){this._newThreadIDFromPhotoUpload=fe.thread_id;if(this._messagesView)this._messagesView.setNewThreadID(fe.thread_id);}fe.content_attachment=null;zc.addAttachmentPlaceholder(fe,ee.upload_id,ee);}.bind(this));be('submit',ee);this._focusInput();},_handlePULastUploadFailed:function(de,ee){wd(this,fb.CLIENT_ERROR,ee);be('failed',ee);zc.cancelAttachmentPlaceholder(ee.upload_id,ee);var fe=kc._("Photo Upload Failed"),ge=kc._("Please try again. Make sure you are uploading a valid photo.");if(ee.errorDialogParams){fe=ee.errorDialogParams.title||fe;ge=ee.errorDialogParams.body||ge;}ob.show(fe,ge);},_handlePULastUploadCanceled:function(de,ee){wd(this,fb.CANCEL_DURING_UPLOAD,ee);be('canceled',ee);zc.cancelAttachmentPlaceholder(ee.upload_id,ee);},_handlePUAllUploadsCompleted:function(de,ee){wd(this,fb.ALL_UPLOADS_DONE,ee);be('completed',ee);zc.confirmAttachmentPlaceholder(ee.upload_id,ee);var fe=ee.image_ids.length||ee.attachments.length;qd(this,fe);},_stickerSelected:function(de){rd(this,'',[],function(ee){ee.has_attachment=true;ee.sticker_id=de;zc.send(ee);this.focus();}.bind(this));this._messagesView&&this._messagesView.scrollToBottom();},_customLikeSelected:function(de,ee){rd(this,de.emoji,[],function(fe){fe.has_attachment=false;zc.send(ga.setEmojiSize(fe,ee));this.focus();}.bind(this));this._messagesView&&this._messagesView.scrollToBottom();},_emoticonSelected:function(de){var ee=ha.symbols[de];if(!ee)return;if(gd){this._composer&&this._composer.getInput().insertEmoticon(ee);return;}else if(!p.get('chat_basic_input')){this._chatInput.component.insertEmoticon(ee);return;}this._selectionPosition=this._selectionPosition||new mb(this._getNode('input'));var fe=xb.getInstance(this._getNode('input')),ge=fe.getValue(),he=ia.insertEmoticon(ee,ge,this._selectionPosition.getPos());fe.setValue(he.result);this._selectionPosition.setPos(he.start,he.end);},_p2pTriggered:function(){rd(this,'',[],function(de){this.focus();}.bind(this));this._messagesView&&this._messagesView.scrollToBottom();},_onStickerFlyoutShown:function(de){this.focus();de();this._stickersFlyoutShown=true;},_searchStickers:function(de,ee){this._stickersFlyout&&this._stickersFlyout.setProps({packID:rb.SEARCH_PACK_ID,trigger:de},ee);},_onStickerFlyoutHidden:function(){this._stickersFlyoutShown=false;if(!gd)this.focus();},_setTitleHref:function(de){this._title&&this._title.setProps({href:de});},_unblockSend:function(){if(!this._blocked||td(this))return;this._blocked=false;pd(this);this._sheetController.closeUploadWarningTabSheet();},_logOpenTab:function(){new j('/ajax/chat/opentab_tracking.php',{threadID:this._threadID,userID:this._getCanonicalUserID(),signatureID:this._signatureID}).send();}});function be(de,ee){hd.debug('photo_uploader:'+de,'{}');}function ce(de,ee){if(!ee)return de;var fe=ee.getImageFiles();if(fe.length>0){de.image_ids=fe;de.has_attachment=true;}var ge=ee.getAnimatedImageFiles();if(ge.length>0){de.gif_ids=ge;de.has_attachment=true;}var he=ee.getVideoFiles();if(he.length>0){de.video_ids=he;de.has_attachment=true;}var ie=ee.getAudioFiles();if(ie.length>0){de.audio_ids=ie;de.has_attachment=true;}var je=ee.getFiles();if(je.length>0){de.file_ids=je;de.has_attachment=true;}return de;}f.exports=xd;},null);
__d('ChatTabViewCoordinator',['Arbiter','ChatTabModel','ChatTabView','ChatTabViewSelector','CSS','ErrorUtils','FBRTCSupport','LogHistory'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=o.getInstance('chat_tab_coordinator');function q(r,s){var t=new k(r),u={},v=false;function w(){var aa=i.get(),ba={};aa.tabs.forEach(function(da){ba[da.id]=1;});p.log('process_tab_changed',{model_tabs:Object.keys(ba),view_tabs:Object.keys(u)});for(var ca in u)if(!ba[ca]){p.log('remove_tab',{tab_id:ca});u[ca].destroy();delete u[ca];}x(aa);y(aa);if(aa.tabNeedsFocus&&!aa.tabNeedsFocus.isFocused())aa.tabNeedsFocus.focus();}function x(aa){var ba=null;aa.tabs.forEach(function(ca){var da=ca.id,ea=false;if(!u[da]){p.log('add_tab',{tab_id:da});u[da]=new j(da,ca.server_id,ca.signatureID,r,ba);ea=true;if(u[da].onBeingReplaced)u[da].onBeingReplaced(function(ha,ia){u[ha]=ia;});}else u[da].updateSignatureID(ca.signatureID);if(u[da].isFocused())aa.tabNeedsFocus=u[da];if(!ea&&!u[da].nextTabIs(ba)){var fa=u[da].getScrollTop();if(ba){try{u[da].insertBefore(ba);}catch(ga){p.log('insertBeforeFailed','{}');u[da].appendTo(r);m.reportError(ga);}}else u[da].appendTo(r);if(fa)u[da].setScrollTop(fa);}ba=u[da];});}function y(aa){var ba=s.getTabsToShow(aa),ca=[],da=false;aa.tabs.forEach(function(ea){if(!ba[ea.id]){u[ea.id].setVisibleState(false,ea.raised);ca.push(ea);}});aa.tabs.forEach(function(ea){if(ba[ea.id]){u[ea.id].setVisibleState(true,ea.raised);da|=ea.raised;}});t.setTabData(ca);z(da);}function z(aa){if(!aa&&v){h.inform('layer_hidden',{type:'ChatTab'});v=false;}else if(aa&&!v){h.inform('layer_shown',{type:'ChatTab'});v=true;}}if(n.isSendWebrtcSupported())l.addClass(r,'videoCallEnabled');s.subscribe('tabs-changed',w);w();}f.exports=q;},null);
__d('TabsViewport',['Arbiter','ArbiterMixin','ChatTabModel','Dock','DOM','Event','Parent','Vector','ViewportBounds','areJSONRepresentationsEqual','csx','getViewportDimensions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t=175,u=269,v=0;function w(){return t;}function x(){return u;}function y(z){this._root=z;var aa=this._recalculateWidth.bind(this);m.listen(window,'resize',aa);k.subscribe('resize',aa);h.subscribeOnce('sidebar/initialized',aa,h.SUBSCRIBE_NEW);j.addListener(function(){return this._recalculateTabs(true);}.bind(this));this._recalculateWidth();this._initialized=true;}Object.assign(y.prototype,i,{_root:null,_initialized:false,_availableWidth:0,_maxShown:1,_viewState:null,_recalculateWidth:function(){var z=y._getAvailableDockWidth(this._root),aa=Math.max(1,Math.floor(z/x())),ba=aa!=this._maxShown;if(!this._viewState||ba||z<=this._viewState.usedWidth||z>this._viewState.widthToShowNext){this._availableWidth=z;this._maxShown=aa;this._viewState=null;this._recalculateTabs(ba);}},_onTabsChanged:function(){if(this._initialized){this.inform('tabs-changed');this.inform('max-to-show-changed',this._maxShown);this.inform('max-to-show-change-completed');}},_recalculateTabs:function(z){var aa=y._getTabsToShow(j.get(),this._availableWidth);if(z||!q(this._viewState,aa)){this._viewState=aa;this._onTabsChanged();}},getMaxTabsToShow:function(){return this._maxShown;},checkWidth:function(){this._recalculateWidth();},hasRoomForRaisedTab:function(){return this._availableWidth-this._viewState.usedWidth>x();},getTabsToShow:function(){return JSON.parse(JSON.stringify(this._viewState.tabsToShow));},getShowingTabsOrder:function(){var z=j.get(),aa=this._viewState.tabsToShow;return z.tabs.filter(function(ba){return aa[ba.id];});},getRightmostHiddenTab:function(){var z=j.get(),aa=this._viewState.tabsToShow,ba=z.tabs.filter(function(da){return !aa[da.id];}),ca=ba.shift();return ca?ca.id:null;},getLeftmostVisibleTab:function(){var z=this.getShowingTabsOrder(),aa=z.pop();return aa?aa.id:null;},getRaisedVisibleTabs:function(){var z=[],aa=this.getShowingTabsOrder(),ba=aa.length;for(var ca=0;ca<ba;ca++)if(j.getTab(aa[ca].id).raised)z.push(aa[ca].id);return z;},shouldPromoteOnRaise:function(z){if(!this._viewState.tabsToShow[z])return true;if(this._viewState.nextToHide!=z)return false;var aa=j.getTab(z),ba=aa&&aa.raised;return !ba&&this._availableWidth-this._viewState.usedWidth<x()-w();}});Object.assign(y,{_getAvailableDockWidth:function(z){var aa=s.withoutScrollbars().width;aa-=p.getLeft()+p.getRight();aa-=50;var ba=n.byClass(z,'fbDock'),ca=l.find(ba,"._56ox"),da=ca?o.getElementDimensions(ca).x:0;aa-=da;var ea=l.scry(ba,"._56oy");da+=o.getElementDimensions(ea.pop()).x;var fa=o.getElementDimensions(ba),ga=fa.x-da;if(ga>v)v=ga;aa-=v;aa-=15;return Math.max(aa,0);},_getTabsToShow:function(z,aa){aa=Math.max(aa,x()+1);function ba(ra,sa){return ra.raised||!sa?x():w();}var ca=JSON.parse(JSON.stringify(z.tabs)),da=-1,ea=null;if(z.promoted)ca.forEach(function(ra,sa){if(ra.id===z.promoted){da=sa;ea=ra;}});var fa=0,ga=false,ha=0,ia=!ea;ca.forEach(function(ra,sa){var ta=ba(ra,ga);ga=ga||!ra.raised;ra.leftmostOffset=fa+ta;fa+=ta;if(ra.leftmostOffset<aa)ha++;ia|=sa==da;ra.alreadyPlacedPromoted=ia;});function ja(ra,sa,ta){var ua={};for(var va=0;va<sa;va++){var wa=ra[va];if(!wa.alreadyPlacedPromoted&&va==sa-1){ua[ta]=true;}else ua[wa.id]=true;}return ua;}var ka=ja(ca,ha,z.promoted),la=ja(ca,ha-1,z.promoted),ma=null;for(var na in ka)if(!la[na])ma=na;var oa=ca[ha-1],pa=oa?oa.leftmostOffset:0,qa=Infinity;if(ha<ca.length)qa=ca[ha].leftmostOffset;return {nextToHide:ma,tabsToShow:ka,usedWidth:pa,widthToShowNext:qa};}});f.exports=y;},null);
__d('ActorURI',['ActorURIConfig','URI'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={create:function(k,l){return new i(k).addQueryData(h.PARAMETER_ACTOR,l);}};j.PARAMETER_ACTOR=h.PARAMETER_ACTOR;f.exports=j;},null);
__d("ScriptPathState",["Arbiter"],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j,k,l,m=100,n={setIsUIPageletRequest:function(o){k=o;},setUserURISampleRate:function(o){l=o;},reset:function(){i=null;j=false;k=false;},_shouldUpdateScriptPath:function(){return j&&!k;},_shouldSendURI:function(){return Math.random()<l;},getParams:function(){var o={};if(n._shouldUpdateScriptPath()){if(n._shouldSendURI()&&i!==null)o.user_uri=i.substring(0,m);}else o.no_script_path=1;return o;}};h.subscribe("pre_page_transition",function(o,p){j=true;i=p.to.getUnqualifiedURI().toString();});f.exports=b.ScriptPathState=n;},null);
__d('AjaxPipeRequest',['Arbiter','AsyncRequest','BigPipe','CSS','DOM','Env','PageEvents','PageletSet','ScriptPathState','URI','ge','goOrReplace','performance','performanceAbsoluteNow'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();var v,w=0;function x(aa,ba){var ca=r(aa);if(!ca)return;if(!ba)ca.style.minHeight='100px';var da=o.getPageletIDs();for(var ea=0;ea<da.length;ea++){var fa=da[ea];if(l.contains(ca,fa))o.removePagelet(fa);}l.empty(ca);h.inform('pagelet/destroy',{id:null,root:ca});}function y(aa,ba){var ca=r(aa);if(ca&&!ba)ca.style.minHeight='100px';}function z(aa,ba){'use strict';this._uri=aa;this._query_data=ba;this._request=new i();this._canvas_id=null;this._allow_cross_page_transition=true;this._arbiter=new h();this._requestID=w++;}z.prototype.setCanvasId=function(aa){'use strict';this._canvas_id=aa;return this;};z.prototype.setURI=function(aa){'use strict';this._uri=aa;return this;};z.prototype.setData=function(aa){'use strict';this._query_data=aa;return this;};z.prototype.getData=function(aa){'use strict';return this._query_data;};z.prototype.setAllowCrossPageTransition=function(aa){'use strict';this._allow_cross_page_transition=aa;return this;};z.prototype.setAppend=function(aa){'use strict';this._append=aa;return this;};z.prototype.send=function(){'use strict';this._arbiter.inform(n.AJAXPIPE_SEND,{rid:this._requestID,quickling:!!this._isQuickling,ts:u()},h.BEHAVIOR_PERSISTENT);var aa={ajaxpipe:1,ajaxpipe_token:m.ajaxpipe_token};Object.assign(aa,p.getParams());p.reset();this._request.setOption('useIframeTransport',true).setURI(this._uri).setData(Object.assign(aa,this._query_data)).setPreBootloadHandler(this._preBootloadHandler.bind(this)).setInitialHandler(this._onInitialResponse.bind(this)).setHandler(this._onResponse.bind(this)).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(this._allow_cross_page_transition).setAllowIrrelevantRequests(this._allowIrrelevantRequests);if(this._automatic){this._relevantRequest=v;}else v=this._request;if(this._isQuickling){var ba=t.clearResourceTimings||t.webkitClearResourceTimings;if(ba)ba.call(t);}this._request.send();return this;};z.prototype._preBootloadFirstResponse=function(aa){'use strict';return false;};z.prototype._fireDomContentCallback=function(){'use strict';this._arbiter.inform(n.AJAXPIPE_DOMREADY,true,h.BEHAVIOR_STATE);};z.prototype._fireOnloadCallback=function(){'use strict';this._arbiter.inform(n.AJAXPIPE_ONLOAD,{lid:this.pipe.lid,rid:this._requestID,ts:u()},h.BEHAVIOR_STATE);};z.prototype._isRelevant=function(aa){'use strict';return this._request==v||this._automatic&&this._relevantRequest==v||this._jsNonBlock||v&&v._allowIrrelevantRequests;};z.prototype._preBootloadHandler=function(aa){'use strict';var ba=aa.getPayload();if(!ba||ba.redirect||!this._isRelevant(aa))return false;var ca=false;if(aa.is_first){!this._append&&!this._displayCallback&&x(this._canvas_id,this._constHeight);ca=this._preBootloadFirstResponse(aa);this.pipe=new j({arbiter:this._arbiter,rootNodeID:this._canvas_id,lid:this._request.lid,rid:this._requestID,isAjax:true,domContentCallback:this._fireDomContentCallback.bind(this),onloadCallback:this._fireOnloadCallback.bind(this),domContentEvt:n.AJAXPIPE_DOMREADY,onloadEvt:n.AJAXPIPE_ONLOAD,jsNonBlock:this._jsNonBlock,automatic:this._automatic,displayCallback:this._displayCallback,allowIrrelevantRequests:this._allowIrrelevantRequests});}return ca;};z.prototype._redirect=function(aa){'use strict';if(aa.redirect){if(aa.force||!this.isPageActive(aa.redirect)){var ba=['ajaxpipe','ajaxpipe_token'].concat(this.getSanitizedParameters());s(window.location,new q(aa.redirect).removeQueryData(ba),true);}else{var ca=b.PageTransitions;ca.go(aa.redirect,true);}return true;}else return false;};z.prototype.isPageActive=function(aa){'use strict';return true;};z.prototype.getSanitizedParameters=function(){'use strict';return [];};z.prototype._versionCheck=function(aa){'use strict';return true;};z.prototype._onInitialResponse=function(aa){'use strict';var ba=aa.getPayload();if(!this._isRelevant(aa))return false;if(!ba)return true;if(this._redirect(ba)||!this._versionCheck(ba))return false;return true;};z.prototype._processFirstResponse=function(aa){'use strict';var ba=aa.getPayload();if(r(this._canvas_id)&&ba.canvas_class!=null)k.setClass(this._canvas_id,ba.canvas_class);};z.prototype.setFirstResponseCallback=function(aa){'use strict';this._firstResponseCallback=aa;return this;};z.prototype.setFirstResponseHandler=function(aa){'use strict';this._processFirstResponse=aa;return this;};z.prototype._onResponse=function(aa){'use strict';var ba=aa.payload;if(!this._isRelevant(aa))return i.suppressOnloadToken;if(aa.is_first){this._processFirstResponse(aa);this._firstResponseCallback&&this._firstResponseCallback();ba.provides=ba.provides||[];ba.provides.push('uipage_onload');}if(ba){if('content' in ba.content&&this._canvas_id!==null){if(this._append)ba.append=this._canvas_id;var ca=ba.content.content;delete ba.content.content;ba.content[this._canvas_id]=ca;}if(ba.secondFlushResources){this.pipe.setSecondFlushResources(ba.secondFlushResources);}else this.pipe.onPageletArrive(ba);}if(aa.is_last)y(this._canvas_id,this._constHeight);return i.suppressOnloadToken;};z.prototype.setNectarModuleDataSafe=function(aa){'use strict';this._request.setNectarModuleDataSafe(aa);return this;};z.prototype.setFinallyHandler=function(aa){'use strict';this._request.setFinallyHandler(aa);return this;};z.prototype.setErrorHandler=function(aa){'use strict';this._request.setErrorHandler(aa);return this;};z.prototype.setTransportErrorHandler=function(aa){'use strict';this._request.setTransportErrorHandler(aa);return this;};z.prototype.abort=function(){'use strict';this._request.abort();if(v==this._request)v=null;this._request=null;return this;};z.prototype.setJSNonBlock=function(aa){'use strict';this._jsNonBlock=aa;return this;};z.prototype.setAutomatic=function(aa){'use strict';this._automatic=aa;return this;};z.prototype.setDisplayCallback=function(aa){'use strict';this._displayCallback=aa;return this;};z.prototype.setConstHeight=function(aa){'use strict';this._constHeight=aa;return this;};z.prototype.setAllowIrrelevantRequests=function(aa){'use strict';this._allowIrrelevantRequests=aa;return this;};z.prototype.getAsyncRequest=function(){'use strict';return this._request;};z.getCurrentRequest=function(){'use strict';return v;};z.setCurrentRequest=function(aa){'use strict';v=aa;};f.exports=z;},null);
__d("UIPageletContentCache",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={cache:{},getContent:function(i){if(i in this.cache)return this.cache[i];return null;},setContent:function(i,j){this.cache[i]=j;}};f.exports=h;},null);
__d('UIPagelet',['ActorURI','AjaxPipeRequest','AsyncRequest','DOM','HTML','ScriptPathState','UIPageletContentCache','URI','emptyFunction','ge','isElementNode'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();function s(t,u,v){'use strict';var w=t&&r(t)?t.id:t;this._id=w||null;this._element=q(t||k.create('div'));this._src=u||null;this._context_data=v||{};this._data={};this._handler=p;this._request=null;this._use_ajaxpipe=false;this._use_post_request=false;this._is_bundle=true;this._allow_cross_page_transition=false;this._append=false;this._cache_content=false;this._content_cache_key='';}s.prototype.getElement=function(){'use strict';return this._element;};s.prototype.setHandler=function(t){'use strict';this._handler=t;return this;};s.prototype.go=function(t,u){'use strict';if(arguments.length>=2||typeof t=='string'){this._src=t;this._data=u||{};}else if(arguments.length==1)this._data=t;this.refresh();return this;};s.prototype.setAllowCrossPageTransition=function(t){'use strict';this._allow_cross_page_transition=t;return this;};s.prototype.setBundleOption=function(t){'use strict';this._is_bundle=t;return this;};s.prototype.setErrorHandler=function(t){'use strict';this._errorHandler=t;return this;};s.prototype.setTransportErrorHandler=function(t){'use strict';this.transportErrorHandler=t;return this;};s.prototype.refresh=function(){'use strict';if(this._use_ajaxpipe){m.setIsUIPageletRequest(true);this._request=new i();this._request.setCanvasId(this._id).setAppend(this._append).setConstHeight(this._constHeight).setJSNonBlock(this._jsNonblock).setAutomatic(this._automatic).setDisplayCallback(this._displayCallback).setFinallyHandler(this._finallyHandler).setAllowIrrelevantRequests(this._allowIrrelevantRequests);if(this._errorHandler)this._request.setErrorHandler(this._errorHandler);if(this.transportErrorHandler)this._request.setTransportErrorHandler(this.transportErrorHandler);}else{if(this._cache_content){var t=n.getContent(this._content_cache_key);if(t!==null){this.handleContent(t);return this;}}var u=function(y){this._request=null;var z=l(y.getPayload());this.handleContent(z);if(this._cache_content)n.setContent(this._content_cache_key,z);}.bind(this),v=this._displayCallback,w=this._finallyHandler;this._request=new j().setMethod('GET').setReadOnly(true).setOption('bundle',this._is_bundle).setHandler(function(y){if(v){v(u.bind(null,y));}else u(y);w&&w();});if(this._errorHandler)this._request.setErrorHandler(this._errorHandler);if(this.transportErrorHandler)this._request.setTransportErrorHandler(this.transportErrorHandler);if(this._use_post_request)this._request.setMethod('POST');}var x=babelHelpers['extends']({},this._context_data,this._data);if(this._actorID)x[h.PARAMETER_ACTOR]=this._actorID;this._request.setURI(this._src).setAllowCrossPageTransition(this._allow_cross_page_transition).setData({data:JSON.stringify(x)}).send();return this;};s.prototype.handleContent=function(t){'use strict';if(this._append){k.appendContent(this._element,t);}else k.setContent(this._element,t);this._handler();};s.prototype.cancel=function(){'use strict';if(this._request)this._request.abort();};s.prototype.setUseAjaxPipe=function(t){'use strict';this._use_ajaxpipe=!!t;return this;};s.prototype.setUsePostRequest=function(t){'use strict';this._use_post_request=!!t;return this;};s.prototype.setAppend=function(t){'use strict';this._append=!!t;return this;};s.prototype.setJSNonBlock=function(t){'use strict';this._jsNonblock=!!t;return this;};s.prototype.setAutomatic=function(t){'use strict';this._automatic=!!t;return this;};s.prototype.setDisplayCallback=function(t){'use strict';this._displayCallback=t;return this;};s.prototype.setConstHeight=function(t){'use strict';this._constHeight=!!t;return this;};s.prototype.setFinallyHandler=function(t){'use strict';this._finallyHandler=t;return this;};s.prototype.setAllowIrrelevantRequests=function(t){'use strict';this._allowIrrelevantRequests=t;return this;};s.prototype.setActorID=function(t){'use strict';this._actorID=t;return this;};s.prototype.setCacheContent=function(t){'use strict';this._cache_content=t;return this;};s.prototype.setContentCacheKey=function(t){'use strict';this._content_cache_key=t;return this;};s.appendToInline=function(t,u){'use strict';var v=q(t),w=q(u);if(v&&w){while(w.firstChild)k.appendContent(v,w.firstChild);k.remove(w);}};s.loadFromEndpoint=function(t,u,v,w){'use strict';w=w||{};var x='/ajax/pagelet/generic.php/'+t;if(w.intern)x='/intern'+x;var y=new o(x.replace(/\/+/g,'/'));if(w.subdomain)y.setSubdomain(w.subdomain);var z=false,aa='';if(w.contentCacheKey){z=true;aa=t+','+String(w.contentCacheKey);}var ba=new s(u,y,v).setUseAjaxPipe(w.usePipe).setBundleOption(w.bundle!==false).setAppend(w.append).setJSNonBlock(w.jsNonblock).setAutomatic(w.automatic).setDisplayCallback(w.displayCallback).setConstHeight(w.constHeight).setAllowCrossPageTransition(w.crossPage).setFinallyHandler(w.finallyHandler||p).setErrorHandler(w.errorHandler).setTransportErrorHandler(w.transportErrorHandler).setAllowIrrelevantRequests(w.allowIrrelevantRequests).setActorID(w.actorID).setCacheContent(z).setContentCacheKey(aa).setUsePostRequest(w.usePostRequest);w.handler&&ba.setHandler(w.handler);ba.go();return ba;};s.loadFromEndpointBatched=function(t,u,v){'use strict';var w=t.slice(0,v),x=t.slice(v);if(x.length>0){var y=w[w.length-1],z=p;if(y.options&&y.options.finallyHandler)z=y.options.finallyHandler;y.options=babelHelpers['extends']({},y.options,{finallyHandler:function(){z();window.setTimeout(function(){s.loadFromEndpointBatched(x,u,v);},1);}});}w.forEach(function(aa){s.loadFromEndpoint(aa.controller,aa.target_element,aa.data,babelHelpers['extends']({},aa.options,u,{bundle:true}));});};f.exports=s;},null);
__d('ChatApp',['Promise','CSS','ChatPerfInstrumentation','DOM','JSLogger','React','ReactDOM','TimeSlice','csx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q={chatOpenTabImpl:undefined,tabsViewport:undefined,tabViewCoordinator:undefined,tabController:undefined,init:function(v,w,x){if(this._isInitialized){l.create('chat_app').error('repeated_init');return;}this._rootElem=v;h.resolve().then(function(){return j.init();}).then(o.guard(function(){return r();},'ChatApp stores')).then(o.guard(function(){return s(x);},'ChatApp data')).then(o.guard(function(){return t(w,v);},'ChatApp UI')).then(o.guard(function(){return u();},'ChatApp Hotlike sound')).done(function(){this._isInitialized=this._isLoaded=true;j.logTTI();}.bind(this));},isInitialized:function(){return !!this._isInitialized;},isHidden:function(){return !!(!this._isInitialized||this._isHidden);},hide:function(){if(this.isHidden())return;i.hide(this._rootElem);this._isHidden=true;},unhide:function(){if(this._isInitialized){if(this._isHidden){i.show(this._rootElem);this.tabsViewport.checkWidth();e(['Dock'],function(v){v.resizeAllFlyouts();});this._isHidden=false;}}else if(!this._isLoaded){e(['UIPagelet'],function(v){v.loadFromEndpoint('ChatTabsPagelet','ChatTabsPagelet');v.loadFromEndpoint('BuddylistPagelet','BuddylistPagelet');});this._isLoaded=true;}}};function r(){return new h(function(v){e(['MercuryBlockedParticipants','MercuryChannelHandler','MercuryDelayedRoger','MercuryDeliveryReceipts','MercuryDeliveryState','MercuryParticipants','MercuryStateCheck','MercuryThreads','MercuryUnreadState','MercuryUnseenState','MercurySyncDeltaHandler','P2PSendMoneyDialogStore'],function(w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){w.get();x.get().turnOn();y;z.get();aa.get();ba;da.get();fa.get();ea.get();ca.get();ga.get();v();});});}function s(v){return new h(function(w){e(['MercuryServerPayloadPreprocessor'],function(x){x.get().handleUpdate(v);w();});});}function t(v,w){return new h(function(x){e(['ChatDispatcher','ChatTabController','ChatTabModel','ChatTabViewCoordinator','TabsViewport','MNCommerceDialogContainer.react','P2PDialogContainer.react','FBRTCMessageHandler','ChatOpenTabImpl'],function(y,z,aa,ba,ca,da,ea,fa,ga){y.explicitlyRegisterStore(aa);q.tabsViewport=new ca(v);q.tabViewCoordinator=new ba(v,q.tabsViewport);q.tabController=new z(q.tabsViewport);fa.init();var ha=k.find(w,"._26-x");n.render(m.createElement(da,null),ha);var ia=k.find(w,"._26-y");n.render(m.createElement(ea,null),ia);q.chatOpenTabImpl=ga;x();});});}function u(){return new h(function(v){e(['HotLikeSound','ChatOptions'],function(w,x){w.setCheckSoundEnabledFunc(function(){return x.getSetting('sound');});v();});});}f.exports=q;},null);
__d('ChatOrderedListHover',['ArbiterMixin','CSS','ErrorUtils','Event','LayerHideOnBlur','Parent','csx','cx','mixin','setTimeoutAcrossTransitions','shield'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s,t;if(c.__markCompiled)c.__markCompiled();function u(x){i.addClass(x,'fetching');}function v(x){i.removeClass(x,'fetching');}s=babelHelpers.inherits(w,p(h));t=s&&s.prototype;function w(x){'use strict';t.constructor.call(this);this._orderedList=x;this._root=x.getRoot();k.listen(this._root,'mouseover',this._mouseOver.bind(this));k.listen(this._root,'mouseleave',this._mouseLeave.bind(this));x.subscribe('click',r(this._hide,this));}w.prototype._mouseOver=function(event){'use strict';if(this._paused)return;var x=event.getTarget(),y=m.bySelector(x,"._42fz")||m.bySelector(x,"._5a58");y&&this._setActiveItem(y);};w.prototype._mouseLeave=function(event){'use strict';this._setActiveItem(null);};w.prototype._clearTimeouts=function(){'use strict';this._showTimeout&&clearTimeout(this._showTimeout);this._showTimeout=null;this._hideTimeout&&clearTimeout(this._hideTimeout);this._hideTimeout=null;};w.prototype._hide=function(){'use strict';if(this._showingDialog){this._showingDialog.hide();this._showingDialog=null;this._showingID=null;}};w.prototype._show=function(){'use strict';var x=this.getActiveID(),y=false;if(this._defaultHandler){y=true;j.applyWithGuard(this._defaultHandler,{},[x,this]);}if(y&&this._showingID!=this.getActiveID())u(this._activeItem);};w.prototype._setActiveItem=function(x){'use strict';if(x!=this._activeItem){this._clearTimeouts();this._activeItem&&v(this._activeItem);if(x){this._activeItem=x;var y=this._showingDialog?0:600;this._showTimeout=q(function(){return this._show();}.bind(this),y);this.inform('hover');}else{this._activeItem=null;this._hideTimeout=q(function(){return this._hide();}.bind(this),10);this.inform('leave');}}};w.prototype.registerDefault=function(x){'use strict';this._defaultHandler=x;};w.prototype.getActiveID=function(){'use strict';var x=this._activeItem&&this._orderedList.getUserForNode(this._activeItem);return x||null;};w.prototype.showHovercard=function(x,y){'use strict';if(x==this.getActiveID()&&x!=this._showingID){this._clearTimeouts();v(this._activeItem);this._hide();this._showingDialog=y;this._showingID=x;var z=y.subscribe('mouseenter',this._setActiveItem.bind(this,this._activeItem)),aa=y.subscribe('mouseleave',function(){z.unsubscribe();this._setActiveItem(null);}.bind(this)),ba=y.subscribe('hide',function(){this.inform('hovercard_hide');z.unsubscribe();aa.unsubscribe();ba.unsubscribe();}.bind(this));y.enableBehavior(l).setContext(this._activeItem).setPosition('left').show();this.inform('hovercard_show');}};Object.assign(w.prototype,{_root:null,_activeItem:null,_hideTimeout:null,_showTimeout:null,_showingDialog:null,_showingID:null,_defaultHandler:null});f.exports=w;},null);
__d("ChatSidebarConstants",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={LITESTAND_CLASSIC_SIZE:32,IMAGE_SIZE:32};Object.assign(h,{getImageSize:function(i){if(i===false)return h.IMAGE_SIZE;return h.LITESTAND_CLASSIC_SIZE;},getItemHeight:function(){return h.IMAGE_SIZE+8;}});f.exports=h;},null);
__d('Timestamp.react',['LiveTimer','React','ReactDOM','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=i.PropTypes,m=i.createClass({displayName:'Timestamp',propTypes:{autoUpdate:l.bool},getDefaultProps:function(){return {autoUpdate:false};},componentDidMount:function(){if(this.props.autoUpdate)h.addTimeStamps(j.findDOMNode(this));},componentDidUpdate:function(n,o){if(this.props.autoUpdate&&this.props.time!==n.time)h.loop();},componentWillUnmount:function(){h.removeTimestamp(j.findDOMNode(this));},render:function(){var n=h.renderRelativeTimeToServer(this.props.time,this.props.shorten,this.props.minimize);return (i.createElement('abbr',babelHelpers['extends']({},this.props,{className:k(this.props.className,"livetimestamp"),title:this.props.verbose,'data-utime':this.props.time,'data-minimize':this.props.minimize?true:null,'data-shorten':this.props.shorten?true:null}),n.text.toString()||this.props.text));}});f.exports=m;},null);
__d('AbstractBadge.react',['React','cx','invariant','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes;function m(o){return parseInt(o,10)===o;}var n=h.createClass({displayName:'AbstractBadge',propTypes:{count:l.number.isRequired,maxcount:l.number},getDefaultProps:function(){return {maxcount:20};},render:function(){var o=this.props.count,p=this.props.maxcount;!m(o)?j(0):undefined;!m(p)?j(0):undefined;var q="_51lp"+(o>p?' '+"_51lr":'')+(o===0?' '+"hidden_elem":'');return (h.createElement('span',babelHelpers['extends']({},this.props,{className:k(this.props.className,q)}),o>p?p+'+':o));}});f.exports=n;},null);
__d('XUIBadge.react',['React','AbstractBadge.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=h.createClass({displayName:'XUIBadge',propTypes:{type:l.oneOf(['regular','special'])},getDefaultProps:function(){return {type:'regular'};},render:function(){var n=this.props.type,o="_5ugh"+(n==='regular'?' '+"_5ugf":'')+(n==='special'?' '+"_5ugg":'');return (h.createElement(i,babelHelpers['extends']({},this.props,{className:k(this.props.className,o),type:null})));}});f.exports=m;},null);
__d('xuiglyph',['ix'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j){if(typeof j==='string')j={name:j};var k=babelHelpers['extends']({name:undefined,shade:'dark',size:'small'},j);return h.call(null,k.name+':'+k.shade+':'+k.size);}f.exports=i;},null);
__d('ChatSidebarItem.react',['AvailableListConstants','XUIBadge.react','ChatConfig','ChatSidebarConstants','Image.react','Link.react','ReactComponentWithPureRenderMixin','React','SplitImage.react','TextWithEmoticons.react','Timestamp.react','cx','ix','xuiglyph'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();var v=o.PropTypes,w=j.get('divebar_rounded_profile',false),x=9,y=o.createClass({displayName:'ChatSidebarItem',mixins:[n],propTypes:{image:v.string,images:v.array,isPlayingGame:v.bool,birthday:v.bool,context:v.string,href:v.string,imageSize:v.number,name:v.string,nameCanHaveEmoji:v.bool,onClick:v.func,status:v.number,statusTime:v.string,unreadCount:v.number,isMessengerOnlyContact:v.bool},render:function(){var z="_55ln"+(this.props.context?' '+"_55lo":'')+(this.props.unreadCount?' '+"_5bom":'')+(w?' '+"_qhr":''),aa="_55lr";return (o.createElement(m,{className:z,href:{url:this.props.href},onClick:this.props.onClick,rel:'ignore'},o.createElement('div',{className:"_55lp"},o.createElement('div',{className:"_56p9"},o.createElement(p,{size:this.props.imageSize||k.IMAGE_SIZE,srcs:this.props.image||this.props.images}),o.createElement('div',{className:"_568w"})),o.createElement('div',{className:"_5bon"},this.renderPlayingGame(),this.renderBirthday(),this.renderUnreadCount(),this.renderStatus()),o.createElement('div',{className:aa},this.renderName()),o.createElement('div',{className:"_55ls"},this.props.context))));},renderName:function(){if(this.props.nameCanHaveEmoji){return (o.createElement(q,{renderEmoticons:true,renderEmoji:true,text:this.props.name}));}else return this.props.name;},renderUnreadCount:function(){var z=this.props.unreadCount;if(!z)return null;return (o.createElement(i,{count:z,maxcount:x,type:'regular'}));},renderStatus:function(){var z=this.getStatusSrc();if(!z&&!this.props.statusTime)return null;var aa=z?o.createElement(l,{className:"_568_",src:z}):null,ba=true,ca=this.props.unreadCount||0;if(ca>0){aa=this.props.statusTime?null:aa;ba=false;}return (o.createElement('div',{className:"_568z"},ba?this.renderLastActiveTime():null,aa));},renderLastActiveTime:function(){return (o.createElement('div',{className:"_568-"},this.props.statusTime));},renderBirthday:function(){if(!this.props.birthday)return null;var z=t('/images/gifts/icons/cake_icon.png');return (o.createElement(l,{className:"_5dv3",src:z}));},renderPlayingGame:function(){if(this.props.statusTime||this.props.birthday||!this.props.isPlayingGame)return null;return (o.createElement('div',{className:"_46b2"},o.createElement(l,{className:"_46b3",src:u({name:'games',size:'small'})})));},getStatusSrc:function(){if(this.props.isMessengerOnlyContact)return t('/images/chat/sidebar/buddylist_nub/phone.png');switch(this.props.status){case h.ACTIVE:return t('/images/chat/sidebar/buddylist_nub/greenDot.png');case h.MOBILE:return t('/images/chat/sidebar/buddylist_nub/phone.png');}return null;}});f.exports=y;},null);
__d('Tooltip.react',['React','TooltipMixin'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.PropTypes,k=h.createClass({displayName:'Tooltip',propTypes:{display:j.oneOf(['inline','block'])},getDefaultProps:function(){return {display:'inline'};},mixins:[i],render:function(){if(this.props.display==='block')return (h.createElement('div',this.props,this.props.children));return h.createElement('span',this.props,this.props.children);}});f.exports=k;},null);
__d('ChatSidebarThread.react',['ChatSidebarItem.react','ChatOpenTab','MercuryParticipantListRenderer','WebMessengerPermalinkConstants','React','Tooltip.react','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=l.PropTypes,p=10,q=l.createClass({displayName:'ChatSidebarThread',propTypes:{image:o.string,imageSize:o.number,name:o.string,participants:o.array,numOtherParticipants:o.number,referrer:o.string,status:o.number,threadFBID:o.string,unreadCount:o.number},_renderParticipants:function(){var t=[],u=this.props.participants.length,v=this.props.numOtherParticipants,w=Math.min(p,u);if(v-w==1)w--;for(var x=0;x<w;x++){var y=this.props.participants[x];t.push(l.createElement('li',{key:y.id},y.name));}if(w<v)t.push(l.createElement('li',{key:'more-participants'},n._("and {num} more...",[n.param('num',v-w)])));return (l.createElement('ul',null,t));},render:function(){var t=this.props.name,u=r(this.props.threadFBID,this.props.participants,this.props.numOtherParticipants),v=t?u:undefined,w=k.getURIPathForThreadID(this.props.threadFBID),x=s(this.props.image,this.props.participants),y=t?t:u;return (l.createElement(m,{display:'block',position:'above',tooltip:this._renderParticipants()},l.createElement(h,{context:v,href:w,imageSize:this.props.imageSize,image:this.props.image,images:x,name:y,nameCanHaveEmoji:true,onClick:this._openTab,referrer:this.props.referrer,status:this.props.status,unreadCount:this.props.unreadCount})));},_openTab:function(t){t.preventDefault();i.openThread(this.props.threadFBID,this.props.referrer);}});function r(t,u,v){return new j().setIsNewThread(!t).setUseShortName(true).setTotalParticipantCount(v).renderParticipantList(u);}function s(t,u){if(t)return null;return u.map(function(v){return v.image_src;}).filter(function(v){return v;});}f.exports=q;},null);
__d('ChatSidebarGroupThreadsGroup.react',['ChatSidebarThread.react','ChatSidebarSections','ChatSidebarConstants','PresencePrivacy','PresenceStatus','React','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=m.PropTypes,p=m.createClass({displayName:'ChatSidebarGroupThreadsGroup',propTypes:{groups:o.array.isRequired,isDisconnected:o.bool},render:function(){return (m.createElement('ul',null,this.props.groups.map(this._renderGroup)));},_renderGroup:function(q){var r=q.mercury_thread.participants,s=this.props.isDisconnected||k.isUserOffline();return (m.createElement('li',{className:"_42fz"+(s?' '+"_570-":''),'data-id':q.uid,key:q.uid},m.createElement(h,{image:q.mercury_thread.image_src,imageSize:j.getImageSize(),name:q.mercury_thread.name,participants:q.participants_to_render,numOtherParticipants:r.length-1,referrer:i.ORDERED_LIST,status:l.getGroup(r),threadFBID:q.uid})));}});f.exports=p;},null);
__d('ChatSidebarHeader.react',['ReactComponentWithPureRenderMixin','React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=i.createClass({displayName:'ReactChatSidebarHeader',mixins:[h],render:function(){return (i.createElement('div',babelHelpers['extends']({},this.props,{className:k(this.props.className,"_55ob")}),i.createElement('div',{className:"_55oc"},this.props.children)));}});f.exports=l;},null);
__d('ChatSidebarUser.react',['ChatOpenTab','ChatSidebarItem.react','WebMessengerPermalinkConstants','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=l.PropTypes,n=l.createClass({displayName:'ChatSidebarUser',mixins:[k],propTypes:{birthday:m.bool,image:m.string,imageSize:m.number,isPlayingGame:m.bool,name:m.string,sectionName:m.string.isRequired,slot:m.number,status:m.number,statusTime:m.string,unreadCount:m.number,userID:m.string.isRequired,isMessengerOnlyContact:m.bool},_openTab:function(event){h.openUserTab(this.props.userID,this.props.sectionName,{global_slot:this.props.slot});return event.preventDefault();},render:function(){var o=j.getURIPathForIDOrVanity(this.props.userID);return (l.createElement(i,{onClick:this._openTab,href:o,imageSize:this.props.imageSize,image:this.props.image,isPlayingGame:this.props.isPlayingGame,name:this.props.name,nameCanHaveEmoji:false,status:this.props.status,birthday:this.props.birthday,statusTime:this.props.statusTime,context:this.props.context,unreadCount:this.props.unreadCount,isMessengerOnlyContact:this.props.isMessengerOnlyContact}));}});f.exports=n;},null);
__d('ChatSidebarUserGroup.react',['Promise','AvailableList','AvailableListConstants','CanvasGKs','ChatSidebarSections','ChatSidebarUser.react','LastActiveTimes','PresencePrivacy','PresenceStatus','React','ShortProfiles','SubscriptionsHandler','createCancelableFunction','cx','requireWeak','shield'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){'use strict';if(c.__markCompiled)c.__markCompiled();var x=q.PropTypes,y=new h(function(ca){v('ChatUnreadCount',function(da){z=da.get();ca(z);});}),z=undefined,aa=Object.keys(l).map(function(ca){return l[ca];}),ba=q.createClass({displayName:'ChatSidebarUserGroup',propTypes:{ids:x.array.isRequired,isDisconnected:x.bool,loadExtras:x.bool,sectionName:x.oneOf(aa).isRequired},getInitialState:function(){return {userData:[]};},componentWillMount:function(){this._subscriptions=new s();this._updateProfiles=t(function(ca,da){var ea=ca.map(function(fa){return da[fa];});this.setState({userData:ea});}.bind(this));this._subscriptions.addSubscriptions(this._updateProfiles);this.componentWillReceiveProps(this.props);},componentDidMount:function(){this._subscriptions.addSubscriptions(i.subscribe(j.ON_AVAILABILITY_CHANGED,this._onAvailabilityChanged));y.done(function(ca){this._subscriptions.addSubscriptions(ca.subscribe('unread-count-changed',w(this.forceUpdate,this)));}.bind(this));},componentWillUnmount:function(){this._subscriptions.release();},componentWillReceiveProps:function(ca){r.getMulti(ca.ids,this._updateProfiles.bind(this,ca.ids));this.setState({userData:ca.ids.map(function(da){return r.getNow(da);}).filter(function(da){return da;})});},render:function(){return (q.createElement('ul',this.props,this.state.userData.map(this._renderProfile)));},_renderProfile:function(ca,da){if(ca.id===0)return null;var ea=p.get(ca.id);if(ea!==j.ACTIVE)ea=null;var fa=null;if(k.pg_chatproxy_canvas_buddy_icon)fa=p.isPlayingCanvasGameUser(ca.id);var ga=ea!==j.ACTIVE?n.getShortDisplay(ca.id):null,ha=this.props.isDisconnected||!o.allows(ca.id);return (q.createElement('li',{className:"_42fz"+(ha?' '+"_570-":''),'data-id':ca.id,key:ca.id},q.createElement(m,{birthday:ca.is_birthday,image:ca.thumbSrc,imageSize:this.props.imageSize,isPlayingGame:fa,name:ca.name,sectionName:this.props.sectionName,slot:da,status:ea,statusTime:ga,userID:ca.id,unreadCount:this._getUnreadCountForUID(ca.id),isMessengerOnlyContact:ca.is_messenger_only})));},_getUnreadCountForUID:function(ca){if(!z)return null;return z.getUnreadCountForUID(ca);},_onAvailabilityChanged:function(ca,da){if(!da||this.props.ids.indexOf(da)!==-1)this.forceUpdate();}});f.exports=ba;},null);
__d('ChatSidebarOrderedList.react',['Animation','ChatConfig','Bootloader','ChatQuietLinks','ChatSidebarConstants','ChatSidebarGroupThreadsGroup.react','ChatSidebarHeader.react','ChatSidebarSections','ChatSidebarUserGroup.react','PresencePrivacy','ReactComponentWithPureRenderMixin','React','ReactDOM','Run','Scroll','SubscriptionsHandler','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){if(c.__markCompiled)c.__markCompiled();var z=s.PropTypes,aa=s.createClass({displayName:'ChatSidebarOrderedList',propTypes:{topUsers:z.array.isRequired,availableUsers:z.array.isRequired,isSidebar:z.bool.isRequired,scrollContainer:z.object,groups:z.array.isRequired},getInitialState:function(){return {renderBelowFold:false,isDisconnected:false};},componentDidMount:function(){k.nukeLinks(t.findDOMNode(this));this._subscriptions=new w();u.onAfterLoad(function(){this.setState({renderBelowFold:true});this._bootloadChannelSubscription();}.bind(this));},componentWillUnmount:function(){this._subscriptions.release();},_scrollToSeparator:function(ba){if(!this.props.scrollContainer)return;var ca=this.props.scrollContainer.scrollHeight,da=this.props.scrollContainer.clientHeight,ea=v.getTop(this.props.scrollContainer),fa=Math.min(ba.offsetTop,ca-da);if(ea!==fa){var ga=Math.abs(fa-ea)/this.props.scrollContainer.clientHeight*500;new h(this.props.scrollContainer).to('scrollTop',fa).ease(h.ease.end).duration(ga).go();}},_renderOfflineSection:function(){var ba=l.getImageSize(this.props.isSidebar),ca=this.props.topUsers.filter(function(ea){return !q.allows(ea);});ca.splice(-2);var da=s.createElement('a',{ajaxify:'/ajax/chat/privacy/settings_dialog.php?ref=whitelist_separator',href:'#',rel:'dialog'},y._("Edit"));return [s.createElement(n,{key:'usersSeparator1'},y._("MORE FRIENDS")),s.createElement(n,{className:"_5j9-",key:'usersSeparator2'},y._("These friends can't see you on chat. {=link}",[y.param('=link',da)])),s.createElement(p,{ids:ca,isDisconnected:this.state.isDisconnected,imageSize:ba,key:o.OFFLINE_USERS,loadExtras:this.state.renderBelowFold,sectionName:o.OFFLINE_USERS})];},_renderOnlineSection:function(){if(this.props.availableUsers.length===0)return null;if(!this.state.renderBelowFold){var ba=l.getItemHeight();return (s.createElement('div',{key:o.MORE_ONLINE_FRIENDS,style:{height:ba*this.props.availableUsers.length}}));}var ca=l.getImageSize(this.props.isSidebar),da=y._("{MORE ONLINE FRIENDS} ({=count})",[y.param('MORE ONLINE FRIENDS',y._("MORE FRIENDS")),y.param('=count',this.props.availableUsers.length)]),ea=s.createElement(p,{ids:this.props.availableUsers,imageSize:ca,key:o.MORE_ONLINE_FRIENDS,loadExtras:this.state.renderBelowFold,sectionName:o.MORE_ONLINE_FRIENDS});return [s.createElement(n,{ref:'usersSeparator',key:'usersSeparator',onClick:function(){return this._scrollToSeparator(t.findDOMNode(this.refs.usersSeparator));}.bind(this)},da),ea];},_renderGroupsSection:function(){if(this.props.groups.length===0)return null;var ba=this.state.isDisconnected||q.isUserOffline();return [s.createElement(n,{ref:'groupSeparator',key:'groupSeparator',className:ba?"_570-":'',onClick:function(){return this._scrollToSeparator(t.findDOMNode(this.refs.groupSeparator));}.bind(this)},y._("GROUP CONVERSATIONS")),s.createElement(m,{groups:this.props.groups,isDisconnected:this.state.isDisconnected,key:'group_threads_section',loadExtras:this.state.renderBelowFold})];},_renderFriendsSection:function(){var ba=l.getImageSize(this.props.isSidebar),ca=this.props.topUsers;if(q.getVisibility()==q.ONLINE)ca=this.props.topUsers.filter(function(da){return q.allows(da);});return [s.createElement(p,{key:o.ORDERED_LIST,ids:ca,imageSize:ba,loadExtras:this.state.renderBelowFold,sectionName:o.ORDERED_LIST})];},render:function(){var ba=q.getOnlinePolicy()==q.ONLINE_TO_WHITELIST&&q.getVisibility()?this._renderOfflineSection():this._renderOnlineSection(),ca=this._renderFriendsSection(),da=this._renderGroupsSection();return (s.createElement('div',null,ca,da,ba));},_bootloadChannelSubscription:function(){j.loadModules(["ChannelConnection"],function(ba){this._subscriptions.addSubscriptions(ba.subscribe([ba.CONNECTED,ba.RECONNECTING,ba.SHUTDOWN,ba.MUTE_WARNING,ba.UNMUTE_WARNING],function(){this.setState({isDisconnected:ba.disconnected()});}.bind(this)));}.bind(this));}});f.exports=aa;},null);
__d('ChatOrderedList',['Arbiter','ArbiterMixin','AvailableList','AvailableListConstants','CSS','ChatConfig','ChatHovercard','ChatOptions','ChatOrderedListHover','ChatSidebarConstants','ChatSidebarInboxConfig','ChatSidebarOrderedList.react','ChatVisibility','DOM','DataStore','Event','InitialChatFriendsList','JSLogger','Parent','PresenceOrderedList','PresencePrivacy','PresenceStatus','React','ReactDOM','createObjectFrom','csx','debounceAcrossTransitions','mixin','shield'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja){var ka,la;if(c.__markCompiled)c.__markCompiled();var ma=null;ka=babelHelpers.inherits(na,ia(i));la=ka&&ka.prototype;function na(oa,pa){'use strict';la.constructor.call(this);this._isSidebar=oa;this._root=pa;this._isVisible=false;this._excludedIds={};this._numTopFriends=5;this._groups=[];this._hoverController=null;this._isHovering=false;this._orderedList=u.find(this._root,'.fbChatOrderedList');w.listen(this._orderedList,'mouseover',function(){this._isHovering=true;}.bind(this));w.listen(this._orderedList,'mouseout',function(){this._isHovering=false;this._render();}.bind(this));this._scrollableOrderedList=z.byClass(this._root,'scrollableOrderedList');this._scrollableArea=z.byClass(this._root,'scrollable');if(this._isSidebar)new n(this);h.subscribe(y.DUMP_EVENT,function(qa,ra){ra.chat_lists=ra.chat_lists||{sorted_list:this.getSortedList(),available_list:aa.getAvailableSorted(),excluded_list:this._excludedIds};}.bind(this));ba.subscribe('privacy-user-presence-changed',ja(this._render,this));j.subscribe(k.ON_AVAILABILITY_CHANGED,ja(this._render,this));}na.prototype.getShowingUsers=function(){'use strict';return u.scry(this._root,"li._42fz,li._5a58").map(this.getUserForNode);};na.prototype.getUserForNode=function(oa){'use strict';return v.get(oa,'id')||v.get(oa,'serverthreadid');};na.prototype.getHoverController=function(){'use strict';if(!this._hoverController)this._hoverController=new p(this);return this._hoverController;};na.prototype.getItemHeight=function(){'use strict';return q.getItemHeight();};na.prototype.getRoot=function(){'use strict';return this._root;};na.prototype.getSortedList=function(){'use strict';return aa.getSorted(this._numTopFriends);};na.prototype.hide=function(){'use strict';if(!this._isVisible)return;this._isVisible=false;l.hide(this._scrollableOrderedList||this._root);this.inform('hide');};na.prototype.setNumTopFriends=function(oa,pa){'use strict';var qa=this._getGroups(),ra=oa-qa.length;if(ra>m.get('min_top_friends'))oa=ra;oa--;if(oa!==this._numTopFriends||qa.length!==this._groups.length){this._groups=qa;this._numTopFriends=oa;if(pa){this._renderOrderedList();}else this._render();}};na.prototype._renderOrderedList=function(){'use strict';if(!this._isVisible||this._isHovering)return;var oa=this.getSortedList(),pa=aa.getAvailableSorted(oa),qa=r.component;if(qa){ea.render(da.createElement(qa,{showCount:r.show_count,showPresence:r.show_presence,threadCount:this._numTopFriends}),this._orderedList);}else ea.render(da.createElement(s,{availableUsers:pa.toArray(),isSidebar:this._isSidebar,scrollContainer:this._scrollContainer,topUsers:oa.toArray(),groups:this._getGroups()}),this._orderedList);this.inform('render');};na.prototype._render=function(){'use strict';this._render=ha(this._renderOrderedList.bind(this),300);this._render();};na.prototype.show=function(){'use strict';if(this._isVisible)return;this._isVisible=true;l.show(this._scrollableOrderedList||this._root);this._render();this.inform('show');};na.prototype.isVisible=function(){'use strict';return this._isVisible;};na.prototype.setScrollContainer=function(oa){'use strict';if(u.contains(oa,this._root))this._scrollContainer=oa;};na.prototype._getGroups=function(){'use strict';if(!o.getSetting('hide_groups')){return x.groups||[];}else return [];};f.exports=na;},null);
__d('ChatSidebarComposeLink.react',['ChatOpenTab','Link.react','React','TooltipData','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';var m,n;if(c.__markCompiled)c.__markCompiled();m=babelHelpers.inherits(o,j.Component);n=m&&m.prototype;function o(p){n.constructor.call(this,p);}o.prototype.render=function(){var p=l._("New Message");return (j.createElement(i,babelHelpers['extends']({className:this.props.className,href:'#',onClick:this.$ChatSidebarComposeLink1},k.propsFor(p))));};o.prototype.$ChatSidebarComposeLink1=function(p){h.openEmptyTab(null,'sidebar');p.preventDefault();};f.exports=o;},null);
__d('ChatSidebar',['Arbiter','AsyncRequest','Bootloader','ChatDispatcher','ChatImpressionLogger','ChatSidebarActions','ChatSidebarComposeLink.react','ChatSidebarStore','ChatSidebarVisibility','CSS','DOM','DOMDimensions','Event','LogHistory','KeyEventController','LitestandClassicPlaceHolders','MercuryConfig','Parent','PresencePrivacy','PresenceUtil','React','ReactDOM','Run','ScrollableArea','SidebarType','Style','TimeSlice','ViewportBounds','csx','cx','debounce','emptyFunction','ge'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na){if(c.__markCompiled)c.__markCompiled();var oa,pa,qa,ra,sa,ta,ua,va=null,wa=false,xa,ya=true,za=null,ab=u.getInstance('chat_sidebar');function bb(){return o.getVisibleType()===fa.SIDEBAR;}function cb(nb,ob){if(!bb())return;if(ob){sa.hide();}else{sa.show();fb();}}function db(){if(!bb()||!ra)return 0;if(va===null)va=ra.offsetWidth;return va;}function eb(){q.removeClass(document.documentElement,'sidebarMode');if(!o.isInitialized()){h.inform('reflow');ia.inform('change');return;}va=null;sa.hide();ua.getCore().reset();q.hide(ra);q.hide(qa);h.inform('sidebar/hide',mb);h.inform('reflow');ia.inform('change');}function fb(){m.show();jb();}function gb(){if(ua&&bb())ua.getCore().getElement().focus();}function hb(nb){var ob=za||p.getViewport(),pb=ob.height;nb.forEach(function(qb){if(qb&&qb!==oa)pb-=s.getElementDimensions(qb).height;});if(xa)pb-=xa.getOffset();if(ta)pb-=s.getElementDimensions(ta).height;return Math.max(0,pb);}function ib(){q.show(qa);va=null;q.show(ra);q.addClass(document.documentElement,'sidebarMode');sa.show();ab.log('sidebar_show','{}');h.inform('sidebar/show',mb);w.destroy('sidebar');ia.inform('change');if(!wa){jb();wa=true;}}function jb(){if(o.getVisibleType()!==fa.SIDEBAR)return;var nb=hb(Array.from(qa.childNodes)),ob=sa.getItemHeight(),pb=8,qb=Math.floor((nb-pb)/ob);ga.set(oa,'height',nb+'px');sa.setNumTopFriends(qb,ya);ya=false;da.onAfterLoad(function(){var rb=Math.floor((nb-pb)/ob);rb=Math.max(rb-2,1);ua.getData().setMaxResults(rb);});h.inform('sidebar/resized',mb);h.inform('reflow');}function kb(){new i('/ajax/chat/settings.php').setHandler(ma).setErrorHandler(ma).setData({sidebar_mode:o.isEnabled(),window_id:aa.getSessionID()}).setAllowCrossPageTransition(true).send();}function lb(){var nb=true;if(!o.isEnabled()){ab.log('state_not_enabled','{}');nb=false;}if(p.hasLowFriendCount()){ab.log('state_not_shown_num_friends','{}');nb=false;}if(!p.isViewportCapable(za))nb=false;var ob=nb?'state_shown':'state_not_shown';ab.log(ob,'{}');}var mb={init:function(nb,ob,pb){mb.init=ma;k.explicitlyRegisterStore(o);m.loaded();ra=nb;sa=ob;ua=pb;oa=r.find(nb,'div.fbChatSidebarBody');qa=r.find(nb,"._51x_");ta=r.find(nb,"._5qqe");var qb=r.find(nb,"._x1u");if(qb)ca.render(ba.createElement(n,{className:"_3a-4 _5q85"}),qb);var rb=r.find(nb,"._1ltf");if(rb)da.onAfterLoad(function(){j.loadModules(["ChatSidebarDropdown.react","SidebarType"],function(sb,tb){ca.render(ba.createElement(sb,{sidebarType:tb.SIDEBAR,onToggleSidebar:m.disable}),rb);});});t.listen(window,'resize',function(){this._cacheViewport();fb();}.bind(this));v.registerKey('q',function(event){if(o.getVisibleType()!==fa.SIDEBAR)return;if(!pa)pa=r.scry(nb,'.inputsearch')[0];if(pa){pa.focus();event.prevent();}});sa.setScrollContainer(y.byClass(sa.getRoot(),'uiScrollableAreaWrap'));sa.subscribe(['render','show','hide'],la(function(sb){var tb=ea.getInstance(sa.getRoot());tb&&tb.adjustGripper();}));h.subscribe('chat/option-changed',function(sb,tb){if(tb.name==='hide_groups')jb();});h.subscribe(['AppsDivebar/show-apps','AppsDivebar/hide-apps','Ticker/resized'],jb);pb.getCore().subscribe('sidebar/typeahead/active',cb);pb.subscribe('reset',function(){if(!pb.getCore().getValue()&&!sa.isVisible())cb(null,false);});da.onAfterLoad(function(){var sb=r.find(nb,'div.fbChatSidebarMessage div.message');if(sb)j.loadModules(["ChatSidebarSheet.react"],function(tb){ca.render(ba.createElement(tb,{root:nb,onUpdate:jb}),sb,jb);});});z.subscribe('privacy-user-presence-changed',fb);o.addListener(function(){var sb=o.getState(),tb=o.getPrevState();if(sb.visible!==tb.visible)switch(sb.visible){case fa.SIDEBAR:ib();break;case fa.BUDDYLIST:eb();break;}if(sb.enabled!==tb.enabled){if(sb.enabled)setTimeout(gb,0);kb();}});this._cacheViewport();fb();l.init(sa);ia.addPersistentRight(db);h.inform('sidebar/initialized',mb,h.BEHAVIOR_PERSISTENT);m.init();lb();},ensureLoaded:function(){if(!o.isEnabled())return;if(o.isLoaded())return;if(na('pagelet_sidebar'))return;e(['UIPagelet'],function(nb){var ob=r.create('div',{id:'pagelet_sidebar'});r.appendContent(document.body,ob);nb.loadFromEndpoint('SidebarPagelet','pagelet_sidebar');});m.loaded();},hide:function(){if(!o.isEnabled())return;m.disable();},unhide:function(){if(o.isEnabled())return;m.enable();},_cacheViewport:function(){za=p.getViewport();}};mb.init=ha.guard(mb.init,'ChatSidebar init');f.exports=mb;},null);
__d('SearchI18nArabic',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=/[\u0600-\u06FF]/;function i(o){return h.test(o);}var j={1570:1575,1571:1575,1573:1575,1649:1575,1609:1610,1577:1607,1572:1569,1574:1569},k=[1600,1611,1612,1613,1614,1615,1616,1617,1618];function l(o){return j.hasOwnProperty(o)?String.fromCharCode(j[o]):k.indexOf(o)!=-1?'':String.fromCharCode(o);}function m(o){if(!i(o))return o;var p=[];for(var q=0;q<o.length;q++){var r=o.charCodeAt(q);p.push(l(r));}return p.join('');}var n={hasArabicCharacters:i,normalizeCharCode:l,arabicNormalization:m};f.exports=n;},null);
__d('UnicodeCJK',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h='a-zA-Z',i='\uFF21-\uFF3A\uFF41-\uFF5A',j=h+i,k='\u3040-\u309F',l='\u30A0-\u30FF',m='\u31F0-\u31FF',n='\uFF65-\uFF9F',o=l+m+n,p=k+o,q=[12352,12447],r=[12448,12543],s=r[0]-q[0],t='\u4E00-\u9FCF',u='\u3400-\u4DBF',v=t+u,w='\uAC00-\uD7AF',x=v+p+w,y=null,z=null,aa=null,ba=null;function ca(ka){z=z||new RegExp('['+p+']');return z.test(ka);}function da(ka){y=y||new RegExp('['+v+']');return y.test(ka);}function ea(ka){aa=aa||new RegExp('['+x+']');return aa.test(ka);}function fa(ka){var la=ka.charCodeAt(0);return String.fromCharCode(la<q[0]||la>q[1]?la:la+s);}function ga(ka){if(!ca(ka))return ka;return ka.split('').map(fa).join('');}function ha(ka){ba=ba||new RegExp('^'+'['+p+']+'+'['+j+']'+'$');return ba.test(ka);}function ia(ka){if(ha(ka))return ka.substr(0,ka.length-1);return ka;}var ja={hasKana:ca,hasIdeograph:da,hasIdeoOrSyll:ea,hiraganaToKatakana:ga,isKanaWithTrailingLatin:ha,kanaRemoveTrailingLatin:ia};f.exports=ja;},null);
__d('UnicodeHangulKorean',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=/[\u3130-\u318F\uAC00-\uD7AF]/;function i(ba){return h.test(ba);}var j=[4352,4353,4522,4354,4524,4525,4355,4356,4357,4528,4529,4530,4531,4532,4533,4378,4358,4359,4360,4385,4361,4362,4363,4364,4365,4366,4367,4368,4369,4370,4449,4450,4451,4452,4453,4454,4455,4456,4457,4458,4459,4460,4461,4462,4463,4464,4465,4466,4467,4468,4469,4448,4372,4373,4551,4552,4556,4558,4563,4567,4569,4380,4573,4575,4381,4382,4384,4386,4387,4391,4393,4395,4396,4397,4398,4399,4402,4406,4416,4423,4428,4593,4594,4439,4440,4441,4484,4485,4488,4497,4498,4500,4510,4513],k=12593,l=j.length,m=k+l;function n(ba){return String.fromCharCode(j[ba-k]);}var o=4352,p=4449,q=4519,r=44032,s=19,t=21,u=28,v=t*u,w=s*v,x=r+w;function y(ba){var ca=ba-r,da=ca%u;return String.fromCharCode(o+ca/v)+String.fromCharCode(p+ca%v/u)+(da>0?String.fromCharCode(q+da):'');}function z(ba){if(!i(ba))return ba;var ca=[];for(var da=0;da<ba.length;da++){var ea=ba.charAt(da),fa=ea.charCodeAt(0);ca.push(k<=fa&&fa<m?n(fa):r<=fa&&fa<x?y(fa):ea);}return ca.join('');}var aa={toConjoiningJamo:z};f.exports=aa;},null);
__d('SearchI18nMatch',['UnicodeHangulKorean','UnicodeCJK','SearchI18nArabic','invariant','createObjectFrom','mapObject'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=['prefix_hangul_conjoining_jamo','prefix_kana_drop_trailing_latin','prefix_kana_hiragana_to_katakana','search_i18n_prefix_arabic_normalization'];function o(p){this.config=l(n,false);this.setConfigs(p||{});}o.prototype.setConfigs=function(p){m(p,function(q,r){return this.setConfig(r,q);}.bind(this),this);};o.prototype.setConfig=function(p,q){!(p in this.config)?k(0):undefined;this.config[p]=q;};o.prototype.prefixMatchPrepare=function(p){if(p){if(this.config.prefix_hangul_conjoining_jamo)p=h.toConjoiningJamo(p);if(this.config.prefix_kana_drop_trailing_latin)p=i.kanaRemoveTrailingLatin(p);if(this.config.prefix_kana_hiragana_to_katakana)p=i.hiraganaToKatakana(p);if(this.config.search_i18n_prefix_arabic_normalization)p=j.arabicNormalization(p);}return p;};o.prototype.prefixMatch=function(p,q){p=this.prefixMatchPrepare(p);q=this.prefixMatchPrepare(q);return p.startsWith(q);};f.exports=o;},null);
__d('DataSource',['ArbiterMixin','AsyncRequest','TokenizeUtil','SearchI18nMatch','createArrayFromMixed','createObjectFrom','emptyFunction','mixin','str2rstr','Map'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r,s;if(c.__markCompiled)c.__markCompiled();r=babelHelpers.inherits(t,o(h));s=r&&r.prototype;function t(u){'use strict';s.constructor.call(this);this._maxResults=u.maxResults||10;this.token=u.token;this.queryData=u.queryData||{};this.queryEndpoint=u.queryEndpoint||'';this.bootstrapData=u.bootstrapData||{};this.bootstrapEndpoint=u.bootstrapEndpoint||'';this._indexedFields=u.indexedFields||['text','tokens'];this._titleFields=u.titleFields||[];this._alwaysPrefixMatch=u.alwaysPrefixMatch||false;this._deduplicationKey=u.deduplicationKey||null;this._enabledLocalCache=u.enabledLocalCache!=null?u.enabledLocalCache:true;this._enabledQueryCache=u.enabledQueryCache!=null?u.enabledQueryCache:true;this._disableAllCaches=u.disableAllCaches!=null?u.disableAllCaches:false;this._enabledMergeUids=u.enabledMergeUids!=null?u.enabledMergeUids:false;this._queryExactMatch=u.queryExactMatch||false;this._acrossTransitions=u.acrossTransitions||false;this._minQueryLength=u.minQueryLength||-1;this._enforceNewRequestIDUponFetch=u.enforceNewRequestIDUponFetch||false;this._minExactMatchLength=4;this._filters=[];this._headerflags=u.headerflags||new q();this.setExclusions(u.exclusions);this.backendUnicodeMatch=new k({prefix_kana_hiragana_to_katakana:!!u.kanaNormalization});this.cacheUnicodeMatch=new k({prefix_kana_hiragana_to_katakana:!!u.kanaNormalization});}t.prototype.init=function(){'use strict';this.init=n;this._fields=m(this._indexedFields);this._activeQueries=0;this.dirty();};t.prototype.dirty=function(){'use strict';this.value='';this._bootstrapped=false;this._bootstrapping=false;this._data={};this.localCache={};this.queryCache={};this.queryIDs={};this.inform('dirty',{});return this;};t.prototype.bootstrap=function(){var u=arguments.length<=0||arguments[0]===undefined?false:arguments[0];'use strict';if(this._bootstrapped&&!u)return;this.bootstrapWithoutToken();this._bootstrapped=true;this._bootstrapping=true;this.inform('bootstrap',{bootstrapping:true});};t.prototype.bootstrapWithoutToken=function(){'use strict';this.fetch(this.bootstrapEndpoint,this.bootstrapData,{bootstrap:true,token:this.token});};t.prototype.bootstrapWithToken=function(){'use strict';var u=babelHelpers['extends']({},this.bootstrapData);u.token=this.token;this.fetch(this.bootstrapEndpoint,u,{bootstrap:true,replaceCache:true,value:''});};t.prototype.query=function(u,v,w,x,y){'use strict';this.inform('beforeQuery',babelHelpers['extends']({value:u,local_only:v,exclusions:w,time_waited:x},y));var z=Date.now();if(this._disableAllCaches){this.dirty();if(!u){this.bootstrap();return true;}}else if(!this._enabledQueryCache){this.queryCache={};this.queryIDs={};}var aa=this.buildUids(u,[],w),ba=this.respond(u,aa);this.value=u;this.inform('query',babelHelpers['extends']({value:u,results:ba},y));var ca=this.tokenizeBackend(u).flatValue;if(v||!ca||this._isQueryTooShort(ca)||!this.queryEndpoint||this.getQueryCache().hasOwnProperty(ca)||!this.shouldFetchMoreResults(ba)){this.inform('logPerformanceTiming',babelHelpers['extends']({field:'cache_keypress_render',value:Date.now()-z},y));this.inform('completeCacheFetch');return false;}this.inform('queryEndpoint',babelHelpers['extends']({value:u},y));this.fetch(this.queryEndpoint,this.getQueryData(u,aa),babelHelpers['extends']({value:u,exclusions:w},y));return true;};t.prototype._isQueryTooShort=function(u){'use strict';return u.length<this._minQueryLength;};t.prototype._tokenize=function(u,v){'use strict';return j.parse(u,v);};t.prototype.tokenizeBackend=function(u,v){'use strict';u=this.backendUnicodeMatch.prefixMatchPrepare(u);return this._tokenize(u,v);};t.prototype.tokenizeCache=function(u,v){'use strict';u=this.cacheUnicodeMatch.prefixMatchPrepare(u);return this._tokenize(u,v);};t.prototype.shouldFetchMoreResults=function(u){'use strict';return u.length<this._maxResults;};t.prototype.getQueryData=function(u,v){'use strict';var w=babelHelpers['extends']({value:u},this.queryData);v=v||[];if(v.length)w.existing_ids=v.join(',');if(this._bootstrapping)w.bsp=true;return w;};t.prototype.setQueryData=function(u,v){'use strict';if(v)this.queryData={};Object.assign(this.queryData,u);return this;};t.prototype.setBootstrapData=function(u,v){'use strict';if(v)this.bootstrapData={};Object.assign(this.bootstrapData,u);return this;};t.prototype.getExclusions=function(){'use strict';return l(this._exclusions);};t.prototype.setExclusions=function(u){'use strict';this._exclusions=u?u.map(String):[];};t.prototype.addFilter=function(u){'use strict';var v=this._filters;v.push(u);return {remove:function(){v.splice(v.indexOf(u),1);}};};t.prototype.clearFilters=function(){'use strict';this._filters=[];};t.prototype.notify=function(u,v,w,x){'use strict';var y=this.buildData(v);this.inform('notify',{value:u,results:y,isAsync:!!w,rootid:x});return y;};t.prototype.respond=function(u,v,w){'use strict';var x=this.buildData(v);this.processResults(u,x,w);this.inform('respond',{value:u,results:x,isAsync:!!w});return x;};t.prototype.respondWithResults=function(u,v,w){'use strict';this.processResults(u,v,w);this.inform('respond',{value:u,results:v,isAsync:!!w});return v;};t.prototype.processResults=function(u,v,w){'use strict';if(this.bootstrapData.alwaysShowEcho){var x=-1;for(var y=0;y<v.length;++y)if(v[y].text.toLowerCase()===u.toLowerCase()){x=y;break;}var z={};if(x===-1){z={bootstrapped:false,index:0,query:u,render_type:'hashtag',text:u,type:'hashtag',uid:this.getUniqueID()};v.map(function(aa){aa.index+=1;});v.unshift(z);}else if(x>0){z=v.splice(x,1)[0];v.unshift(z);v.map(function(aa,ba){aa.index=ba;});}}};t.prototype.getUniqueID=function(){'use strict';var u='_'+Math.random().toString(36).substr(2,9);while(this._data[u]!==undefined)u='_'+Math.random().toString(36).substr(2,9);return u;};t.prototype.fetch=function(u,v,w){'use strict';if(!u)return;if(this._enforceNewRequestIDUponFetch||v.request_id===undefined){v.request_id=this._guid();w.request_id=v.request_id;}var x=new i().setURI(u).setData(v).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(this._acrossTransitions).setHandler(function(fa){this.fetchHandler(fa,w||{});}.bind(this));if(u===this.queryEndpoint){for(var y=this._headerflags,z=Array.isArray(y),aa=0,y=z?y:y[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ba;if(z){if(aa>=y.length)break;ba=y[aa++];}else{aa=y.next();if(aa.done)break;ba=aa.value;}var ca=ba,da=ca[0],ea=ca[1];x.setRequestHeader(da,ea);}x.setFinallyHandler(function(){this._activeQueries--;if(!this._activeQueries)this.inform('activity',{activity:false});}.bind(this));}x.setErrorHandler(function(fa){return this.asyncErrorHandler(fa,w);}.bind(this));this.inform('beforeFetch',{request:x,fetch_context:w});x.send();if(u===this.queryEndpoint){if(!this._activeQueries)this.inform('activity',{activity:true});this._activeQueries++;}};t.prototype.fetchHandler=function(u,v){'use strict';var w=v.value,x=v.exclusions;if(u.getPayload().requestID!==undefined)v.request_id=u.getPayload().requestID;var y=this.getQueryIDs(),z=this.tokenizeBackend(w||'').flatValue;y[z]=v.request_id;if(!w&&v.replaceCache)this.localCache={};this.inform('buildQueryCache',{});var aa=u.getPayload().entries;this.addEntries(aa,w);this.inform('fetchComplete',{entries:aa,response:u,value:w,fetch_context:v});var ba=!w&&this.value?this.value:w;this.respond(ba,this.buildUids(ba,[],x),true);if(!w){if(this._bootstrapping){this._bootstrapping=false;this.inform('bootstrap',{bootstrapping:false});}if(v.token&&u.getPayload().token!==v.token)this.bootstrapWithToken();}};t.prototype.addEntries=function(u,v){'use strict';var w=this.processEntries(l(u||[]),v),x=w;if(this._enabledMergeUids)x=this.buildUids(v,w);if(v){var y=this.getQueryCache(),z=this.tokenizeBackend(v).flatValue;y[z]=x;}else this.fillCache(x);return w;};t.prototype.processEntries=function(u,v){'use strict';return u.map(function(w,x){var y=w.uid=w.uid+'',z=this.getEntry(y);if(!z){z=w;z.query=v;z.bootstrapped=!v;this.setEntry(y,z);}else Object.assign(z,w);this.processEntry(z,v);z.index===undefined&&(z.index=x);return y;},this);};t.prototype.processEntry=function(u,v){'use strict';};t.prototype.getAllEntries=function(){'use strict';return this._data||{};};t.prototype.getEntry=function(u){'use strict';return this._data[u]||null;};t.prototype.setEntry=function(u,v){'use strict';this._data[u]=v;};t.prototype.fillCache=function(u){'use strict';if(!this._enabledLocalCache)return;var v=this.localCache;u.forEach(function(w){var x=this.getEntry(w);if(!x)return;var y=this.tokenizeCache(this.getTextToIndex(x)).tokens;for(var z=0,aa=y.length;z<aa;++z){var ba=y[z];if(!v.hasOwnProperty(ba))v[ba]={};v[ba][w]=true;}},this);};t.prototype.getTextToIndex=function(u){'use strict';if(u.textToIndex&&!u.needs_update)return u.textToIndex;u.needs_update=false;u.textToIndex=this.getTextToIndexFromFields(u,this._indexedFields);return u.textToIndex;};t.prototype.getTextToIndexFromFields=function(u,v){'use strict';var w=[];for(var x=0;x<v.length;++x){var y=u[v[x]];if(y)w.push(y.join?y.join(' '):y);}return w.join(' ');};t.prototype.mergeUids=function(u,v,w,x){'use strict';this.inform('mergeUids',{local_uids:u,query_uids:v,new_uids:w,value:x});this._checkExtendedMatch(x,u);return this.deduplicateByKey(u.sort(this.bootstrapSort.bind(this)).concat(v,w));};t.prototype.bootstrapSort=function(u,v){'use strict';var w=this.getEntry(u),x=this.getEntry(v);if(w.extended_match!==x.extended_match)return w.extended_match?1:-1;if(w.index!==x.index)return w.index-x.index;if(w.text.length!==x.text.length)return w.text.length-x.text.length;if(w.text===x.text)return w.uid<x.uid?-1:1;return w.text<x.text?-1:1;};t.prototype._checkExtendedMatch=function(u,v){'use strict';var w=this._alwaysPrefixMatch?j.isPrefixMatch:j.isQueryMatch;for(var x=0;x<v.length;++x){var y=this.getEntry(v[x]);y.extended_match=y.tokens?!w(u,y.text):false;}};t.prototype.buildUids=function(u,v,w){'use strict';if(!v)v=[];if(!u)return v;if(!w)w=[];var x=this.buildCacheResults(u,this.localCache),y=this.buildQueryResults(u),z=this.mergeUids(x,y,v,u),aa=m(w.concat(this._exclusions)),ba=z.filter(function(ca){if(aa.hasOwnProperty(ca)||!this.getEntry(ca))return false;for(var da=0;da<this._filters.length;++da)if(!this._filters[da](this.getEntry(ca),u))return false;return aa[ca]=true;},this);return this.uidsIncludingExact(u,ba);};t.prototype.uidsIncludingExact=function(u,v){'use strict';var w=v.length;if(w<=this._maxResults||p(u).length<this._minExactMatchLength)return v;for(var x=0;x<w;++x){var y=this.getEntry(v[x]);y.text_lower||(y.text_lower=y.text.toLowerCase());if(y.text_lower===this.tokenizeCache(u).flatValue){if(x>=this._maxResults){var z=v.splice(x,1)[0];v.splice(this._maxResults-1,0,z);}break;}}return v;};t.prototype.buildData=function(u){'use strict';var v=[],w=Math.min(u.length,this._maxResults);for(var x=0;x<w;++x)v.push(this.getEntry(u[x]));return v;};t.prototype.findBestPreviousQuery=function(u,v){'use strict';var w=0,x=null;if(this._queryExactMatch)return v.hasOwnProperty(u)?u:null;for(var y in v)if(u.indexOf(y)===0&&y.length>w){w=y.length;x=y;}return x;};t.prototype.findQueryCache=function(u){'use strict';var v=this.findBestPreviousQuery(u,this.getQueryCache());return this.getQueryCache()[v]||[];};t.prototype.buildQueryResults=function(u){'use strict';var v=this.tokenizeBackend(u).flatValue,w=this.findQueryCache(v);if(this.getQueryCache().hasOwnProperty(v))return w;var x=this.filterQueryResults(v,w);return x;};t.prototype.filterQueryResults=function(u,v){'use strict';var w=this._alwaysPrefixMatch?j.isPrefixMatch:j.isQueryMatch;return v.filter(function(x){return w(u,this.getTextToIndex(this.getEntry(x)));},this);};t.prototype.buildCacheResults=function(u,v){'use strict';var w=this.tokenizeCache(u,this._alwaysPrefixMatch),x=this._alwaysPrefixMatch?w.sortedTokens:w.tokens,y=x.length,z=w.isPrefixQuery?y-1:null,aa={},ba={},ca={},da=[],ea=false,fa={},ga=0;for(var ha=0;ha<y;++ha){var ia=x[ha];if(!fa.hasOwnProperty(ia)){ga++;fa[ia]=true;}else continue;for(var ja in v)if(!aa.hasOwnProperty(ja)&&ja===ia||(this._alwaysPrefixMatch||z===ha)&&this.cacheUnicodeMatch.prefixMatch(ja,ia)){if(ja===ia){if(ba.hasOwnProperty(ja))ea=true;aa[ja]=true;}else{if(aa.hasOwnProperty(ja)||ba.hasOwnProperty(ja))ea=true;ba[ja]=true;}for(var ka in v[ja])if(ha===0||ca.hasOwnProperty(ka)&&ca[ka]==ga-1)ca[ka]=ga;}}for(var la in ca)if(ca[la]==ga)da.push(la);if(ea||ga<y)da=this.filterQueryResults(u,da);if(this._titleFields&&this._titleFields.length>0)da=this.filterNonTitleMatchQueryResults(u,da);return da;};t.prototype.filterNonTitleMatchQueryResults=function(u,v){'use strict';return v.filter(function(w){var x=this.tokenizeCache(u),y=x.tokens.length;if(y===0)return true;var z=this.getTitleTerms(this.getEntry(w)),aa=x.tokens[0];return y===1||this._alwaysPrefixMatch?j.isPrefixMatch(aa,z)||this.cacheUnicodeMatch.prefixMatch(z,aa):j.isQueryMatch(aa,z);},this);};t.prototype.getTitleTerms=function(u){'use strict';if(!u.titleToIndex)u.titleToIndex=this.getTextToIndexFromFields(u,this._titleFields);return u.titleToIndex;};t.prototype.deduplicateByKey=function(u){'use strict';if(!this._deduplicationKey)return u;var v=m(u.map(this._getDeduplicationKey.bind(this)),u);return u.filter(function(w){return v[this._getDeduplicationKey(w)]==w;}.bind(this));};t.prototype._getDeduplicationKey=function(u){'use strict';var v=this.getEntry(u);if(v[this._deduplicationKey]){return v[this._deduplicationKey]+'';}else return '__'+u+'__';};t.prototype.getQueryCache=function(){'use strict';return this.queryCache;};t.prototype.getQueryIDs=function(){'use strict';return this.queryIDs;};t.prototype.setMaxResults=function(u){'use strict';this._maxResults=u;this.value&&this.respond(this.value,this.buildUids(this.value));};t.prototype.getMaxResults=function(){'use strict';return this._maxResults;};t.prototype.updateToken=function(u){'use strict';this.token=u;this.dirty();return this;};t.prototype._guid=function(){'use strict';var u=Date.now(),v='xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(w){var x=Math.floor((u+Math.random()*16)%16);u=Math.floor(u/16);var y=(w=='x'?x:x&7|8).toString(16);return y;});return v;};Object.assign(t.prototype,{events:['bootstrap','query','respond'],asyncErrorHandler:n});f.exports=t;},null);
__d('MercuryTypeaheadDataSource',['Banzai','BanzaiLogger','CurrentUser','DataSource','MercuryConfig','MercuryParticipantTypes','MercuryTypeaheadConstants','OrderedFriendsList','ShortProfiles','WorkModeConfig','debounce'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s,t;if(c.__markCompiled)c.__markCompiled();var u=500,v=[],w={},x={},y={},z=false,aa=false;s=babelHelpers.inherits(ba,k);t=s&&s.prototype;function ba(ca){'use strict';ca=ca||{};ca.kanaNormalization=true;t.constructor.call(this,ca);this.logQuery=r(function(da){this.$MercuryTypeaheadDataSource1(da);},u,this,true);this.logResponse=r(function(da){this.$MercuryTypeaheadDataSource1(da);},u,this,true);}ba.prototype.dirty=function(){'use strict';this.$MercuryTypeaheadDataSource2=v;this.localCache=x;this.queryCache=w;this.queryIDs=y;return this;};ba.prototype.bootstrap=function(){'use strict';if(z||aa)return false;this.$MercuryTypeaheadDataSource1({event:'bootstrap_start'});aa=true;p.fetchAll().then(function(){this.updateBootstrapData();this.$MercuryTypeaheadDataSource1({event:'bootstrap_end'});aa=false;z=true;}.bind(this),function(){this.$MercuryTypeaheadDataSource1({event:'bootstrap_failure'});}.bind(this));return true;};ba.prototype.updateBootstrapData=function(){'use strict';var ca=this.getCachedShortProfileIDs(),da=q.is_work_user?m.FB4C:m.FRIEND,ea=ca.map(function(fa){var ga=p.getNow(fa),ha=fa==j.getID()?da:ga.type,ia=[ga.additionalName,ga.alternateName].concat(ga.searchTokens||[]).join(' '),ja=ga.name,ka=null;if(ga.threadNickname){ja=ga.threadNickname;ka=ga.name;}return {uid:fa,index:o.getActiveRank(fa),text:ja,subtext:ka,tokens:ia,localized_text:ga.name,additional_text:ga.additionalName,photo:ga.thumbSrc,render_type:ha,type:n.USER_TYPE};});if(ea.length)this.addEntries(ea);};ba.prototype.query=function(ca,da,ea,fa){'use strict';var ga=da||ca.length===1;return t.query.call(this,ca,ga,ea,fa);};ba.prototype.getQueryData=function(ca,da){'use strict';return babelHelpers['extends']({},t.getQueryData.call(this,ca,da));};ba.prototype.setEntry=function(ca,da){'use strict';this.$MercuryTypeaheadDataSource2[ca]=da;};ba.prototype.getEntry=function(ca){'use strict';return this.$MercuryTypeaheadDataSource2[ca]||null;};ba.prototype.getCachedShortProfileIDs=function(){'use strict';var ca=p.getCachedProfileIDs(),da=ca.filter(function(ea){var fa=p.getNow(ea);return (ea==j.getID()||fa.type===m.FRIEND||fa.type===m.FB4C||fa.type===m.PAGE&&l.LinkedAgents&&l.LinkedAgents.indexOf(ea.toString())>-1);});return da;};ba.prototype.isBootstrapped=function(){'use strict';return z;};ba.prototype.isBootstrapping=function(){'use strict';return aa;};ba.prototype.processEntries=function(ca,da){'use strict';ca=ca.map(function(ea){if(ea.index==null&&(ea.render_type===m.FRIEND||ea.render_type===m.FB4C))ea.index=o.getActiveRank(ea.uid);if(ea.render_type===m.PAGE&&l.LinkedAgents&&l.LinkedAgents.indexOf(ea.uid.toString())>-1)ea.index=1;return ea;});return t.processEntries.call(this,ca);};ba.prototype.mergeUids=function(ca,da,ea,fa){'use strict';var ga=da.sort(function(ha,ia){return this.getEntry(ha).index-this.getEntry(ia).index;}.bind(this));return t.mergeUids.call(this,ca,ga,ea,fa);};ba.prototype.$MercuryTypeaheadDataSource1=function(ca){'use strict';if(!h.isEnabled('mercury_typeahead_logging'))return;i.log('MercuryQueryResultsLoggerConfig',ca);};f.exports=ba;},null);
__d('ChatSidebarTypeaheadDataSource',['MercuryConfig','MercuryTypeaheadDataSource','Run','ShortProfiles'],function a(b,c,d,e,f,g,h,i,j,k){var l,m;if(c.__markCompiled)c.__markCompiled();l=babelHelpers.inherits(n,i);m=l&&l.prototype;function n(o){'use strict';o=o||{};o.kanaNormalization=true;m.constructor.call(this,o);if(h.LinkedAgents&&h.LinkedAgents.length>0)j.onAfterLoad(function(){return this.bootstrap();}.bind(this));}n.prototype.init=function(){'use strict';m.init.call(this);this.updateBootstrapData();};n.prototype.bootstrap=function(){'use strict';m.bootstrap.call(this);};n.prototype.updateBootstrapData=function(){'use strict';if(this.isBootstrapped())return;m.updateBootstrapData.call(this);};n.prototype.fetchAll=function(){'use strict';k.fetchAll();};n.prototype.refreshData=function(){'use strict';this.fetchAll();};n.prototype.query=function(o,p,q,r){'use strict';this.logQuery({event:'query_dive_bar',query:o});return m.query.call(this,o,p,q,r);};n.prototype.respond=function(o,p,q){'use strict';var r=m.respond.call(this,o,p,q);this.logResponse({event:'query_response_dive_bar',response_query:o,response_uids:p});return r;};f.exports=n;},null);
__d('StickyPlaceholderInput',['Event','CSS','DOM','Input','Parent','emptyFunction','getElementText'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();function o(s){return l.byClass(s,'uiStickyPlaceholderInput');}function p(s){return j.scry(s,'.placeholder')[0];}function q(s){s=s||window.event;var t=s.target||s.srcElement;if(j.isNodeOfType(t,['input','textarea'])){var u=o(t);if(u)setTimeout(function(){i.conditionClass(u,'uiStickyPlaceholderEmptyInput',!t.value.length);},0);}}var r={init:function(){r.init=m;h.listen(document.documentElement,{keydown:q,keyup:q,paste:q,focusout:q});},registerInput:function(s){r.init();var t=s.getAttribute('placeholder')||'';if(t.length)if(document.activeElement===s){var u=h.listen(s,'blur',function(){r.manipulateInput(s,t);u.remove();});}else r.manipulateInput(s,t);},manipulateInput:function(s,t){var u=j.create('div',{className:'placeholder','aria-hidden':'true'},t),v=j.create('div',{className:'uiStickyPlaceholderInput'},u);if(j.isNodeOfType(s,'textarea'))i.addClass(v,'uiStickyPlaceholderTextarea');h.listen(u,'click',function(){s.focus();});if(s.value===t)s.value='';s.setAttribute('placeholder','');j.replace(s,v);j.appendContent(v,s);i.conditionClass(v,'uiStickyPlaceholderEmptyInput',!s.value.length);},setPlaceholderText:function(s,t){var u=o(s);if(!u){k.setPlaceholder(s,t);}else{var v=p(u);v&&j.setContent(v,t);}},getPlaceholderText:function(s){var t=o(s),u=p(t);return u&&n(u);},update:function(s){var t=o(s);if(t)i.conditionClass(t,'uiStickyPlaceholderEmptyInput',!s.value.length);},getVisibleText:function(s){var t=o(s);if(i.hasClass(t,'uiStickyPlaceholderEmptyInput')){var u=p(t);return u&&n(u);}else return s.value;}};f.exports=r;},null);
__d('TypeaheadCore',['Arbiter','ArbiterMixin','CSS','DOM','Event','Focus','Input','InputSelection','Keys','StickyPlaceholderInput','UserAgent_DEPRECATED','bind','emptyFunction','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v,w;if(c.__markCompiled)c.__markCompiled();v=babelHelpers.inherits(x,u(i));w=v&&v.prototype;function x(y){'use strict';w.constructor.call(this);Object.assign(this,y);}x.prototype.init=function(y,z,aa){'use strict';this.init=t;this.data=y;this.view=z;this.root=aa;this.initInput();this.inputWrap=k.find(aa,'div.wrap');this.hiddenInput=k.find(aa,'input.hiddenInput');this.value='';this.nextQuery=null;this.selectedText=null;if(this.setValueOnSelect&&j.hasClass(this.inputWrap,'selected'))this.selectedText=this.getValue();this.initView();this.initData();this.initEvents();this.initToggle();this._exclusions=[];};x.prototype.initInput=function(){'use strict';this.element=k.find(this.root,'.textInput');var y=k.scry(this.element,'input')[0];if(y)this.element=y;};x.prototype.initView=function(){'use strict';this.view.subscribe('highlight',m.set.bind(null,this.element));this.view.subscribe('select',function(y,z){this.select(z.selected);}.bind(this));this.view.subscribe('afterSelect',function(){this.afterSelect();}.bind(this));};x.prototype.initData=function(){'use strict';this.data.subscribe('notify',function(y,z){if(this.root.id==z.rootid&&!this.element.disabled&&z.value==this.getValue())this.view.render(z.value,z.results,z.isAsync);}.bind(this));this.data.subscribe('respond',function(y,z){if(z.forceDisplay||z.value==this.getValue()&&!this.element.disabled&&(this.element.getAttribute('singlestate')!=='true'||z.nullState))this.view.render(z.value,z.results,z.isAsync);}.bind(this));this.data.subscribe('activity',function(y,z){this.fetching=z.activity;if(!this.fetching)this.nextQuery&&this.performQuery();if(this.loading!=this.fetching){this.loading=this.fetching;this.inform('loading',{loading:this.loading});}}.bind(this));};x.prototype.initEvents=function(){'use strict';l.listen(this.view.getElement(),{mouseup:this.viewMouseup.bind(this),mousedown:this.viewMousedown.bind(this)});var y={blur:s(this,'blur'),focus:s(this,'focus'),click:s(this,'click'),keyup:s(this,'keyup'),keydown:s(this,'keydown'),keypress:s(this,'keypress')};if(r.firefox())y.input=y.keyup;l.listen(this.element,y);};x.prototype.initToggle=function(){'use strict';this.subscribe('blur',this.view.hide.bind(this.view));this.subscribe('focus',this.view.show.bind(this.view));};x.prototype.viewMousedown=function(){'use strict';this.selecting=true;};x.prototype.viewMouseup=function(){'use strict';this.selecting=false;};x.prototype.blur=function(){'use strict';if(this.selecting){this.selecting=false;return;}this.inform('blur');};x.prototype.click=function(){'use strict';var y=o.get(this.element);if(y.start==y.end)this.element.select();this.inform('click');};x.prototype.focus=function(){'use strict';this.checkValue();this.inform('focus');};x.prototype.keyup=function(){'use strict';if(this.resetOnKeyup&&!this.getValue())this.view.reset();this.checkValue();if(this.getValue().length===0)this.inform('change',null);};x.prototype.keydown=function(event){'use strict';if(!this.view.isVisible()||this.view.isEmpty()){setTimeout(this.checkValue.bind(this),0);return;}switch(l.getKeyCode(event)){case p.TAB:this.handleTab(event);return;case p.UP:this.view.prev();break;case p.DOWN:this.view.next();break;case p.ESC:this.view.reset();break;default:setTimeout(this.checkValue.bind(this),0);return;}event.kill();};x.prototype.keypress=function(event){'use strict';if(this.view.getSelection()&&l.getKeyCode(event)==p.RETURN){this.view.select();event.kill();}};x.prototype.handleTab=function(event){'use strict';if(this.preventFocusChangeOnTab)if(this.view.getSelection()){event.kill();}else event.prevent();this.view.select();};x.prototype.select=function(y){'use strict';if(y&&this.setValueOnSelect){var z=y.orig_text||y.text;this.setValue(z);this.setHiddenValue(y.uid);this.selectedText=z;j.addClass(this.inputWrap,'selected');}};x.prototype.afterSelect=function(){'use strict';this.keepFocused?m.set(this.element):this.element.blur();this.resetOnSelect?this.reset():this.view.reset();};x.prototype.unselect=function(){'use strict';if(this.setValueOnSelect){this.selectedText=null;j.removeClass(this.inputWrap,'selected');}this.setHiddenValue();this.inform('unselect',this);};x.prototype.setEnabled=function(y){'use strict';var z=y===false;this.element.disabled=z;j.conditionClass(this.root,'uiTypeaheadDisabled',z);};x.prototype.reset=function(){'use strict';this.unselect();this.setValue();!this.keepFocused&&n.reset(this.element);this.view.reset();this.inform('reset');};x.prototype.getElement=function(){'use strict';return this.element;};x.prototype.setExclusions=function(y){'use strict';this._exclusions=y.map(String);};x.prototype.getExclusions=function(){'use strict';return this._exclusions;};x.prototype.setValue=function(y){'use strict';this.value=this.nextQuery=y||'';n.setValue(this.element,this.value);q.update(this.element);this.inform('change',y);};x.prototype.setHiddenValue=function(y){'use strict';this.hiddenInput.value=y||y===0?y:'';h.inform('Form/change',{node:this.hiddenInput});};x.prototype.getValue=function(){'use strict';return n.getValue(this.element);};x.prototype.getHiddenValue=function(){'use strict';return this.hiddenInput.value||'';};x.prototype.checkValue=function(){'use strict';var y=this.getValue();if(y==this.value)return;if(this.selectedText&&this.selectedText!=y)this.unselect();var z=Date.now(),aa=z-this.time;this.time=z;this.value=this.nextQuery=y;this.performQuery(aa);};x.prototype.performQuery=function(y){'use strict';if(this.selectedText)return;y=y||0;if(this.fetching&&y<this.queryTimeout){this.data.query(this.nextQuery,true,this._exclusions,y);}else{this.data.query(this.nextQuery,false,this._exclusions,y);this.nextQuery=null;}};x.prototype.updateHeight=function(){'use strict';};Object.assign(x.prototype,{events:['blur','focus','click','unselect','loading'],keepFocused:true,resetOnSelect:false,resetOnKeyup:true,setValueOnSelect:false,queryTimeout:250,preventFocusChangeOnTab:false});f.exports=x;},null);
__d('ChatTypeaheadCore',['Event','Keys','TypeaheadCore','emptyFunction','shield'],function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();m=babelHelpers.inherits(o,j);n=m&&m.prototype;o.prototype.init=function(p,q,r){'use strict';n.init.call(this,p,q,r);this.informBeginActive=false;this.informEndActive=false;this.data.subscribe('respond',function(){if(this.informBeginActive){this.informBeginActive=false;this.inform('sidebar/typeahead/active',true);}else if(this.informEndActive){this.informEndActive=false;this.inform('sidebar/typeahead/active',false);}}.bind(this));};o.prototype.keydown=function(event){'use strict';this.data.fetchAll();var p=h.getKeyCode(event);if(p===i.ESC){this.view.clearContent();setTimeout(l(this.reset,this),0);if(!this.getValue()){this.element.blur();this.inform('escape');}return event.kill();}return n.keydown.call(this,event);};o.prototype.checkValue=function(){'use strict';var p=this.getValue(),q=this.value;if(p==q)return;if(q&&!p){this.typeaheadActive=false;this.informEndActive=true;}else if(!q&&p){this.typeaheadActive=true;this.informBeginActive=true;this.inform('sidebar/typeahead/preActive');}n.checkValue.call(this);};function o(){'use strict';m.apply(this,arguments);}Object.assign(o.prototype,{handleTab:k});f.exports=o;},null);
__d('ChatTypeaheadRenderer',['AvailableListConstants','ChatSidebarConstants','ChatSidebarHeader.react','ChatSidebarSections','ChatSidebarThread.react','ChatSidebarUser.react','ChatTypeaheadConstants','DOM','LastActiveTimes','MercuryIDs','PresenceStatus','React','ReactDOM','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();var v={};function w(ba,ca){if(!(ba in v))v[ba]=o.create('li');t.render(ca,v[ba]);return v[ba];}function x(ba){return w(ba.text,s.createElement(j,null,ba.text));}function y(ba){var ca=ba.mercury_thread.participants.map(function(da){return q.getUserIDFromParticipantID(da);});return w(ba.uid,s.createElement(l,{image:ba.mercury_thread.image_src,imageSize:i.getImageSize(),name:ba.mercury_thread.name,participants:ba.participants_to_render,numOtherParticipants:ca.length-1,referrer:k.TYPEAHEAD,status:r.getGroup(ca),threadFBID:ba.uid}));}function z(ba){var ca=r.get(ba.uid),da=ca===h.MOBILE?p.getShortDisplay(ba.uid):null,ea=ba.subtext;return w(ba.uid,s.createElement(m,{image:ba.photo,imageSize:i.getImageSize(),name:ba.text,sectionName:k.TYPEAHEAD,status:ca,statusTime:da,userID:ba.uid,context:ea}));}function aa(ba,ca){if(ba.type===n.HEADER_TYPE)return x(ba);if(ba.type==n.THREAD_TYPE)return y(ba);return z(ba);}f.exports=aa;},null);
__d('BadgeHelper',['DOM','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={xsmall:"_5dzz",small:"_5dz-",medium:"_5dz_",large:"_5d-0",xlarge:"_5d-1"},l={verified:"_56_f",trending:"_1gop",topcommenter:"_59t2",page_gray_check:"_5n3t",work:"_5d62",game_blue:"_59c6"};function m(o,p){return j(k[o],l[p],"_5dzy");}function n(o,p){var q=m(o,p);if(q)return h.create('span',{className:q});}f.exports={getClasses:m,renderBadge:n,sizes:Object.keys(k),types:Object.keys(l)};},null);
__d('BasicTypeaheadRenderer',['BadgeHelper','DOM'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=' \u00B7 ';function k(l,m){var n=[];if(l.icon)n.push(i.create('img',{alt:'',src:l.icon}));var o=l.debug_info;if(o)n.push(i.create('span',{className:'debugInfo'},o));if(l.text){var p=[l.text];if(l.is_verified)p.push(h.renderBadge('xsmall','verified'));n.push(i.create('span',{className:'text'},p));}if(l.subtext){var q=[l.subtext];if(l.saved_context){var r=i.create('span',{className:'saved'},[l.saved_context]);q.unshift(r,j);}n.push(i.create('span',{className:'subtext'},q));}var s=i.create('li',{className:l.type||''},n);if(l.text){s.setAttribute('title',l.text);s.setAttribute('aria-label',l.text);}return s;}k.className='basic';f.exports=k;},null);
__d('createIxElement',['DOM','invariant','joinClasses'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l,m){var n='img',o;!(l.sprited||l.uri)?i(0):undefined;if(l.sprited){n=j(n,l.spriteMapCssClass,l.spriteCssClass);o=h.create('i',{className:n});if(m!=null)h.setContent(o,h.create('u',null,m));}else if(l.uri){o=h.create('img',{className:n,src:l.uri});if(m!=null)o.setAttribute('alt',m);if(l.width)o.setAttribute('width',l.width);if(l.height)o.setAttribute('height',l.height);}return o;}f.exports=k;},null);
__d('TypeaheadView',['$','ArbiterMixin','BasicTypeaheadRenderer','CSS','DOM','Event','Parent','createIxElement','emptyFunction','getElementText','getOrCreateDOMID','ix','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u,v;if(c.__markCompiled)c.__markCompiled();u=babelHelpers.inherits(w,t(i));v=u&&u.prototype;function w(x,y){'use strict';v.constructor.call(this);this.element=this.content=h(x);Object.assign(this,y);}w.prototype.init=function(){'use strict';this.init=p;this.initializeEvents();this.reset();};w.prototype.initializeEvents=function(){'use strict';m.listen(this.element,{mouseup:this.mouseup.bind(this),mouseover:this.mouseover.bind(this)});};w.prototype.setTypeahead=function(x){'use strict';this.typeahead=x;};w.prototype.setAccessibilityControlElement=function(x){'use strict';this.accessibilityElement=x;};w.prototype.getElement=function(){'use strict';return this.element;};w.prototype.mouseup=function(event){'use strict';if(event.button!=2){this.select(true);event.prevent();}};w.prototype.mouseover=function(event){'use strict';if(this.ignoreMouseover){this.ignoreMouseover=false;return;}if(this.visible)this.highlight(this.getIndex(event));};w.prototype.reset=function(x){'use strict';if(!x)this.disableAutoSelect=false;this.index=-1;this.items=[];this.results=[];this.value='';this.content.innerHTML='';this.inform('reset');return this;};w.prototype.getIndex=function(event){'use strict';return this.items.indexOf(n.byTag(event.getTarget(),'li'));};w.prototype.getSelection=function(){'use strict';var x=this.results[this.index]||null;return this.visible?x:null;};w.prototype.isEmpty=function(){'use strict';return !this.results.length;};w.prototype.isVisible=function(){'use strict';return !!this.visible;};w.prototype.show=function(){'use strict';k.show(this.element);if(this.results&&this.results.length)if(this.autoSelect&&this.accessibilityElement&&this.selected)this.accessibilityElement.setAttribute('aria-activedescendant',r(this.selected));this.accessibilityElement&&this.accessibilityElement.setAttribute('aria-expanded','true');this.visible=true;return this;};w.prototype.hide=function(){'use strict';k.hide(this.element);if(this.accessibilityElement){this.accessibilityElement.setAttribute('aria-expanded','false');this.accessibilityElement.removeAttribute('aria-activedescendant');}this.visible=false;return this;};w.prototype.render=function(x,y){'use strict';this.value=x;if(!y.length){this.accessibilityElement&&this.accessibilityElement.removeAttribute('aria-activedescendant');this.reset(true);return;}var z={results:y,value:x};this.inform('beforeRender',z);y=z.results;var aa=this.getDefaultIndex(y);this.results=y;l.setContent(this.content,this.buildResults(y));this.items=this.getItems();this.highlight(aa,false);this.inform('render',this.results);};w.prototype.getItems=function(){'use strict';return l.scry(this.content,'li');};w.prototype.buildResults=function(x){'use strict';var y,z=null;if(typeof this.renderer=='function'){y=this.renderer;z=this.renderer.className||'';}else{y=b.TypeaheadRenderers[this.renderer];z=this.renderer;}y=y.bind(this);var aa=x.map(function(ca,da){var ea=ca.node||y(ca,da);ea.setAttribute('role','option');return ea;}),ba=l.create('ul',{className:z,id:'typeahead_list_'+(this.typeahead?r(this.typeahead):r(this.element))},aa);ba.setAttribute('role','listbox');return ba;};w.prototype.showLoadingIndicator=function(){'use strict';var x=o(s('/images/loaders/indicator_blue_small.gif')),y=l.create('li',{className:'typeaheadViewInternalLoading'},x),z=l.create('ul',{role:'listbox'},y);l.setContent(this.content,z);};w.prototype.getDefaultIndex=function(){'use strict';var x=this.autoSelect&&!this.disableAutoSelect;return this.index<0&&!x?-1:0;};w.prototype.next=function(){'use strict';this.highlight(this.index+1);this.inform('next',this.selected);};w.prototype.prev=function(){'use strict';this.highlight(this.index-1);this.inform('prev',this.selected);};w.prototype.getItemText=function(x){'use strict';var y='';if(x){y=x.getAttribute('aria-label');if(!y){y=q(x);x.setAttribute('aria-label',y);}}return y;};w.prototype.setIsViewingSelectedItems=function(x){'use strict';this.viewingSelected=x;return this;};w.prototype.getIsViewingSelectedItems=function(){'use strict';return !!this.viewingSelected;};w.prototype.highlight=function(x,y){'use strict';if(this.selected){k.removeClass(this.selected,'selected');this.selected.setAttribute('aria-selected','false');}if(x>this.items.length-1){x=-1;}else if(x<-1)x=this.items.length-1;if(x>=0&&x<this.items.length){this.selected=this.items[x];k.addClass(this.selected,'selected');this.selected.setAttribute('aria-selected','true');if(this.accessibilityElement)setTimeout(function(){this.accessibilityElement.setAttribute('aria-activedescendant',r(this.selected));}.bind(this),0);}else this.accessibilityElement&&this.accessibilityElement.removeAttribute('aria-activedescendant');this.index=x;this.disableAutoSelect=x==-1;if(y!==false)this.inform('highlight',{index:x,selected:this.results[x],element:this.selected});};w.prototype.select=function(x){'use strict';if(this.headerIndex&&x)return;var y=this.index,z=this.results[y],aa=this.element.getAttribute('id');if(z){var ba=function(ca){this.inform('select',{index:y,clicked:!!x,selected:ca,id:aa,query:this.value});this.inform('afterSelect');}.bind(this);if(this.shouldValidateTypeaheadSelection(z)){this.validateTypeaheadSelection(z,ba);}else ba(z);}};w.prototype.shouldValidateTypeaheadSelection=function(x){'use strict';return false;};w.prototype.validateTypeaheadSelection=function(x,y){'use strict';};Object.assign(w.prototype,{events:['highlight','render','reset','select','beforeRender','next','prev'],renderer:j,autoSelect:false,ignoreMouseover:false});f.exports=w;},null);
__d('BucketedTypeaheadView',['DOM','TypeaheadView','fbt'],function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();k=babelHelpers.inherits(m,i);l=k&&k.prototype;m.prototype.render=function(n,o,p,q){'use strict';var r=o.length>0;for(var s=0;s<o.length;++s)if(o[s].type!=='hashtag')r=false;if(!r)o=this.buildBuckets(n,o);if(p&&q){var t=this.results.length-this.index;this.index=o.length-t;}return l.render.call(this,n,o,p);};m.prototype.highlight=function(n,o){'use strict';this.headerIndex=false;if(n==-1&&this.index!==0)n=this.index;while(n>=0&&n<this.items.length&&!this.isHighlightable(this.results[n])){n=n+1;this.headerIndex=true;}l.highlight.call(this,n,o);};m.prototype.buildBuckets=function(n,o){'use strict';if(!this.typeObjects||!o||!o.length)return o;var p=[],q={};for(var r=0;r<o.length;++r){var s=o[r],t=s.render_type||s.type;if(!q.hasOwnProperty(t)){q[t]=p.length;p.push([this.buildBucketHeader(t)]);}s.classNames=s.classNames||t;s.groupIndex=q[t];s.indexInGroup=p[s.groupIndex].length-1;s.globalIndex=r;p[s.groupIndex].push(s);}for(t in this.typeObjects)if(!q.hasOwnProperty(t)&&this.typeObjects[t].show_always){q[t]=p.length;p.push([this.buildBucketHeader(t)]);s=this.buildNoResultsEntry();s.classNames=s.type;s.groupIndex=q[t];s.indexInGroup=p[s.groupIndex].length-1;p[s.groupIndex].push(s);}var u=[];if(this.typeObjectsOrder){for(var v=0;v<this.typeObjectsOrder.length;++v){var w=this.typeObjectsOrder[v];if(q.hasOwnProperty(w))u=u.concat(p[q[w]]);}}else for(var x=0;x<p.length;++x)u=u.concat(p[x]);return u;};m.prototype.buildNoResultsEntry=function(){'use strict';return {uid:'disabled_result',type:'disabled_result',text:j._("No Results")};};m.prototype.buildBucketHeader=function(n){'use strict';var o=this.typeObjects[n];if(o===undefined)throw new Error(n+" is undefined in "+JSON.stringify(this.typeObjects));if(o.markup){o.text=o.markup;delete o.markup;}return this.typeObjects[n];};m.prototype.buildResults=function(n){'use strict';var o=l.buildResults.call(this,n);if(this.typeObjects){return h.create('div',{className:'bucketed'},[o]);}else return o;};m.prototype.isHighlightable=function(n){'use strict';return n.type!='header'&&n.type!='disabled_result';};m.prototype.select=function(n){'use strict';var o=this.results[this.index];if(o&&this.isHighlightable(o))l.select.call(this,n);};m.prototype.updateResults=function(n){'use strict';this.results=n;};m.prototype.normalizeIndex=function(n){'use strict';var o=this.results.length;if(o===0){return -1;}else if(n<-1){return n%o+o+1;}else if(n>=o){return n%o-1;}else return n;};m.prototype.getDefaultIndex=function(n){'use strict';var o=this.autoSelect&&!this.disableAutoSelect;if(this.index<0&&!o)return -1;if(n.length===0)return -1;var p=0;while(!this.isHighlightable(n)&&p<n.length)p++;return p;};m.prototype.prev=function(){'use strict';var n=this.results[this.normalizeIndex(this.index-1)];while(n&&!this.isHighlightable(n)){this.index=this.normalizeIndex(this.index-1);n=this.results[this.normalizeIndex(this.index-1)];}return l.prev.call(this);};m.prototype.next=function(){'use strict';var n=this.results[this.normalizeIndex(this.index+1)];while(n&&!this.isHighlightable(n)){this.index=this.normalizeIndex(this.index+1);n=this.results[this.normalizeIndex(this.index+1)];}return l.next.call(this);};function m(){'use strict';k.apply(this,arguments);}f.exports=m;},null);
__d('MercuryThreadSearchUtils',['escapeRegex','TokenizeUtil'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={wordsInString:function(k){return (k||'').split(/\s+/).filter(function(l){return l.trim().length>0;});},anyMatchPredicate:function(k,l){for(var m=0;m<k.length;m++)if(l(k[m]))return true;return false;},allMatchPredicate:function(k,l){for(var m=0;m<k.length;m++)if(!l(k[m]))return false;return true;},queryWordMatchesAnyNameWord:function(k,l){var m=new RegExp('^'+h(k),'i');return this.anyMatchPredicate(l,function(n){var o=i.parse(n).flatValue;return m.test(o);});},queryMatchesName:function(k,l){var m=this.wordsInString(k),n=this.wordsInString(l);return this.allMatchPredicate(m,function(o){return this.queryWordMatchesAnyNameWord(o,n);}.bind(this));}};f.exports=j;},null);
__d('ChatTypeaheadView',['BucketedTypeaheadView','ChatTypeaheadConstants','CurrentUser','DOM','MercuryConfig','React','ReactDOM','ScrollableArea','MercuryThreadSearchUtils','Style','WorkModeConfig','XUISpinner.react','arrayContains','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w,x;if(c.__markCompiled)c.__markCompiled();w=babelHelpers.inherits(y,h);x=w&&w.prototype;function y(z,aa){'use strict';x.constructor.call(this,z,aa);this.showingLoadingIndicator=false;this.typeObjects={};this.typeObjectsOrder=[];this.typeObjects[i.NON_FRIEND_TYPE]={uid:i.NON_FRIEND_TYPE,type:i.HEADER_TYPE,text:v._("MORE PEOPLE")};this.typeObjects[i.COMMERCE_PAGE_TYPE]={disabled:true,uid:i.COMMERCE_PAGE_TYPE,type:i.HEADER_TYPE,text:v._("BUSINESSES")};this.typeObjects[i.MEETING_ROOM_PAGE_TYPE]={disabled:true,uid:i.MEETING_ROOM_PAGE_TYPE,type:i.HEADER_TYPE,text:v._("MEETING ROOMS")};this.typeObjects[i.PAGE_TYPE]={disabled:true,uid:i.PAGE_TYPE,type:i.HEADER_TYPE,text:v._("OTHER PAGES")};this.typeObjects[i.THREAD_TYPE]={uid:i.THREAD_TYPE,type:i.HEADER_TYPE,text:v._("GROUP CONVERSATIONS")};this.typeObjects[i.FB4C_TYPE]={uid:i.FB4C_TYPE,type:i.HEADER_TYPE,text:v._("CO-WORKERS")};this.typeObjects[i.FRIEND_TYPE]={disabled:true,uid:i.FRIEND_TYPE,type:i.HEADER_TYPE,text:v._("FRIENDS")};this.$ChatTypeaheadView1();}y.prototype.reset=function(){'use strict';if(this.value==='')this.clearContent();this.index=-1;this.items=[];this.results=[];this.value='';this.inform('reset');return this;};y.prototype.clearContent=function(){'use strict';this.hideLoadingIndicator();k.empty(this.content);};y.prototype.buildBuckets=function(z,aa){'use strict';var ba=aa.filter(function(ca){var da=ca.render_type||ca.type;if(da==='thread'){var ea='fbid:'+j.getID();if(!t(ca.mercury_thread.participants,ea))return false;var fa=ca.participants_to_render.some(function(ha){return p.queryMatchesName(z,ha.name);}),ga=p.queryMatchesName(z,ca.mercury_thread.name);if(!fa&&!ga)return false;}return true;}).reverse();this.$ChatTypeaheadView1(z,ba);return x.buildBuckets.call(this,z,ba);};y.prototype.getDefaultIndex=function(z){'use strict';if(z.length===0)return -1;var aa=z.length-1;while(!this.isHighlightable(z[aa])&&aa>=0)aa--;return aa;};y.prototype.showLoadingIndicator=function(){'use strict';if(!this.showingLoadingIndicator){n.render(m.createElement('div',{className:'spinnerContainer'},m.createElement(s,{className:"_3-8i",background:'light',size:'small',paused:false})),this.content);this.showingLoadingIndicator=true;}};y.prototype.hideLoadingIndicator=function(){'use strict';if(this.showingLoadingIndicator){n.unmountComponentAtNode(this.content);this.showingLoadingIndicator=false;}};y.prototype.showNoResults=function(){'use strict';var z=v._("Friend not found.");if(r.is_work_user)z=v._("Co-worker not found.");this.hideLoadingIndicator();k.setContent(this.content,k.create('div',{className:"noResults _3-9a"},z));};y.prototype.hide=function(){'use strict';this.clearContent();return x.hide.call(this);};y.prototype.next=function(){'use strict';x.next.call(this);};y.prototype.prev=function(){'use strict';x.prev.call(this);};y.prototype.setMaxHeight=function(z){'use strict';q.set(this.$ChatTypeaheadView2.wrap,'max-height',z+'px');};y.prototype.render=function(z,aa,ba){'use strict';if(!aa.length){if(z&&z.length>1)this.showLoadingIndicator();}else this.hideLoadingIndicator();x.render.call(this,z,aa,ba,true);};y.prototype.$ChatTypeaheadView1=function(z,aa){'use strict';var ba=[];if(j.isWorkUser()){ba=[i.MEETING_ROOM_PAGE_TYPE,i.THREAD_TYPE,i.NON_FRIEND_TYPE,i.FB4C_TYPE,i.FRIEND_TYPE];}else if(l.WWWMessengerMoneyPennyGK&&z&&l.HoistAgentsKeywords&&l.HoistAgentsKeywords.indexOf(z.toLowerCase())!==-1){ba=[i.NON_FRIEND_TYPE,i.FB4C_TYPE,i.THREAD_TYPE,i.FRIEND_TYPE,i.MEETING_ROOM_PAGE_TYPE,i.COMMERCE_PAGE_TYPE,i.PAGE_TYPE];}else ba=[i.NON_FRIEND_TYPE,i.MEETING_ROOM_PAGE_TYPE,i.COMMERCE_PAGE_TYPE,i.PAGE_TYPE,i.FB4C_TYPE,i.THREAD_TYPE,i.FRIEND_TYPE];if(!z){this.typeObjectsOrder=[];}else if(aa)this.typeObjectsOrder=aa.reduce(function(ca,da){if(ca.indexOf(da.render_type)===-1&&this.typeObjectsOrder.indexOf(da.render_type)===-1)ca.push(da.render_type);return ca;}.bind(this),[]).sort(function(ca,da){return (ba.indexOf(ca)-ba.indexOf(da));}).concat(this.typeObjectsOrder);};f.exports=y;},null);
__d('legacy:ChatTypeaheadBehavior',['ChatTypeaheadBehavior'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.chatTypeahead=function(i){i.enableBehavior(h);};},3);
__d("NotificationConstants",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={PayloadSourceType:{UNKNOWN:0,USER_ACTION:1,LIVE_SEND:2,ENDPOINT:3,INITIAL_LOAD:4,OTHER_APPLICATION:5,SYNC:6}};},null);
__d('NotificationTokens',['CurrentUser'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={tokenizeIDs:function(j){return j.map(function(k){return h.getID()+':'+k;});},untokenizeIDs:function(j){return j.map(function(k){return k.split(':')[1];});}};f.exports=i;},null);
__d('NotificationUpdates',['Arbiter','BizSiteIdentifier.brands','ChannelConstants','JSLogger','NotificationConstants','NotificationTokens','LiveTimer','createObjectFrom'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p={},q={},r={},s={},t=[],u=0,v=k.create('notification_updates');function w(){if(u)return;var ba=p,ca=q,da=r,ea=s;p={};q={};r={};s={};y('notifications-updated',ba);if(Object.keys(ca).length)y('seen-state-updated',ca);if(Object.keys(da).length)y('read-state-updated',da);if(Object.keys(ea).length)y('hidden-state-updated',ea);t.pop();}function x(){if(t.length)return t[t.length-1];return l.PayloadSourceType.UNKNOWN;}function y(event,ba){aa.inform(event,{updates:ba,source:x()});}var z=null,aa=Object.assign(new h(),{getserverTime:function(){return z;},handleUpdate:function(ba,ca){if(ca.nodes&&Array.isArray(ca.nodes))ca.nodes=this._filterNodesBasedOnBusinessID(ca.nodes);if(ca.servertime){z=ca.servertime;n.restart(ca.servertime);}if(Object.keys(ca).length)this.synchronizeInforms(function(){t.push(ba);var da=babelHelpers['extends']({payloadsource:x()},ca);this.inform('update-notifications',da);this.inform('update-seen',da);this.inform('update-read',da);this.inform('update-hidden',da);}.bind(this));},didUpdateNotifications:function(ba){Object.assign(p,o(ba));w();},didUpdateSeenState:function(ba){Object.assign(q,o(ba));w();},didUpdateReadState:function(ba){Object.assign(r,o(ba));w();},didUpdateHiddenState:function(ba){Object.assign(s,o(ba));w();},synchronizeInforms:function(ba){u++;try{ba();}catch(ca){throw ca;}finally{u--;w();}},_filterNodesBasedOnBusinessID:function(ba){return ba.filter(function(ca){return ca.business_ids&&Object.keys(ca.business_ids).length>0?!!('business_ids_user_pref' in ca?ca.business_ids_user_pref[i.getBusinessID()]:ca.business_ids[i.getBusinessID()]):!i.isBizSite();});}});h.subscribe(j.getArbiterType('notification_json'),function(ba,ca){var da=Date.now(),ea=ca.obj.nodes;if(ea){ea.forEach(function(fa){fa.receivedTime=da;});v.debug('notifications_received',ea);aa.handleUpdate(l.PayloadSourceType.LIVE_SEND,ca.obj);}});h.subscribe(j.getArbiterType('notifications_seen'),function(ba,ca){var da=m.tokenizeIDs(ca.obj.alert_ids);aa.handleUpdate(l.PayloadSourceType.LIVE_SEND,{seenState:o(da)});});h.subscribe(j.getArbiterType('notifications_read'),function(ba,ca){var da=m.tokenizeIDs(ca.obj.alert_ids);aa.handleUpdate(l.PayloadSourceType.LIVE_SEND,{readState:o(da)});});h.subscribe(j.getArbiterType('notification_hidden'),function(ba,ca){var da=m.tokenizeIDs([ca.obj.notif_id+'']);aa.handleUpdate(l.PayloadSourceType.LIVE_SEND,{HiddenState:o(da)});});f.exports=aa;},null);
__d('NotificationSeenState',['NotificationConstants','NotificationUpdates','createObjectFrom'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={},l=1,m=2,n=0,o=l,p=l|m,q=h.PayloadSourceType.INITIAL_LOAD,r={UNSEEN_AND_UNREAD:n,SEEN_BUT_UNREAD:o,SEEN_AND_READ:p};function s(v){var w=[],x=[];Object.keys(v).forEach(function(y){var z=v[y],aa=k[y];k[y]=z;if(aa===undefined){w.push(y);x.push(y);return;}var ba=aa^z;if(ba&l)w.push(y);if(ba&m)x.push(y);});w.length&&i.didUpdateSeenState(w);x.length&&i.didUpdateReadState(x);}i.subscribe('update-notifications',function(v,w){var x=w.nodes;if(!x||!x.length)return;var y=w.payloadsource,z=h.PayloadSourceType,aa=y==z.ENDPOINT,ba={};w.nodes.forEach(function(ca){var da=ca.alert_id;if(!aa||k[da]===undefined)ba[da]=r[ca.seen_state];});s(ba);});i.subscribe('update-seen',function(v,w){if(!w.seenState)return;var x=[],y={};Object.keys(w.seenState).forEach(function(aa){if(!w.seenState[aa]){x.push(aa);return;}var ba=k[aa];if(ba!==undefined)y[aa]=ba|l;});var z=babelHelpers['extends']({},j(x,n),y);s(z);});i.subscribe('update-read',function(v,w){if(!w.readState)return;var x=[],y={};Object.keys(w.readState).forEach(function(aa){if(w.readState[aa]){x.push(aa);return;}var ba=k[aa];if(ba!==undefined){y[aa]=ba&~m;}else if(w.payloadsource==q)y[aa]=o;});var z=babelHelpers['extends']({},j(x,p),y);s(z);});function t(v){var w=k[v];return w;}var u={isRead:function(v){return t(v)===p;},isSeen:function(v){return t(v)!==n;},getUnseenCount:function(){return u.getUnseenIDs().length;},getUnseenIDs:function(){return Object.keys(k).filter(function(v){return k[v]===n;});},getUnreadCount:function(){return u.getUnreadIDs().length;},getUnreadIDs:function(){return Object.keys(k).filter(function(v){return k[v]!==p;});}};f.exports=u;},null);
__d('NotificationStore',['BizSiteIdentifier.brands','KeyedCallbackManager','NotificationConstants','NotificationUpdates','RangedCallbackManager','MercuryServerDispatcher'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=function(s){this.notifications=new i();var t=function(u){var v=this.notifications.getResource(u);return v.creation_time;};this.order=new l(t.bind(this),function(u,v){return v-u;});this.graphQLPageInfo={};},o=h.isBizSite()?h.getBusinessID():null;k.subscribe('update-notifications',function(s,t){var u=t.endpoint||q;if(t.page_info)p[u].graphQLPageInfo=t.page_info;if(t.nodes===undefined)return;var v,w=[],x={},y=t.nodes||[],z;y.forEach(function(aa){v=aa.alert_id;z=p[u].notifications.getResource(v);if(!z||z.creation_time<aa.creation_time){w.push(v);x[v]=aa;}});p[u].notifications.addResourcesAndExecute(x);p[u].order.addResources(w);k.didUpdateNotifications(w);});var p={},q='/ajax/notifications/client/get.php',r={getNotifications:function(s,t){var u=arguments.length<=2||arguments[2]===undefined?q:arguments[2],v=p[u].order.executeOrEnqueue(0,s,function(ca){var da=p[u].notifications.executeOrEnqueue(ca,t);}),w=p[u].order.getUnavailableResources(v);if(w.length){p[u].order.unsubscribe(v);if(!r.canFetchMore(u)){p[u].notifications.executeOrEnqueue(p[u].order.getAllResources(),t);return;}var x=p[u].graphQLPageInfo,y=x&&x.end_cursor||null,z;if(y){var aa=Math.max.apply(null,w),ba=p[u].order.getCurrentArraySize();z=aa-ba+1;}else z=s;m.trySend(u,{businessID:o,cursor:y,length:z});}},getAll:function(s){var t=arguments.length<=1||arguments[1]===undefined?q:arguments[1];r.getNotifications(r.getCount(t),s,t);},getCount:function(){var s=arguments.length<=0||arguments[0]===undefined?q:arguments[0];return p[s].order.getAllResources().length;},canFetchMore:function(){var s=arguments.length<=0||arguments[0]===undefined?q:arguments[0],t=p[s].graphQLPageInfo;return (!t||!t.hasOwnProperty('has_next_page')||t.has_next_page);},registerEndpoint:function(s){if(s&&!(s in p)){p[s]=new n(s);var t={};t[s]={mode:m.IMMEDIATE,handler:function(u){u.endpoint=s;k.handleUpdate(j.PayloadSourceType.ENDPOINT,u);}};m.registerEndpoints(t);}},setBusinessID:function(s){o=s;}};r.registerEndpoint(q);f.exports=r;},null);
__d('NotificaionJewelControllerModuleLoader',['JSResource','NotificationSeenState','NotificationStore','NotificationUpdates'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();c('NotificationSeenState');c('NotificationStore');c('NotificationUpdates');f.exports=h('NotificationJewelController');},null);
__d("XNotificationsOptionsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/notifications\/feedback\/option\/",{notif_id:{type:"Int",required:true},undo:{type:"Bool",defaultValue:false},server_action:{type:"String",required:true}});},null);
__d('NotificationUserActions',['AsyncRequest','NotificationConstants','NotificationStore','NotificationTokens','NotificationUpdates','URI','XNotificationsOptionsController','createObjectFrom','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=i.PayloadSourceType.USER_ACTION,r='mark_spam',s='turn_off',t='undo',u='original_subscription_level',v=false;function w(ca){new h('/ajax/notifications/mark_read.php').setData(ca).send();}function x(ca){var da={};ca.forEach(function(ea,fa){da['alert_ids['+fa+']']=ea;});return da;}function y(ca,da,ea,fa,ga){var ha=k.untokenizeIDs([ca])[0],ia={notification_id:ha,client_rendered:true,request_type:da};Object.assign(ia,ea);new h('/ajax/notifications/negative_req.php').setData(ia).setHandler(fa||p).setErrorHandler(ga||p).send();}function z(ca,da,ea,fa,ga){var ha=n.getURIBuilder().setInt('notif_id',k.untokenizeIDs([ca])[0]).setBool('undo',fa).setString('server_action',ga).getURI(),ia=function(ja){if(!ja.payload)throw new Error('No response from notif option!');l.handleUpdate(q,{hiddenState:o([ca],!ja.payload.visible)});da(ja.payload);};new h(ha).setHandler(ia||p).setErrorHandler(ea||p).send();}function aa(ca,da,ea,fa,ga){var ha=ga?t:s;j.getAll(function(ia){var ja=Object.keys(ia).filter(function(ka){var la=ia[ka];return !!(la.application&&la.application.id&&la.application.id==da);});y(ca,ha,null,function(ka){ea(ka);l.handleUpdate(q,{hiddenState:o(ja,!ga)});},fa);});}var ba={markNotificationsAsSeen:function(ca){l.handleUpdate(q,{seenState:o(ca)});var da=k.untokenizeIDs(ca),ea=x(da);ea.seen=true;w(ea);},setNextIsFromReadButton:function(ca){v=ca;},markNotificationsAsRead:function(ca){l.handleUpdate(q,{readState:o(ca)});var da=k.untokenizeIDs(ca),ea=x(da);if(v){ea.from_read_button=true;v=false;}w(ea);},sendNotifOption:function(ca,da,ea,fa){z(ca,da,ea,false,fa);},undoNotifOption:function(ca,da,ea,fa){z(ca,da,ea,true,fa);},markNotificationAsHidden:function(ca,da,ea){l.handleUpdate(q,{hiddenState:o([ca])});y(ca,s,null,da,ea);},markNotificationAsVisible:function(ca,da,ea,fa){l.handleUpdate(q,{hiddenState:o([ca],false)});var ga=null;if(da!==null){ga={};ga[u]=da;}y(ca,t,ga,ea,fa);},markNotificationAsSpam:function(ca,da,ea){l.handleUpdate(q,{hiddenState:o([ca],true)});y(ca,r,null,da,ea);},markAppAsHidden:function(ca,da,ea,fa){var ga=false;aa(ca,da,ea,fa,ga);},markAppAsVisible:function(ca,da,ea,fa){var ga=true;aa(ca,da,ea,fa,ga);}};f.exports=ba;},null);
__d('NotificationJewelHeaderController',['DOM','Event','NotificationSeenState','NotificationUserActions','NotificationUpdates'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();function m(n,o){'use strict';i.listen(n,'click',function(){var p=j.getUnreadIDs();if(p.length)k.markNotificationsAsRead(p);});l.subscribe('read-state-updated',function(){if(o)h.setContent(o,j.getUnreadCount());});}f.exports=m;},null);
__d('NotificationJewelListController',['Bootloader','React','ReactDOM'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=null,l=null;function m(n,o){'use strict';this.$NotificationJewelListController1=n;this.$NotificationJewelListController2=o;this.$NotificationJewelListController3=false;this.$NotificationJewelListController4=false;}m.prototype.open=function(){'use strict';this.$NotificationJewelListController3=true;this.$NotificationJewelListController5();};m.prototype.pause=function(){'use strict';this.$NotificationJewelListController4=true;this.$NotificationJewelListController5();};m.prototype.unpause=function(){'use strict';this.$NotificationJewelListController4=false;this.$NotificationJewelListController5();};m.prototype.$NotificationJewelListController5=function(){'use strict';if(!k||!l){h.loadModules(["NotificationList.react","NotificationJewelList.react"],function(n,o){k=n;l=o;this.$NotificationJewelListController6();}.bind(this));}else this.$NotificationJewelListController6();};m.prototype.$NotificationJewelListController6=function(){'use strict';j.render(i.createElement(k,{hasEverBeenOpened:this.$NotificationJewelListController3,paused:this.$NotificationJewelListController4,tracking:this.$NotificationJewelListController2.tracking,negativeTracking:this.$NotificationJewelListController2.negativeTracking,shortenTimestamp:this.$NotificationJewelListController2.shortenTimestamp,businessID:this.$NotificationJewelListController2.businessID,maxHeight:this.$NotificationJewelListController2.maxHeight,useChevron:this.$NotificationJewelListController2.useChevron,chevronType:this.$NotificationJewelListController2.chevronType,numPerPage:5,listRenderer:l,upsell:this.$NotificationJewelListController2.upsell||null,endpoint:this.$NotificationJewelListController2.endpoint}),this.$NotificationJewelListController1);};f.exports=m;},null);
__d('UFIUIEvents',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='UFIUIEvents/ufiActionAddComment',i='UFIUIEvents/ufiActionLinkLike',j='UFIUIEvents/ufiActionLinkUnlike',k='ufi/blur',l='ufi/changed',m='ufi/comment',n='CommentUFI.Pager',o='ufi/focus',p='ufi/inputHeightChanged',q='ufi/page_cleared',r='ufi/photoPreviewHightChanged',s='ufi/translationRendered',t='ufi/reactionButtonClicked',u={ActionAddComment:h,ActionLinkLike:i,ActionLinkUnlike:j,Blur:k,Changed:l,Comment:m,CommentPager:n,Focus:o,InputHeightChanged:p,PageCleared:q,PhotoPreviewHeightChanged:r,TranslationRendered:s,ReactionButtonClicked:t};f.exports=u;},null);
__d("XBrowserPushDisabledController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/notifications\/client\/push\/disabled\/",{});},null);
__d("XBrowserPushXOutController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/notifications\/client\/push\/xout\/",{});},null);
__d("XServiceWorkerSessionChangeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/service_workers\/session\/persist\/",{});},null);
__d('BrowserPushSessionChange.react',['AsyncRequest','BanzaiLogger','Image.react','ImageBlock.react','LayerFadeOnHide','React','ReactLayeredComponentMixin','ReloadPage','XBrowserPushDisabledController','XBrowserPushXOutController','XServiceWorkerSessionChangeController','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogOkayButton.react','XUIDialogTitle.react','XUISpinner.react','XUIText.react','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){if(c.__markCompiled)c.__markCompiled();var da=m.PropTypes,ea=m.createClass({displayName:'BrowserPushSessionChange',mixins:[n],propTypes:{onHide:da.func.isRequired,push:da.object.isRequired},getInitialState:function(){return {dialogShown:true,spin:false};},_onToggle:function(fa){if(fa)return;this.setState({dialogShown:false});this._logEvent('session_keep');var ga=r.getURIBuilder().getURI();new h().setURI(ga).setMethod('post').setData({app_id:this.props.push.appID}).setAllowCrossPageTransition(true).setHandler(function(ha){this.props.onHide();}.bind(this)).send();},_logEvent:function(event){var fa={event:event,appid:this.props.push.appID,surface:'session_change'};i.log('BrowserPushLoggerConfig',fa);},_doNotPersist:function(){this.setState({spin:true});this._logEvent('session_uninstall');this._logEvent('xout');var fa=q.getURIBuilder().getURI(),ga=function(){this.props.push.unregisterPushAndSW(p,h).then(function(ha){o.now();})['catch'](function(ha){throw ha;});}.bind(this);new h().setURI(fa).setMethod('post').setHandler(ga).setAllowCrossPageTransition(true).send();},componentDidMount:function(){this._logEvent('session_change_prompt');},renderLayers:function(){if(!this.state.dialogShown)return {};var fa=ca('/images/notifications/potsy_jump.png');return {dialog:m.createElement(s,{shown:true,behaviors:{LayerFadeOnHide:l},onToggle:this._onToggle,width:445},m.createElement(x,null,ba._("Desktop Notifications Are On")),m.createElement(t,null,this.state.spin?m.createElement(y,{size:'large'}):m.createElement(k,{spacing:'medium'},m.createElement(j,{src:fa,alt:ba._("Desktop Notifications Are On")}),m.createElement('div',null,m.createElement('div',{className:"_3-8h"},m.createElement(z,{size:'large'},ba._("When you get a new notification, you'll see it in the corner of your screen."))),m.createElement('div',{className:"_3-8h"},m.createElement(z,{size:'small'},ba._("To be sure you get notifications, you'll now stay logged into Facebook on this computer. If you're using a public computer or don't want to stay logged in, click Undo to turn off desktop notifications.")))))),m.createElement(v,null,m.createElement(u,{action:'button',label:ba._("Undo"),onClick:this._doNotPersist}),m.createElement(w,{use:'confirm',action:'cancel'})))};},render:function(){return (m.createElement('span',null));}});f.exports=ea;},null);
__d('XUIAmbientNUXBody.react',['React','XUICloseButton.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=h.createClass({displayName:'XUIAmbientNUXBody',propTypes:{onCloseButtonClick:l.func},render:function(){var n=k("_21es",this.props.className);return (h.createElement('div',{className:n},h.createElement(i,{shade:'light',className:"_36gl",onClick:this.props.onCloseButtonClick}),h.createElement('div',{className:"_36gn"},this.props.children)));}});f.exports=m;},null);
__d('XUIAmbientNUXTheme',['cx'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={wrapperClassName:"_2x6q",arrowDimensions:{offset:14,length:18}};f.exports=i;},null);
__d('XUIAmbientNUX.react',['HasLayerContextMixin','React','ReactLayer','ReactAbstractContextualDialog','XUIAmbientNUXTheme','XUIAmbientNUXBody.react'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes,o=300,p=380,q=j.createClass(k.createSpec({displayName:'XUIAmbientNUX',theme:l})),r=i.createClass({displayName:'XUIAmbientNUX',propTypes:{alignment:n.oneOf(['left','center','right']),behaviors:n.object,context:n.object,contextRef:n.func,customwidth:n.number,hasActionableContext:n.bool,offsetX:n.number,offsetY:n.number,onCloseButtonClick:n.func,position:n.oneOf(['above','below','left','right']),shown:n.bool,width:n.oneOf(['wide','normal','auto','custom'])},_getWidth:function(){switch(this.props.width){case 'wide':return p;case 'custom':return this.props.customwidth;case 'auto':return null;default:return o;}},render:function(){return (i.createElement(q,{alignment:this.props.alignment,autoFocus:false,behaviors:this.props.behaviors,context:this.props.context,contextRef:this.props.contextRef,focusContextOnHide:false,hasActionableContext:this.props.hasActionableContext,offsetX:this.props.offsetX,offsetY:this.props.offsetY,position:this.props.position,shown:this.props.shown,width:this._getWidth(this.props)},i.createElement(m,{onCloseButtonClick:this.props.onCloseButtonClick},this.props.children)));}});f.exports=r;},null);
__d('NotificationPermissionNotice.react',['Event','Keys','React','ReactLayeredComponentMixin','XUIAmbientNUX.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=[],p=j.PropTypes,q=j.createClass({displayName:'NotificationPermissionNotice',mixins:[k],propTypes:{onHide:p.func.isRequired,shortText:p.bool,browserName:p.string.isRequired},componentDidMount:function(){o.push(h.listen(window,'mousedown',this.props.onHide));o.push(h.listen(window,'keydown',function(event){if(event.keyCode===i.ESC)this.props.onHide();}.bind(this)));},componentWillUnmount:function(){while(o.length>0){var r=o.pop();r.remove();}},renderLayers:function(){var r=this.props.shortText?n._("Click the lock to give {browser_name} permission to send you desktop notifications.",[n.param('browser_name',this.props.browserName)]):n._("If you change your mind, click the lock to give {browser_name} permission to send you desktop notifications.",[n.param('browser_name',this.props.browserName)]);return {nux:j.createElement(l,{contextRef:function(){return this.refs.noticeAnchor;}.bind(this),shown:true,position:'below',onCloseButtonClick:this.props.onHide},r)};},render:function(){return (j.createElement('span',{ref:'noticeAnchor',className:"_1_i1"}));}});f.exports=q;},null);
__d('Spotlight',['Arbiter','ArbiterMixin','DOM','JSXDOM','Layer','LayerAutoFocus','LayerTabIsolation','ModalLayer','Vector','classWithMixins','csx','cx','joinClasses','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v,w;if(c.__markCompiled)c.__markCompiled();v=babelHelpers.inherits(x,q(l,u(i)));w=v&&v.prototype;function x(z,aa){'use strict';w.constructor.call(this,z,aa);this.stageMinSize=new p(0,0);this.stagePadding=new p(0,0);}x.prototype._buildWrapper=function(z,aa){'use strict';var ba=t("_n8 _3qx",z.rootClassName);return (k.div({className:ba},k.div({className:"_n9"},aa)));};x.prototype._getDefaultBehaviors=function(){'use strict';return w._getDefaultBehaviors.call(this).concat([y,m,n,o]);};x.prototype.getContentRoot=function(){'use strict';if(!this._content)this._content=j.find(this.getRoot(),"div._n3");return this._content;};x.prototype.configure=function(z){'use strict';if(z.stageMinSize)this.stageMinSize=z.stageMinSize;if(z.stagePadding)this.stagePadding=z.stagePadding;};x.prototype.onContentLoaded=function(){'use strict';this.inform('content-load');};x.prototype.updatePermalink=function(z){'use strict';this.inform('permalinkchange',z);};Object.assign(x.prototype,{stageMinSize:null,stagePadding:null});function y(z){'use strict';this._layer=z;}y.prototype.enable=function(){'use strict';this._subscription=this._layer.subscribe(['show','hide'],function(z,aa){if(z==='show'){h.inform('layer_shown',{type:'Spotlight'});}else h.inform('layer_hidden',{type:'Spotlight'});});};y.prototype.disable=function(){'use strict';this._subscription.unsubscribe();this._subscription=null;};Object.assign(y.prototype,{_subscription:null});f.exports=x;},null);
__d('Spotlight.react',['LayerHideOnBlur','LayerHideOnEscape','ReactLayer','Spotlight'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=j.createClass({getDefaultEnabledBehaviors:function(){return {hideOnBlur:h,hideOnEscape:i};},createLayer:function(m){var n=this.enumerateBehaviors(this.props.behaviors),o={addedBehaviors:n,rootClassName:this.props.rootClassName},p=new k(o,m);p.conditionShow(this.props.shown);if(this.props.onBeforeHide)p.subscribe('beforehide',this.props.onBeforeHide);if(this.props.onHide)p.subscribe('hide',this.props.onHide);return p;},receiveProps:function(m){this.layer.conditionShow(m.shown);}});f.exports=l;},null);
__d('NotificationPermissionRequest.react',['Spotlight.react','React','ReactLayeredComponentMixin','cx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=i.PropTypes,m=i.createClass({displayName:'NotificationPermissionRequest',mixins:[j],propTypes:{onHide:l.func.isRequired},renderLayers:function(){return {spotlight:i.createElement(h,{shown:true,onHide:this.props.onHide},i.createElement('div',{className:"_n3"}))};},render:function(){return i.createElement('span',null);}});f.exports=m;},null);
__d('NotificationBeeperItemCloseButton.react',['React','XUIAbstractGlyphButton.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.createClass({displayName:'NotificationBeeperItemCloseButton',render:function(){return (h.createElement(i,babelHelpers['extends']({},this.props,{className:"_3soc",title:k._("Close")})));}});f.exports=l;},null);
__d('SyncRequestAcceptedMessage.react',['React','fbt','cx'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes,l=h.createClass({displayName:'SyncRequestAcceptedMessage',propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (h.createElement('div',null,i._("{receiver} accepted your invite to play {app name}.",[i.param('receiver',h.createElement('span',{className:"_dg4"},this.props.receiverName)),i.param('app name',h.createElement('span',{className:"_dg5"},this.props.appName))])));}else return (h.createElement('div',null,i._("You accepted an invite from {sender} to play {app name}.",[i.param('sender',h.createElement('span',{className:"_dg4"},this.props.senderName)),i.param('app name',h.createElement('span',{className:"_dg5"},this.props.appName))])));}});f.exports=l;},null);
__d('SyncRequestCanceledMessage.react',['React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes,l=h.createClass({displayName:'SyncRequestCanceledMessage',propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (h.createElement('div',null,j._("You canceled an invite to {receiver} to play {app name}.",[j.param('receiver',h.createElement('span',{className:"_dg4"},this.props.receiverName)),j.param('app name',h.createElement('span',{className:"_dg5"},this.props.appName))])));}else return (h.createElement('div',null,j._("{sender} canceled an invitation to play {app name}.",[j.param('sender',h.createElement('span',{className:"_dg4"},this.props.senderName)),j.param('app name',h.createElement('span',{className:"_dg5"},this.props.appName))])));}});f.exports=l;},null);
__d('SyncRequestExpiredMessage.react',['React','fbt','cx'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes,l=h.createClass({displayName:'SyncRequestExpiredMessage',propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (h.createElement('div',null,i._("{receiver} missed your invite to play {app name}.",[i.param('receiver',h.createElement('span',{className:"_dg4"},this.props.receiverName)),i.param('app name',h.createElement('span',{className:"_dg5"},this.props.appName))])));}else return (h.createElement('div',null,i._("You missed an invite from {sender} to play {app name}.",[i.param('sender',h.createElement('span',{className:"_dg4"},this.props.senderName)),i.param('app name',h.createElement('span',{className:"_dg5"},this.props.appName))])));}});f.exports=l;},null);
__d('SyncRequestRejectedMessage.react',['AsyncRequest','Link.react','React','URI','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=j.PropTypes,o=j.createClass({displayName:'SyncRequestRejectedMessage',propTypes:{requestId:n.string.isRequired,app:n.object.isRequired,isSender:n.bool.isRequired,receiver:n.object.isRequired,sender:n.object.isRequired},render:function(){if(this.props.isSender){return (j.createElement('div',null,m._("{receiver} declined your invite to play {app_name}.",[m.param('receiver',j.createElement('span',{className:"_dg4"},this.props.receiver.name)),m.param('app_name',j.createElement('span',{className:"_dg5"},this.props.app.name))])));}else return (j.createElement('div',null,m._("You declined an invite from {sender} to play {app_name}.",[m.param('sender',j.createElement('span',{className:"_dg4"},this.props.sender.name)),m.param('app_name',j.createElement('span',{className:"_dg5"},this.props.app.name))]),j.createElement('div',{className:"_13n7"},j.createElement('div',null,j.createElement(i,{onClick:this._submitBlockApp},m._("Block {app}",[m.param('app',this.props.app.name)]))),j.createElement('div',null,j.createElement(i,{onClick:this._submitBlockUser},m._("Block requests from {sender}",[m.param('sender',this.props.sender.name)]))))));},_submitBlockApp:function(){var p=new k('/games/block_app/'),q=new h().setURI(p);q.setData({app_id:this.props.app.id,source:'sync_request'});q.send();},_submitBlockUser:function(){var p=new k('/games/block_user/'),q=new h().setURI(p);q.setData({app_id:this.props.app.id,blockee_uid:this.props.sender.id});q.send();}});f.exports=o;},null);
__d('SyncRequestTimer.react',['React','fbt'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.PropTypes;function k(m){if(m){m=Math.ceil(m);var n=m%60;if(n<10)n='0'+n;var o=Math.floor(m/60);return o+':'+n;}else return "0:00";}var l=h.createClass({displayName:'SyncRequestTimer',propTypes:{timeRemaining:j.number.isRequired,isSender:j.bool.isRequired,receiverName:j.string.isRequired},render:function(){if(this.props.isSender){return (h.createElement('div',null,i._("({time_remaining} remaining)",[i.param('time_remaining',k(this.props.timeRemaining))])));}else return (h.createElement('div',null,i._("You have {time_remaining} to accept.",[i.param('time_remaining',k(this.props.timeRemaining))])));}});f.exports=l;},null);
__d('SyncRequestTitle.react',['React','fbt','cx'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes,l=h.createClass({displayName:'SyncRequestTitle',propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (h.createElement('div',null,i._("Waiting for {receiver} to accept your invite to play {app_name}.",[i.param('receiver',h.createElement('span',{className:"_dg4"},this.props.receiverName)),i.param('app_name',h.createElement('span',{className:"_dg5"},this.props.appName))])));}else return (h.createElement('div',null,i._("{sender} wants to play {app_name} with you, right now.",[i.param('sender',h.createElement('span',{className:"_dg4"},this.props.senderName)),i.param('app_name',h.createElement('span',{className:"_dg5"},this.props.appName))])));}});f.exports=l;},null);
__d("XSyncRequestSubmitController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/platform\/games\/sync_requests\/submit\/",{request_id:{type:"Int",required:true},sender:{type:"Int",required:true},action:{type:"Int",required:true}});},null);
__d('SyncRequest.react',['Arbiter','AsyncRequest','ChannelConstants','React','SyncRequestStatusEnum','SyncRequestTitle.react','SyncRequestAcceptedMessage.react','SyncRequestRejectedMessage.react','SyncRequestExpiredMessage.react','SyncRequestCanceledMessage.react','SyncRequestTimer.react','XUIButton.react','XSyncRequestSubmitController','cx','fbt','getObjectValues'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=k.PropTypes,y=k.createClass({displayName:'SyncRequest',propTypes:{app:x.object.isRequired,creationTime:x.number.isRequired,requestId:x.string.isRequired,receiver:x.object.isRequired,sender:x.object.isRequired,status:x.oneOf(w(l)).isRequired,timeout:x.number.isRequired,timeRemaining:x.number.isRequired,viewerId:x.number.isRequired,onStatusUpdate:x.func},componentWillMount:function(){if(this.props.status===l.PENDING){var z=h.subscribe(j.getArbiterType('sync_request_updated'),function(ca,da){da=da.obj;if(da.id.toString()!==this.props.requestId)return;this.setState({status:da.status});}.bind(this));this.setState({statusEvent:z});}var aa=null;if(this.props.status===l.PENDING){var ba=function(){this.setState({time_remaining:this.state.time_remaining-1});if(this.state.time_remaining<=0){clearInterval(this.state.counter);var ca={counter:null,time_remaining:0};if(this.state.status===l.PENDING)ca.status=l.EXPIRED;this.setState(ca);}};aa=setInterval(ba.bind(this),1000);}this.setState({time_remaining:this.props.timeRemaining,counter:aa});},componentWillUnmount:function(){if(this.state.counter)clearInterval(this.state.counter);h.unsubscribe(this.state.statusEvent);},getInitialState:function(){return {buttonsDisabled:false,time:Date.now(),status:this.props.status,viewerIsSender:this.props.viewerId===this.props.sender.id};},componentDidUpdate:function(z,aa){if(this.props.status!=l.PENDING)this.state.status=this.props.status;if(this.props.onStatusUpdate)this.props.onStatusUpdate(this.state.status,aa.status);},render:function(){var z;switch(this.state.status){case l.PENDING:var aa;if(!this.state.viewerIsSender){aa=[k.createElement(s,{use:'confirm',onClick:this._handleAccept,disabled:this.state.buttonsDisabled,label:v._("Accept")}),k.createElement(s,{use:'default',onClick:this._handleReject,disabled:this.state.buttonsDisabled,label:v._("Decline")})];}else aa=k.createElement(s,{use:'default',onClick:this._handleCancel,disabled:this.state.buttonsDisabled,label:v._("Cancel")});z=k.createElement('div',null,k.createElement('div',{className:"_372m"},k.createElement(m,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name})),k.createElement('div',{className:"_372n"},k.createElement(r,{isSender:this.state.viewerIsSender,timeRemaining:this.state.time_remaining,receiverName:this.props.receiver.name})),k.createElement('div',{className:"_372o"},aa));break;case l.ACCEPTED:z=k.createElement('div',{className:"_372p mvs"},k.createElement(n,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case l.REJECTED:z=k.createElement('div',{className:"_372p mvs"},k.createElement(o,{requestId:this.props.requestId,app:this.props.app,isSender:this.state.viewerIsSender,receiver:this.props.receiver,sender:this.props.sender}));break;case l.EXPIRED:z=k.createElement('div',{className:"_372p mvs"},k.createElement(p,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case l.CANCELED:z=k.createElement('div',{className:"_372p mvs"},k.createElement(q,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;default:throw new Error('The request status `%s` is unknown.',this.state.status);}return (k.createElement('div',{className:"_372q"},z));},_handleAccept:function(){this._handleStatusUpdate(l.ACCEPTED);var z=window.open(this.props.app.uri);if(z)z.focus();},_handleReject:function(){this._handleStatusUpdate(l.REJECTED);},_handleCancel:function(){this._handleStatusUpdate(l.CANCELED);},_handleStatusUpdate:function(z){this.setState({status:z,buttonsDisabled:true});var aa=t.getURIBuilder().setInt('request_id',this.props.requestId).setInt('sender',this.props.sender.id).setInt('action',z).getURI();new i().setURI(aa).setHandler(function(ba){this.setState({status:z});}.bind(this)).setErrorHandler(function(ba){this.setState({buttonsDisabled:false});}.bind(this)).send();}});f.exports=y;},null);
__d('legacy:cookie',['Cookie'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();b.getCookie=h.get;b.setCookie=h.set;b.clearCookie=h.clear;},3);
__d('EmployeePrefs',['Dock','DOM','Event','Keys','MenuDeprecated','NubController','Parent','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p,q;if(c.__markCompiled)c.__markCompiled();p=babelHelpers.inherits(r,m);q=p&&p.prototype;r.prototype.init=function(s,t){'use strict';q.init.call(this,s);this.menu=t;h.registerNubController(s,this);j.listen(s,'keydown',function(event){var u=j.getKeyCode(event)||event.which;switch(u){case k.UP:case k.DOWN:var v=n.byClass(event.getTarget(),'fbNubButton');if(v){this.show();var w=l.getItems(t);l.focusItem(w[u===k.UP?w.length-1:0]);return false;}break;case k.ESC:this.hide();setTimeout(function(){i.find(s,'a.fbNubButton').focus();},0);break;}}.bind(this));this.subscribe('show',this.onShow.bind(this));this.subscribe('hide',this.onHide.bind(this));this.buttonContentChanged();};r.prototype.onShow=function(){'use strict';l.register(this.menu);};r.prototype.onHide=function(){'use strict';l.unregister(this.menu);};r.prototype.getSamePageURLOnNewTier=function(s,t){'use strict';var u='www'+(t?'.'+t:'')+'.facebook.com';return new o(window.location.href).setProtocol(s.getProtocol()).setDomain(u).setSubdomain(s.getSubdomain()).setPath(s.getPath()).setQueryData(s.getQueryData()).setFragment(s.getFragment());};r.prototype.goToTier=function(s){'use strict';top.location.href=this.getSamePageURLOnNewTier(o.getRequestURI(),s);return false;};function r(){'use strict';p.apply(this,arguments);}f.exports=r;},null);
__d('BanzaiNectar',['Banzai'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(k){return {log:function(l,m,n){var o={e:m,a:n};h.post('nectar:'+l,o,k);}};}var j=i();j.create=i;f.exports=j;},null);
__d('QPRenderer',['$','CSS','XQuickPromotionSimpleLoggingController','AsyncSignal'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=function(q,event,r){var s=j.getURIBuilder().setInt('qp_id',q).setString('qp_event',event).setStringToStringMap('qp_instance_log_data',r).getURI();new k(s,{}).send();},m=function(q,r,s){var t=j.getURIBuilder().setInt('qp_id',q).setEnum('qp_action',r).setStringToStringMap('qp_instance_log_data',s).getURI();new k(t,{}).send();},n=function(q,r,s,t,u,v){p(q,s,h(t),v,function(){if(u)i.hide(r);});},o=function(q,r,s){r.show();l(q,'view',{});r.subscribe('cancel',function(){l(q,'dialog_cancel',{});});for(var t=0;t<s.length;t++){var u=s[t],v=h(u.element_id);p(q,u.action,v,u.instance_log_data,function(){if(u.should_close)r.hide();});if(u.action=='primary')v.focus();}},p=function(q,r,s,t,u){s.addEventListener('click',function(){var v=j.getURIBuilder().setInt('qp_id',q).setEnum('qp_action',r).setStringToStringMap('qp_instance_log_data',t).getURI();new k(v,{}).send();u();});};g.setAction=n;g.setDialogActionsAndShow=o;g.logAction=m;g.logEvent=l;},null);
__d("regeneratorRuntime",["Promise"],function a(b,c,d,e,f,g,h){"use strict";if(c.__markCompiled)c.__markCompiled();var i=Object.prototype.hasOwnProperty,j=typeof Symbol==="function"&&(typeof Symbol==="function"?Symbol.iterator:"@@iterator")||"@@iterator",k=f.exports;function l(fa,ga,ha,ia){var ja=Object.create((ga||s).prototype),ka=new ca(ia||[]);ja._invoke=z(fa,ha,ka);return ja;}k.wrap=l;function m(fa,ga,ha){try{return {type:"normal",arg:fa.call(ga,ha)};}catch(ia){return {type:"throw",arg:ia};}}var n="suspendedStart",o="suspendedYield",p="executing",q="completed",r={};function s(){}function t(){}function u(){}var v=u.prototype=s.prototype;t.prototype=v.constructor=u;u.constructor=t;t.displayName="GeneratorFunction";function w(fa){["next","throw","return"].forEach(function(ga){fa[ga]=function(ha){return this._invoke(ga,ha);};});}k.isGeneratorFunction=function(fa){var ga=typeof fa==="function"&&fa.constructor;return ga?ga===t||(ga.displayName||ga.name)==="GeneratorFunction":false;};k.mark=function(fa){if(Object.setPrototypeOf){Object.setPrototypeOf(fa,u);}else Object.assign(fa,u);fa.prototype=Object.create(v);return fa;};k.awrap=function(fa){return new x(fa);};function x(fa){this.arg=fa;}function y(fa){function ga(ma,na){var oa=fa[ma](na),pa=oa.value;return pa instanceof x?h.resolve(pa.arg).then(ha,ia):h.resolve(pa).then(function(qa){oa.value=qa;return oa;});}if(typeof process==="object"&&process.domain)ga=process.domain.bind(ga);var ha=ga.bind(fa,"next"),ia=ga.bind(fa,"throw"),ja=ga.bind(fa,"return"),ka;function la(ma,na){var oa=ka?ka.then(function(){return ga(ma,na);}):new h(function(pa){pa(ga(ma,na));});ka=oa["catch"](function(pa){});return oa;}this._invoke=la;}w(y.prototype);k.async=function(fa,ga,ha,ia){var ja=new y(l(fa,ga,ha,ia));return k.isGeneratorFunction(ga)?ja:ja.next().then(function(ka){return ka.done?ka.value:ja.next();});};function z(fa,ga,ha){var ia=n;return function ja(ka,la){if(ia===p)throw new Error("Generator is already running");if(ia===q){if(ka==="throw")throw la;return ea();}while(true){var ma=ha.delegate;if(ma){if(ka==="return"||ka==="throw"&&ma.iterator[ka]===undefined){ha.delegate=null;var na=ma.iterator["return"];if(na){var oa=m(na,ma.iterator,la);if(oa.type==="throw"){ka="throw";la=oa.arg;continue;}}if(ka==="return")continue;}var oa=m(ma.iterator[ka],ma.iterator,la);if(oa.type==="throw"){ha.delegate=null;ka="throw";la=oa.arg;continue;}ka="next";la=undefined;var pa=oa.arg;if(pa.done){ha[ma.resultName]=pa.value;ha.next=ma.nextLoc;}else{ia=o;return pa;}ha.delegate=null;}if(ka==="next"){if(ia===o){ha.sent=la;}else ha.sent=undefined;}else if(ka==="throw"){if(ia===n){ia=q;throw la;}if(ha.dispatchException(la)){ka="next";la=undefined;}}else if(ka==="return")ha.abrupt("return",la);ia=p;var oa=m(fa,ga,ha);if(oa.type==="normal"){ia=ha.done?q:o;var pa={value:oa.arg,done:ha.done};if(oa.arg===r){if(ha.delegate&&ka==="next")la=undefined;}else return pa;}else if(oa.type==="throw"){ia=q;ka="throw";la=oa.arg;}}};}w(v);v[j]=function(){return this;};v.toString=function(){return "[object Generator]";};function aa(fa){var ga={tryLoc:fa[0]};if(1 in fa)ga.catchLoc=fa[1];if(2 in fa){ga.finallyLoc=fa[2];ga.afterLoc=fa[3];}this.tryEntries.push(ga);}function ba(fa){var ga=fa.completion||{};ga.type="normal";delete ga.arg;fa.completion=ga;}function ca(fa){this.tryEntries=[{tryLoc:"root"}];fa.forEach(aa,this);this.reset(true);}k.keys=function(fa){var ga=[];for(var ha in fa)ga.push(ha);ga.reverse();return function ia(){while(ga.length){var ja=ga.pop();if(ja in fa){ia.value=ja;ia.done=false;return ia;}}ia.done=true;return ia;};};function da(fa){if(fa){var ga=fa[j];if(ga)return ga.call(fa);if(typeof fa.next==="function")return fa;if(!isNaN(fa.length)){var ha=-1,ia=function ja(){while(++ha<fa.length)if(i.call(fa,ha)){ja.value=fa[ha];ja.done=false;return ja;}ja.value=undefined;ja.done=true;return ja;};return ia.next=ia;}}return {next:ea};}k.values=da;function ea(){return {value:undefined,done:true};}ca.prototype={constructor:ca,reset:function(fa){this.prev=0;this.next=0;this.sent=undefined;this.done=false;this.delegate=null;this.tryEntries.forEach(ba);if(!fa)for(var ga in this)if(ga.charAt(0)==="t"&&i.call(this,ga)&&!isNaN(+ga.slice(1)))this[ga]=undefined;},stop:function(){this.done=true;var fa=this.tryEntries[0],ga=fa.completion;if(ga.type==="throw")throw ga.arg;return this.rval;},dispatchException:function(fa){if(this.done)throw fa;var ga=this;function ha(na,oa){ka.type="throw";ka.arg=fa;ga.next=na;return !!oa;}for(var ia=this.tryEntries.length-1;ia>=0;--ia){var ja=this.tryEntries[ia],ka=ja.completion;if(ja.tryLoc==="root")return ha("end");if(ja.tryLoc<=this.prev){var la=i.call(ja,"catchLoc"),ma=i.call(ja,"finallyLoc");if(la&&ma){if(this.prev<ja.catchLoc){return ha(ja.catchLoc,true);}else if(this.prev<ja.finallyLoc)return ha(ja.finallyLoc);}else if(la){if(this.prev<ja.catchLoc)return ha(ja.catchLoc,true);}else if(ma){if(this.prev<ja.finallyLoc)return ha(ja.finallyLoc);}else throw new Error("try statement without catch or finally");}}},abrupt:function(fa,ga){for(var ha=this.tryEntries.length-1;ha>=0;--ha){var ia=this.tryEntries[ha];if(ia.tryLoc<=this.prev&&i.call(ia,"finallyLoc")&&this.prev<ia.finallyLoc){var ja=ia;break;}}if(ja&&(fa==="break"||fa==="continue")&&ja.tryLoc<=ga&&ga<=ja.finallyLoc)ja=null;var ka=ja?ja.completion:{};ka.type=fa;ka.arg=ga;if(ja){this.next=ja.finallyLoc;}else this.complete(ka);return r;},complete:function(fa,ga){if(fa.type==="throw")throw fa.arg;if(fa.type==="break"||fa.type==="continue"){this.next=fa.arg;}else if(fa.type==="return"){this.rval=fa.arg;this.next="end";}else if(fa.type==="normal"&&ga)this.next=ga;},finish:function(fa){for(var ga=this.tryEntries.length-1;ga>=0;--ga){var ha=this.tryEntries[ga];if(ha.finallyLoc===fa){this.complete(ha.completion,ha.afterLoc);ba(ha);return r;}}},"catch":function(fa){for(var ga=this.tryEntries.length-1;ga>=0;--ga){var ha=this.tryEntries[ga];if(ha.tryLoc===fa){var ia=ha.completion;if(ia.type==="throw"){var ja=ia.arg;ba(ha);}return ja;}}throw new Error("illegal catch attempt");},delegateYield:function(fa,ga,ha){this.delegate={iterator:da(fa),resultName:ga,nextLoc:ha};return r;}};},null);
__d('BrowserPushCommands',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='browser_push_ack',i='browser_push_redirect',j='browser_push_window_visible',k={ACK:h,REDIRECT:i,WINDOW_VISIBLE:j};f.exports=k;},null);
__d('BrowserPushMessageHandler',['BrowserPushCommands','EventListener','isFacebookURI','URISchemes'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(event){if(event.data.command&&event.data.command===h.REDIRECT){if(typeof window.onbeforeunload()==='undefined'){event.ports[0].postMessage({command:h.ACK,success:true});}else{event.ports[0].postMessage({command:h.ACK,success:false});return;}var n=event.data.uri;if(/^([^.:/?#]+):/.test(n)&&!k.isAllowed(/^([^.:/?#]+):/.exec(n)[0])&&j(n))throw new Error('goURI: URI scheme rejected, URI: '+n);window.location.href=n;}}var m={registerRedirectHandler:function(){i.listen(window,'message',function(event){if(event.origin==="")l(event);});if(navigator.serviceWorker&&navigator.serviceWorker.addEventListener)navigator.serviceWorker.addEventListener('message',function(event){if(new RegExp('^'+window.location.protocol+'//'+window.location.host+'$').test(event.origin))l(event);});}};f.exports=m;},null);
__d('BrowserPushVisibilityChanger',['BrowserPushCommands','ClientServiceWorkerMessage','Visibility'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(){new i(h.WINDOW_VISIBLE,null).sendViaController();}var l={listenForVisibility:function(){if(!j.isHidden())k();j.addListener(j.VISIBLE,k);}};f.exports=l;},null);
__d('PushRegistration',['Promise','BrowserPushMessageHandler','BrowserPushVisibilityChanger','ClientServiceWorkerMessage','Map','ServiceWorkerRegistration'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=window.Notification,o=new l();p.get=function(q,r){'use strict';if(o.has(r))return o.get(r);var s=new p(q,r);o.set(r,s);return s;};function p(q,r){'use strict';this.$PushRegistration3=q;this.appID=r;if(!p.$PushRegistration1&&!p.$PushRegistration2){p.$PushRegistration1=false;p.$PushRegistration2=false;}}p.prototype.getPushSubscription=function(){'use strict';return new h(function(q,r){if(!n||n.permission==='denied')r(new Error('No permission or not supported'));m.getWorkerRegistration(this.$PushRegistration3).then(function(s){if(!s){q(null);return;}s.pushManager.getSubscription().then(function(t){q(t);})['catch'](r);})['catch'](r);}.bind(this));};p.prototype.$PushRegistration4=function(q){'use strict';var r=q.endpoint;if('subscriptionId' in q&&!new RegExp('/'+q.subscriptionId+'$').test(r))r+='/'+q.subscriptionId;return r;};p.prototype.$PushRegistration5=function(q,r,s,t){'use strict';var u=this.$PushRegistration4(s),v=null;if(s.getKey){var w=Array.from(new Uint8Array(s.getKey('p256dh'))),x=String.fromCharCode.apply(null,w);v=window.btoa(x);}var y=q.getURIBuilder().getURI(),z=new r(y);z.setData({app_id:this.appID,push_endpoint:u,endpoint_key:v});z.setMethod('post');if(z.setHandler)z.setHandler(function(aa){if(aa.payload&&aa.payload.session_change)t();});z.send();};p.prototype.getSubscription=function(){'use strict';return new h(function(q,r){this.getPushSubscription().then(function(s){if(s){q(this.$PushRegistration4(s));}else q(null);}.bind(this))['catch'](r);}.bind(this));};p.prototype.maybeRegisterPushAgain=function(q,r,s){'use strict';return new h(function(t,u){this.getPushSubscription().then(function(v){if(v){this.$PushRegistration5(q,r,v,s);t(this.$PushRegistration4(v));}else t(null);}.bind(this))['catch'](function(){t(null);});}.bind(this));};p.prototype.$PushRegistration6=function(q,r,s){'use strict';return new h(function(t,u){if(p.$PushRegistration2&&!s){u(new Error('sending disable info already'));return;}p.$PushRegistration2=true;var v=q.getURIBuilder().getURI(),w=new r(v.toString());w.setData({appid:this.appID,from_browser_settings:s});w.setMethod('post');if(w.listen){w.listen('finally',t);w.listen('fail',function(){p.$PushRegistration2=false;u();});}else if(w.setErrorHandler&&w.setHandler){w.setErrorHandler(function(){p.$PushRegistration2=false;u();});w.setHandler(t);}else t();w.send();}.bind(this));};p.prototype.isPushRegistered=function(q,r,s,t,u,v){'use strict';i.registerRedirectHandler();return new h(function(w,x){this.getPushSubscription().then(function(y){w(!!y||q&&!p.pushPermissionIsPending());if(y){if(u){y.unsubscribe().then(function(){this.registerPush(r,t,v);}.bind(this))['catch'](function(){});}else j.listenForVisibility();}else if(!y&&q)if(p.pushPermissionIsOn()){this.registerPush(r,t,v)['catch'](function(){});}else this.$PushRegistration6(s,t,false);}.bind(this))['catch'](function(){if(q){this.$PushRegistration6(s,t,false);x();}}.bind(this));}.bind(this));};p.prototype.$PushRegistration7=function(){'use strict';return new h(function(q,r){n.requestPermission(q);});};p.prototype.registerPushAndWaitForEndpoint=function(q,r,s){'use strict';return new h(function(t,u){this.$PushRegistration8(q,r,s,true,null).then(function(v){if(typeof v!=='string'){u(new Error('registerPushImpl did not return an endpoint'));return;}t(v);})['catch'](u);}.bind(this));};p.prototype.registerPush=function(q,r,s){'use strict';return this.registerPushWithFinishedCallBack(q,r,s,null);};p.prototype.registerPushWithFinishedCallBack=function(q,r,s,t){'use strict';return new h(function(u,v){this.$PushRegistration8(q,r,s,false,t).then(function(w){if(typeof w!=='boolean'){v(new Error('registerPushImpl did not return a boolean'));return;}u(w);})['catch'](v);}.bind(this));};p.prototype.$PushRegistration8=function(q,r,s,t,u){'use strict';if(p.$PushRegistration1)return new h(function(v,w){w(new Error('registering already'));});p.$PushRegistration1=true;return new h(function(v,w){var x=m.registerWorkerIfUnregistered(this.$PushRegistration3),y=this.$PushRegistration7();h.all([x,y]).then(function(z){var aa=z[0];if(!p.pushPermissionIsOn()){aa.unregister();throw new Error('Push permission was denied');}if(!t)v(true);aa.pushManager.subscribe({userVisibleOnly:true}).then(function(ba){if(t)v(this.$PushRegistration4(ba));this.$PushRegistration5(q,r,ba,s);if(u)u();j.listenForVisibility();}.bind(this))['catch'](function(ba){p.$PushRegistration1=false;aa.unregister();w(ba);});}.bind(this))['catch'](function(z){p.$PushRegistration1=false;w(z);});}.bind(this));};p.prototype.$PushRegistration9=function(q,r){'use strict';return new h(function(s,t){this.$PushRegistration6(q,r,true).then(function(){var u=new k('unregister',{},s);u.sendViaController();})['catch'](t);}.bind(this));};p.prototype.unregisterPushAndSW=function(q,r){'use strict';return new h(function(s,t){this.$PushRegistration6(q,r,true).then(function(){m.getWorkerRegistration(this.$PushRegistration3).then(function(u){if(u){u.pushManager.getSubscription().then(function(v){v.unsubscribe().then(function(){u.unregister().then(s).reject(t);})['catch'](function(){s(true);});})['catch'](function(){s(true);});}else u.unregister().then(s).reject(t);})['catch'](t);}.bind(this))['catch'](t);}.bind(this));};p.pushPermissionIsPending=function(){'use strict';return n&&n.permission==='default';};p.pushPermissionIsOn=function(){'use strict';return n&&n.permission==='granted';};f.exports=p;},null);
__d('TypeaheadFacepile',['DOM'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(){}i.render=function(j){var k=[h.create('span',{className:'splitpic leftpic'},[h.create('img',{alt:'',src:j[0]})]),h.create('span',{className:'splitpic'+(j[2]?' toppic':'')},[h.create('img',{alt:'',src:j[1]})])];if(j[2])k.push(h.create('span',{className:'splitpic bottompic'},[h.create('img',{alt:'',src:j[2]})]));return h.create('span',{className:'splitpics clearfix'},k);};f.exports=i;},null);
__d('NavigationMessage',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={NAVIGATION_BEGIN:'NavigationMessage/navigationBegin',NAVIGATION_SELECT:'NavigationMessage/navigationSelect',NAVIGATION_FIRST_RESPONSE:'NavigationMessage/navigationFirstResponse',NAVIGATION_COMPLETED:'NavigationMessage/navigationCompleted',NAVIGATION_FAILED:'NavigationMessage/navigationFailed',NAVIGATION_COUNT_UPDATE:'NavigationMessage/navigationCount',NAVIGATION_FAVORITE_UPDATE:'NavigationMessage/navigationFavoriteUpdate',NAVIGATION_ITEM_REMOVED:'NavigationMessage/navigationItemRemoved',NAVIGATION_ITEM_HIDDEN:'NavigationMessage/navigationItemHidden',INTERNAL_LOADING_BEGIN:'NavigationMessage/internalLoadingBegin',INTERNAL_LOADING_COMPLETED:'NavigationMessage/internalLoadingCompleted'};f.exports=h;},null);
__d('ContextualHelpSearchController',['Event','AsyncRequest','DOM','CSS','Focus','Input'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=400;function o(p,q,r,s,t,u){this._token=null;this._timerID=0;this._lastQuery=null;this.loader=p;this.search_box=q;this.topics_area=r;this.results_area=s;this.clear_button=t;this.typing_listener=h.listen(this.search_box,'keyup',this.setTimer.bind(this));this.clear_listener=h.listen(this.clear_button,'click',this.clearResults.bind(this));if(u==null||u.focusSearchBox==null||u.focusSearchBox)l.set(this.search_box);this.async_request=null;}Object.assign(o.prototype,{source:'contextual_help',clearResults:function(){this.show(this.topics_area);this._lastQuery='';m.reset(this.search_box);l.set(this.search_box);if(this.async_request!==null){this.async_request.abort();this.async_request=null;}k.addClass(this.clear_button,'hidden_elem');},update:function(){var p=m.getValue(this.search_box);if(p===this._lastQuery)return;this._lastQuery=p;if(p===''){this.clearResults();return;}this.show(this.loader);var q={query:p,width:this._width||n,source:this.source};this.async_request=new i('/help/ajax/search/').setData(q).setHandler(function(r){this._update(r);}.bind(this));this.async_request.send();},_update:function(p){this.async_request=null;var q=p.getPayload().results;j.setContent(this.results_area,q);this.show(this.results_area);if(m.getValue(this.search_box)===''){this.clearResults();}else k.removeClass(this.clear_button,'hidden_elem');},setTimer:function(){if(this._timerID!==0)clearTimeout(this._timerID);this._timerID=setTimeout(this.update.bind(this),300);if(this.async_request!=null){this.async_request.abort();this.async_request=null;}},show:function(p){var q=[this.loader,this.topics_area,this.results_area];for(var r=0;r<q.length;r++)k.addClass(q[r],'hidden_elem');k.removeClass(p,'hidden_elem');}});f.exports=o;},null);
__d('TickerController',['Arbiter','AsyncSignal','Bootloader','CSS','DOM','Parent','UIPagelet','Vector','$','emptyFunction','ge','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t=1,u=2,v=3,w=4,x=15000,y=null,z={},aa={},ba={setActiveInstance:function(ca){y=ca;},getActiveInstance:function(){return y;},clearRHCplaceholder:function(){z.pagelet_rhc_ticker=null;},registerInstance:function(ca,da){!ca?s(0):undefined;aa[ca]=da;ba.setActiveInstance(da);},getInstance:function(ca){if(!ca)return null;var da=m.byClass(p(ca),'fbFeedTicker');return aa[da.id]||null;},isLoaded:function(ca){var da=z[ca.id];return !da||da.status==v;},show:function(ca,da){da=da||q;for(var ea in aa){var fa=r(ea);if(!fa||fa.parentNode.id==ca.id)continue;ba.hide(fa.parentNode);}ba._doPositionChange(ca);k.show(ca);var ga=z[ca.id];if(ga&&ga.status==t){var ha=(o.getElementDimensions(ca).y||0)>0,ia=ca.id==='pagelet_rhc_ticker'&&!k.hasClass(ca,'hidden_rhc_ticker');if(ha||ia){ba._fetchTickerForPlaceholder(ca,da);}else h.subscribe('Ticker/resized',function(){if(ga.status==t)ba._fetchTickerForPlaceholder(ca,da);});}else{var ja=l.scry(ca,'.fbFeedTicker')[0],ka=ba.getInstance(ja);y=ka;ka&&ka._poll();z[ca.id]={status:w,callback:da};da();}h.inform('ticker/show',{node:ca,callback:da});},_doPositionChange:function(ca){if(k.shown(ca))return;new i('/common/ods_endpoint.php',{k:'ticker.render.switch.'+ca.id}).send();},hide:function(ca){var da=l.scry(ca,'.fbFeedTicker')[0],ea=ba.getInstance(da);ea&&ea.hideActiveStory();k.hide(ca);},hideStoriesByClass:function(ca){for(var da in aa)l.scry(p(da),ca).forEach(k.hide);},hideStory:function(ca){var da=ba.getInstance(ca);da&&da.hideStory(ca);},replaceStory:function(ca,da){var ea=l.scry(document.body,'div.fbFeedTickerStory'),fa=ba.getInstance(ea[0]);if(!fa)return;var ga=fa._findStoryById(ca);fa.handleRemoveStory();k.hide(ga);l.insertAfter(ga,da);da.setAttribute('data-story-id',ga.getAttribute('id'));var ha=setTimeout(function(){return ba.removeMarkup(da,ga);},x);da.setAttribute('data-timeout-token',ha);},removeMarkup:function(ca,da){j.loadModules(["Animation"],function(ea){k.addClass(ca,'removedStoryMarkup');new ea(ca).to('height',0).duration(500).ondone(function(){l.remove(ca);}).go();});},undoHideStory:function(ca){var da=ba.getInstance(ca);da&&da.undoHideStory(ca);},insertStoriesAtBottom:function(ca){y.insertStoriesAtBottom(ca);},_fetchTickerForPlaceholder:function(ca,da){var ea={handler:function(){z[ca.id].status=v;da();}};n.loadFromEndpoint('TickerEntStoryPagelet',ca.id,z[ca.id].pageletData,ea);z[ca.id].status=u;},registerStoryDialog:function(ca,da){h.subscribe('ticker/init',function(){var ea=r(ca),fa=ba.getInstance(ea);fa&&fa.registerStoryDialog(ea,da);},h.SUBSCRIBE_ALL);},registerPlaceholder:function(ca,da){var ea=z[ca];z[ca]={status:t,pageletData:da};if(ea&&ea.status==w){ba.show(p(ca));ea.callback();}}};f.exports=ba;},null);
__d("XGamesGripperNoteUpdaterController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/async\/games\/gripper_note_viewed\/",{});},null);
__d('SidebarAppTickerResizer',['Animation','Arbiter','AsyncRequest','ChatSidebarActions','ChatSidebarStore','CSS','cx','debounce','DOMQuery','Event','SidebarType','SimpleDrag','TickerController','$','queryThenMutateDOM','XGamesGripperNoteUpdaterController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w=1e-07,x=1,y=85,z=173,aa=300,ba=46,ca=90,da=82,ea=150;function fa(ga,ha,ia,ja,ka){'use strict';this.$SidebarAppTickerResizer1=u('pagelet_ticker');this.$SidebarAppTickerResizer2=u('pagelet_canvas_nav_content');this.$SidebarAppTickerResizer3=this.$SidebarAppTickerResizer1.parentNode;this.$SidebarAppTickerResizer4=ka;this.$SidebarAppTickerResizer2.style.height=ia;this.$SidebarAppTickerResizer5(ga,ha);if(ia===null)if(ja!==null){this.$SidebarAppTickerResizer6();this.$SidebarAppTickerResizer7(this.$SidebarAppTickerResizer8());}else i.subscribe('AppsDivebar/show-apps',this.$SidebarAppTickerResizer6.bind(this));if(!ka){this.$SidebarAppTickerResizer9();m.hide(ga);}i.subscribe('ChatSidebarDropdown/closeTicker',this.$SidebarAppTickerResizer9.bind(this));i.subscribe('ChatSidebarDropdown/openTicker',this.$SidebarAppTickerResizer10.bind(this));i.subscribe('sidebar/show',this.$SidebarAppTickerResizer11.bind(this));if(ja){var la=p.scry(document.body,'#pagelet_ticker')[0],ma=la&&la.parentNode,na,oa=function(){ja.hide();if(na)na.unsubscribe();},pa=function(){if(!m.shown(ma))return;var qa=c('XGamesGripperNoteUpdaterController').getURIBuilder().getURI();new j().setURI(qa).send();ja.show();if(na)na.unsubscribe();na=i.subscribe('sidebar/hide',oa);};if(ma&&m.shown(ma)){pa();}else na=i.subscribe('ticker/show',pa);}this.$SidebarAppTickerResizer12=o(this.$SidebarAppTickerResizer6.bind(this),200);q.listen(window,'resize',this.$SidebarAppTickerResizer12);i.inform('Ticker/resized');}fa.prototype.$SidebarAppTickerResizer11=function(){'use strict';t.show(this.$SidebarAppTickerResizer1);};fa.prototype.$SidebarAppTickerResizer6=function(ga){'use strict';v(function(){this.$SidebarAppTickerResizer13();}.bind(this),function(){var ha=Math.round(parseFloat(this.$SidebarAppTickerResizer1.style.height));if(ha>Math.round(this.$SidebarAppTickerResizer14())||this.$SidebarAppTickerResizer15&&this.$SidebarAppTickerResizer15>x){var ia=this.$SidebarAppTickerResizer15/this.$SidebarAppTickerResizer16*100,ja=this.$SidebarAppTickerResizer17(0,this.$SidebarAppTickerResizer14()-ia);if(!(ga&&ga.type==='resize'))this.$SidebarAppTickerResizer18(ja);k.show();}}.bind(this));};fa.prototype.$SidebarAppTickerResizer14=function(){'use strict';if(!this.$SidebarAppTickerResizer4)return 0;if(l.getVisibleType()!==r.SIDEBAR)return ca;return Math.min(ca,(this.$SidebarAppTickerResizer16-this.$SidebarAppTickerResizer19-da)*100/this.$SidebarAppTickerResizer16);};fa.prototype.$SidebarAppTickerResizer5=function(ga,ha){'use strict';var ia=new s(ga);ia.subscribe('start',this.$SidebarAppTickerResizer20.bind(this));ia.subscribe(['update','end'],this.$SidebarAppTickerResizer21.bind(this));var ja=new s(ha);ja.subscribe('start',this.$SidebarAppTickerResizer20.bind(this));ja.subscribe('update',this.$SidebarAppTickerResizer22.bind(this));ja.subscribe('end',this.$SidebarAppTickerResizer23.bind(this));};fa.prototype.$SidebarAppTickerResizer20=function(ga,event){'use strict';this.$SidebarAppTickerResizer24=event.clientY;this.$SidebarAppTickerResizer13();this.$SidebarAppTickerResizer25();};fa.prototype.$SidebarAppTickerResizer13=function(){'use strict';this.$SidebarAppTickerResizer19=this.$SidebarAppTickerResizer2.offsetTop;this.$SidebarAppTickerResizer26=this.$SidebarAppTickerResizer1.offsetHeight;this.$SidebarAppTickerResizer16=this.$SidebarAppTickerResizer3.offsetHeight;this.$SidebarAppTickerResizer15=this.$SidebarAppTickerResizer2.offsetHeight;this.$SidebarAppTickerResizer27=this.$SidebarAppTickerResizer15;};fa.prototype.$SidebarAppTickerResizer25=function(){'use strict';m.addClass(this.$SidebarAppTickerResizer3,"_4vfq");};fa.prototype.$SidebarAppTickerResizer28=function(){'use strict';m.removeClass(this.$SidebarAppTickerResizer3,"_4vfq");};fa.prototype.$SidebarAppTickerResizer21=function(ga,event){'use strict';var ha=this.$SidebarAppTickerResizer15/this.$SidebarAppTickerResizer16*100,ia=this.$SidebarAppTickerResizer17(event.clientY-this.$SidebarAppTickerResizer24,this.$SidebarAppTickerResizer14()-ha);if(ga=='end'){this.$SidebarAppTickerResizer28();this.$SidebarAppTickerResizer18(ia);}k.show();};fa.prototype.$SidebarAppTickerResizer22=function(ga,event){'use strict';var ha=-this.$SidebarAppTickerResizer15,ia=this.$SidebarAppTickerResizer8()-this.$SidebarAppTickerResizer15,ja=this.$SidebarAppTickerResizer29(event.clientY-this.$SidebarAppTickerResizer24,ha,ia);this.$SidebarAppTickerResizer17(-ja,this.$SidebarAppTickerResizer14());this.$SidebarAppTickerResizer27=this.$SidebarAppTickerResizer15+ja;this.$SidebarAppTickerResizer27=Math.max(x,this.$SidebarAppTickerResizer27);this.$SidebarAppTickerResizer2.style.height=this.$SidebarAppTickerResizer27+'px';};fa.prototype.$SidebarAppTickerResizer23=function(ga,event){'use strict';var ha=this.$SidebarAppTickerResizer27,ia=this.$SidebarAppTickerResizer30(this.$SidebarAppTickerResizer27),ja=this.$SidebarAppTickerResizer17(this.$SidebarAppTickerResizer15-ia,this.$SidebarAppTickerResizer14());if(this.$SidebarAppTickerResizer15!=ia){this.$SidebarAppTickerResizer7(ia);this.$SidebarAppTickerResizer18(ja);}new h(this.$SidebarAppTickerResizer2).from('height',ha).to('height',ia).duration(aa).go();};fa.prototype.$SidebarAppTickerResizer17=function(ga,ha){'use strict';var ia=this.$SidebarAppTickerResizer26+ga,ja=ia/this.$SidebarAppTickerResizer16*100;ja=Math.max(w,Math.min(ha,ja));this.$SidebarAppTickerResizer1.style.height=ja+'%';if(ja!=w){m.removeClass(this.$SidebarAppTickerResizer1,'hidden_elem');this.$SidebarAppTickerResizer11();}return ja;};fa.prototype.$SidebarAppTickerResizer30=function(ga){'use strict';var ha=this.$SidebarAppTickerResizer31(),ia=this.$SidebarAppTickerResizer8();return ga<ia-ba?ga<ha-ba?x:ha:ia;};fa.prototype.$SidebarAppTickerResizer31=function(){'use strict';return y;};fa.prototype.$SidebarAppTickerResizer8=function(){'use strict';return z;};fa.prototype.$SidebarAppTickerResizer32=function(ga){'use strict';var ha=this.$SidebarAppTickerResizer8();return ga<0?x:ga>ha?ha:ga;};fa.prototype.$SidebarAppTickerResizer29=function(ga,ha,ia){'use strict';return ga<ha?ha:ga>ia?ia:ga;};fa.prototype.$SidebarAppTickerResizer18=function(ga){'use strict';new j('/ajax/feed/ticker/resize').setData({height:''+ga}).setMethod('POST').send();i.inform('Ticker/resized');};fa.prototype.$SidebarAppTickerResizer7=function(ga){'use strict';new j('/ajax/feed/apps/resize').setData({height:''+ga}).setMethod('POST').send();};fa.prototype.$SidebarAppTickerResizer33=function(ga){'use strict';var ha=this.$SidebarAppTickerResizer26,ia=this.$SidebarAppTickerResizer16*ga/100;new h(this.$SidebarAppTickerResizer1).from('height',ha).to('height',ia).duration(ea).ondone(function(){this.$SidebarAppTickerResizer1.style.height=ga+'%';this.$SidebarAppTickerResizer18(ga===0?'0.0':ga);k.show();}.bind(this)).go();};fa.prototype.$SidebarAppTickerResizer9=function(){'use strict';this.$SidebarAppTickerResizer13();this.$SidebarAppTickerResizer33(0);};fa.prototype.$SidebarAppTickerResizer10=function(){'use strict';this.$SidebarAppTickerResizer1.style.height='40px';t.show(this.$SidebarAppTickerResizer1,function(){this.$SidebarAppTickerResizer13();var ga=(this.$SidebarAppTickerResizer16-this.$SidebarAppTickerResizer19-da-this.$SidebarAppTickerResizer15)*50/this.$SidebarAppTickerResizer16;this.$SidebarAppTickerResizer33(ga);}.bind(this));};f.exports=fa;},null);
__d('TickerReadStateTracking',['Style','clickRefAction'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=73,k='ticker_hover',l=[];function m(o){if(!o)return null;var p=JSON.parse(o.getAttribute('data-ft'));if(!p)return null;if(p.mf_story_key)return p.mf_story_key;if(p.fbid)return p.fbid;return null;}function n(o){var p=m(o);if(!p||p in l)return;l[p]=true;var q={evt:j};i(k,o,null,'FORCE',{ft:q});}f.exports.log=n;},null);
__d('ContextualDialogFooterLink',['CSS','DOM','Event'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l){'use strict';this._layer=l;}k.prototype.enable=function(){'use strict';var l=this._layer.getRoot(),m=i.scry(l,'.uiContextualDialogFooterLink')[0],n='uiContextualDialogHoverFooterArrow';this._subscriptions=[j.listen(m,'mouseenter',h.addClass.bind(null,l,n)),j.listen(m,'mouseleave',h.removeClass.bind(null,l,n))];};k.prototype.disable=function(){'use strict';this._subscriptions.forEach(function(l){l.remove();});this._subscriptions=null;};Object.assign(k.prototype,{_subscriptions:null});f.exports=k;},null);
__d('LayerHideOnSuccess',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._layer=i;}h.prototype.enable=function(){'use strict';this._subscription=this._layer.subscribe('success',this._layer.hide.bind(this._layer));};h.prototype.disable=function(){'use strict';if(this._subscription){this._subscription.unsubscribe();this._subscription=null;}};Object.assign(h.prototype,{_subscription:null});f.exports=h;},null);
__d('Overlay',['CSS','DataStore','DOM','Layer','LayerButtons','LayerDestroyOnHide','LayerFadeOnHide','LayerFadeOnShow','LayerFormHooks','LayerHideOnBlur','LayerHideOnEscape','LayerHideOnSuccess','LayerHideOnTransition','LayerMouseHooks','LayerTabIsolation'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w,x;if(c.__markCompiled)c.__markCompiled();w=babelHelpers.inherits(y,k);x=w&&w.prototype;function y(z,aa){'use strict';z=babelHelpers['extends']({buildWrapper:true},z);x.constructor.call(this,z,aa);}y.prototype._configure=function(z,aa){'use strict';this._shouldBuildWrapper=z.buildWrapper;x._configure.call(this,z,aa);var ba=this.getRoot();this._overlay=j.scry(ba,'div.uiOverlay')[0]||ba;h.hide(ba);j.appendContent(this.getInsertParent(),ba);i.set(this._overlay,'overlay',this);var ca=i.get(this._overlay,'width');ca&&this.setWidth(ca);if(this.setFixed)this.setFixed(i.get(this._overlay,'fixed')=='true');if(i.get(this._overlay,'fadeonshow')!='false')this.enableBehavior(o);if(i.get(this._overlay,'fadeonhide')!='false')this.enableBehavior(n);if(i.get(this._overlay,'hideonsuccess')!='false')this.enableBehavior(s);if(i.get(this._overlay,'hideonblur')=='true')this.enableBehavior(q);if(i.get(this._overlay,'destroyonhide')!='false')this.enableBehavior(m);return this;};y.prototype._getDefaultBehaviors=function(){'use strict';return x._getDefaultBehaviors.call(this).concat([l,p,u,r,t,v]);};y.prototype.initWithoutBuildingWrapper=function(){'use strict';this._shouldBuildWrapper=false;return this.init.apply(this,arguments);};y.prototype._buildWrapper=function(z,aa){'use strict';aa=x._buildWrapper.call(this,z,aa);if(!this._shouldBuildWrapper){this._contentRoot=aa;return aa;}this._contentRoot=j.create('div',{className:'uiOverlayContent'},aa);return j.create('div',{className:'uiOverlay'},this._contentRoot);};y.prototype.getContentRoot=function(){'use strict';return this._contentRoot;};y.prototype.destroy=function(){'use strict';i.remove(this.getRoot(),'overlay');x.destroy.call(this);};f.exports=y;},null);
__d('LegacyContextualDialog',['Arbiter','ArbiterMixin','ARIA','Bootloader','ContextualDialogFooterLink','ContextualThing','CSS','DataStore','DOM','Event','LayerAutoFocus','LayerRefocusOnHide','Locale','Overlay','Parent','Scroll','Style','Vector','$','csx','cx','getOrCreateDOMID','getOverlayZIndex','shield'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){var fa,ga;if(c.__markCompiled)c.__markCompiled();fa=babelHelpers.inherits(ha,u);ga=fa&&fa.prototype;ha.prototype._configure=function(ia,ja){'use strict';ga._configure.call(this,ia,ja);var ka=this.getRoot(),la=o.get.bind(null,ka);this.setAlignH(la('alignh','left'));this.setOffsetX(la('offsetx',0));this.setOffsetY(la('offsety',0));this.setPosition(la('position','above'));this._hasFooter=la('hasfooter',false);if(this._hasFooter){var ma=p.scry(ka,'.uiContextualDialogFooterLink')[0];ma&&this.enableBehavior(l);}this.enableBehaviors(this._getDefaultBehaviors());this._setContextSubscription=this.subscribe('beforeshow',function(){this.unsubscribe(this._setContextSubscription);this._setContextSubscription=null;var oa=la('context');if(oa){this.setContext(z(oa));}else{oa=la('contextselector');if(oa)this.setContext(p.find(document,oa));}}.bind(this));this._content=p.scry(ka,'.uiContextualDialogContent')[0];if(this._content){this._content.setAttribute('role','dialog');var na=p.scry(this._content,'.legacyContextualDialogTitle')[0];if(na)this._content.setAttribute('aria-labelledby',ca(na));}this._showSubscription=this.subscribe('show',function(){var oa=ea(this.updatePosition,this);this._resizeListener=q.listen(window,'resize',oa);this._reflowSubscription=h.subscribe('reflow',oa);this._setupScrollListener(this._scrollParent);m.register(ka,this.context);h.inform('layer_shown',{type:'ContextualDialog'});}.bind(this));this._hideSubscription=this.subscribe('hide',function(){this._teardownResizeAndReflowListeners();this._teardownScrollListener();h.inform('layer_hidden',{type:'ContextualDialog'});}.bind(this));return this;};ha.prototype._getDefaultBehaviors=function(){'use strict';return ga._getDefaultBehaviors.call(this).concat([r,s]);};ha.prototype._buildWrapper=function(ia,ja){'use strict';var ka=ga._buildWrapper.call(this,ia,ja);if(!this._shouldBuildWrapper)return ka;n.addClass(ka,'uiContextualDialog');return p.create('div',{className:'uiContextualDialogPositioner'},ka);};ha.prototype.setWidth=function(ia){'use strict';this._width=Math.floor(ia);return this;};ha.prototype.setFixed=function(ia){'use strict';ia=!!ia;n.conditionClass(this.getRoot(),'uiContextualDialogFixed',ia);this._fixed=ia;return this;};ha.prototype.setAlignH=function(ia){'use strict';this.alignH=ia;this._updateAlignmentClass();this._shown&&this.updatePosition();this.position&&this._updateArrow();return this;};ha.prototype.getContent=function(){'use strict';return this._content;};ha.prototype.getContext=function(){'use strict';return this.context;};ha.prototype.setContext=function(ia){'use strict';if(this._setContextSubscription){this.unsubscribe(this._setContextSubscription);this._setContextSubscription=null;}ia=z(ia);if(this.context&&this.context!=ia)o.remove(this.context,'LegacyContextualDialog');this.context=ia;j.setPopup(this.getCausalElement(),this.getRoot());var ja=v.bySelector(ia,"._4d3w");this.setInsertParent(ja||document.body);if(this._scrollListener&&this._scrollParent!==ja){this._teardownScrollListener();this._setupScrollListener(ja);}this._scrollParent=ja;var ka=da(ia,this._insertParent);x.set(this.getRoot(),'z-index',ka>200?ka:'');o.set(this.context,'LegacyContextualDialog',this);return this;};ha.prototype.getCausalElement=function(){'use strict';return ga.getCausalElement.call(this)||this.context;};ha.prototype.listen=function(ia,ja){'use strict';return q.listen(this.getRoot(),ia,ja);};ha.prototype.setOffsetX=function(ia){'use strict';this.offsetX=parseInt(ia,10)||0;this._shown&&this.updatePosition();return this;};ha.prototype.setOffsetY=function(ia){'use strict';this.offsetY=parseInt(ia,10)||0;this._shown&&this.updatePosition();return this;};ha.prototype.setPosition=function(ia){'use strict';this.position=ia;for(var ja in ha.POSITION_TO_CLASS)n.conditionClass(this.getRoot(),ha.POSITION_TO_CLASS[ja],ia==ja);this._updateAlignmentClass();this._shown&&this.updatePosition();this._updateArrow();return this;};ha.prototype.updatePosition=function(){'use strict';if(!this.context)return false;if(this._width)x.set(this._overlay,'width',this._width+'px');var ia=this._fixed?'viewport':'document',ja=y.getElementPosition(this.context,ia),ka=this._scrollParent;if(ka)ja=ja.sub(y.getElementPosition(ka,'document')).add(w.getLeft(ka),w.getTop(ka));var la=y.getElementDimensions(this.context),ma=this.position=='above'||this.position=='below',na=t.isRTL();if((this.position=='right'||ma&&this.alignH=='right')!=na)ja=ja.add(la.x,0);if(this.position=='below')ja=ja.add(0,la.y);var oa=new y(0,0);if(ma&&this.alignH=='center'){oa=oa.add((la.x-this._width)/2,0);}else{var pa=ma?la.x:la.y,qa=2*ha.ARROW_INSET;if(pa<qa){var ra=pa/2-ha.ARROW_INSET;if(ma&&this.alignH=='right'!=na)ra=-ra;oa=oa.add(ma?ra:0,ma?0:ra);}}oa=oa.add(this.offsetX,this.offsetY);if(na)oa=oa.mul(-1,1);ja=ja.add(oa);if(this._fixed)ja=new y(ja.x,ja.y,'document');ja.setElementPosition(this.getRoot());this._adjustVerticalPosition();this._adjustHorizontalPosition();return true;};ha.prototype.scrollTo=function(){'use strict';if(this.context)k.loadModules(["DOMScroll"],function(ia){ia.scrollTo(this.context,true,true);}.bind(this));};ha.prototype.destroy=function(){'use strict';this.unsubscribe(this._showSubscription);this.unsubscribe(this._hideSubscription);if(this._setContextSubscription){this.unsubscribe(this._setContextSubscription);this._setContextSubscription=null;}this._teardownScrollListener();this._teardownResizeAndReflowListeners();this.context&&o.remove(this.context,'LegacyContextualDialog');ga.destroy.call(this);};ha.prototype._adjustVerticalPosition=function(){'use strict';if(this.position!='left'&&this.position!='right'){x.set(this._overlay,'top','');return;}var ia=this.getRoot(),ja=y.getElementPosition(ia,'viewport').y,ka=y.getElementDimensions(this._overlay).y,la=y.getViewportDimensions().y,ma=Math.min(Math.max(ja,ha.MIN_TOP_GAP),ha.TOP_MARGIN),na=Math.min(Math.max(0,ja+ka+ha.BOTTOM_MARGIN-la),Math.max(-ma,ja-ma),ka-2*ha.ARROW_INSET);x.set(this._overlay,'top',-1*na+'px');x.set(this._arrow,'top',ha.ARROW_OFFSET+'px');x.set(this._arrow,'marginTop',na+'px');};ha.prototype._adjustHorizontalPosition=function(){'use strict';if(this.position!='above'&&this.position!='below'||this.alignH!='left'){x.set(this._overlay,'left','');x.set(this._overlay,'right','');return;}var ia=this.getRoot(),ja=y.getElementPosition(ia,'viewport').x,ka=y.getElementDimensions(this._overlay).x,la=y.getViewportDimensions().x,ma=t.isRTL(),na;if(!ma){na=ja+ka+ha.RIGHT_MARGIN-la;}else na=ha.LEFT_MARGIN+ka-ja;na=Math.min(Math.max(0,na),ka-2*ha.ARROW_INSET);x.set(this._overlay,ma?'right':'left',-1*na+'px');x.set(this._arrow,ma?'right':'left',ha.ARROW_OFFSET+'px');x.set(this._arrow,ma?'marginRight':'marginLeft',na+'px');};ha.prototype._updateArrow=function(){'use strict';var ia=0;if(this.position=='above'||this.position=='below')switch(this.alignH){case 'center':ia=50;break;case 'right':ia=100;break;}this._renderArrow(ha.POSITION_TO_ARROW[this.position],ia);};ha.prototype._renderArrow=function(ia,ja){'use strict';for(var ka in ha.ARROW_CLASS)n.conditionClass(this._overlay,ha.ARROW_CLASS[ka],ia==ka);n.conditionClass(this._overlay,'uiContextualDialogWithFooterArrowBottom',ia=='bottom'&&this._hasFooter);if(ia=='none')return;if(!this._arrow){this._arrow=p.create('i',{className:'uiContextualDialogArrow'});p.appendContent(this._overlay,this._arrow);}x.set(this._arrow,'top','');x.set(this._arrow,'left','');x.set(this._arrow,'right','');x.set(this._arrow,'margin','');var la=ia=='top'||ia=='bottom',ma=la?t.isRTL()?'right':'left':'top';ja=ja||0;x.set(this._arrow,ma,ja+'%');var na=ha.ARROW_LENGTH+ha.ARROW_OFFSET*2,oa=-(na*ja/100-ha.ARROW_OFFSET);x.set(this._arrow,'margin-'+ma,oa+'px');};ha.prototype._updateAlignmentClass=function(){'use strict';n.conditionClass(this.getRoot(),ha.RIGHT_ALIGNED_CLASS,(this.position=='above'||this.position=='below')&&this.alignH=='right');};ha.prototype._setupScrollListener=function(ia){'use strict';this._scrollListener=q.listen(ia||window,'scroll',ea(this._adjustVerticalPosition,this));};ha.prototype._teardownScrollListener=function(){'use strict';if(this._scrollListener){this._scrollListener.remove();this._scrollListener=null;}};ha.prototype._teardownResizeAndReflowListeners=function(){'use strict';if(this._resizeListener){this._resizeListener.remove();this._resizeListener=null;}if(this._reflowSubscription){this._reflowSubscription.unsubscribe();this._reflowSubscription=null;}};ha.getInstance=function(ia){'use strict';var ja=o.get(ia,'LegacyContextualDialog');if(!ja){var ka=v.byClass(ia,'uiOverlay');if(ka)ja=o.get(ka,'overlay');}return ja;};function ha(){'use strict';fa.apply(this,arguments);}Object.assign(ha,i,{ARROW_OFFSET:15,ARROW_LENGTH:16,ARROW_INSET:22,TOP_MARGIN:50,BOTTOM_MARGIN:30,LEFT_MARGIN:15,RIGHT_MARGIN:30,MIN_TOP_GAP:5,POSITION_TO_CLASS:{above:'uiContextualDialogAbove',below:'uiContextualDialogBelow',left:'uiContextualDialogLeft',right:'uiContextualDialogRight'},RIGHT_ALIGNED_CLASS:'uiContextualDialogRightAligned',ARROW_CLASS:{bottom:'uiContextualDialogArrowBottom',top:'uiContextualDialogArrowTop',right:'uiContextualDialogArrowRight',left:'uiContextualDialogArrowLeft'},POSITION_TO_ARROW:{above:'bottom',below:'top',left:'right',right:'left'}});Object.assign(ha.prototype,{_scrollListener:null,_scrollParent:null,_width:null,_fixed:false,_hasFooter:false,_showSubscription:null,_hideSubscription:null,_setContextSubscription:null,_resizeListener:null,_reflowSubscription:null});f.exports=ha;},null);
__d('SelectorDeprecated',['Arbiter','Button','ContextualLayer','CSS','DataStore','DOM','Event','Focus','HTML','Keys','MenuDeprecated','Parent','Style','Toggler','TooltipData','URI','Vector','arrayContains','emptyFunction','getDocumentScrollElement'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){if(c.__markCompiled)c.__markCompiled();var ba,ca,da=[],ea;function fa(qa){return s.byClass(qa,'uiSelector');}function ga(qa){return s.byClass(qa,'uiSelectorButton');}function ha(){if(!ca){ca=new j({position:'below'},m.create('div'));k.addClass(ca.getRoot(),'uiSelectorContextualLayer');}return ca;}function ia(qa){return m.scry(qa,'select')[0];}function ja(qa){return m.find(qa,'div.uiSelectorMenuWrapper');}var ka=function(){ka=z;r.subscribe('select',function(qa,ra){if(!ba||!ra||ra.menu!==pa.getSelectorMenu(ba))return;var sa=la(ba),ta=ma(ra.item);if(ta){var ua=ba,va=pa.isOptionSelected(ra.item),wa=pa.inform('select',{selector:ua,option:ra.item,clone:ea});if(wa===false)return;if(sa||!va){pa.setSelected(ua,pa.getOptionValue(ra.item),!va);pa.inform('toggle',{selector:ua,option:ra.item});pa.inform('change',{selector:ua});h.inform('Form/change',{node:ua});if(na(ua))l.set(ua,'dirty',true);}}if(!sa||!ta)ba&&pa.toggle(ba);});};function la(qa){return !!qa.getAttribute('data-multiple');}function ma(qa){return k.hasClass(qa,'uiSelectorOption');}function na(qa){return !!qa.getAttribute('data-autosubmit');}var oa=function(){oa=z;var qa={keydown:function(event){var ra=event.getTarget();if(m.isInputNode(ra))return;switch(n.getKeyCode(event)){case q.DOWN:case q.SPACE:case q.UP:if(ga(ra)){var sa=fa(ra);pa.toggle(sa);return false;}break;case q.ESC:if(ba){var ta=pa.getSelectorButton(ba);pa.toggle(ba);ta&&o.set(ta);return false;}break;}},mouseover:function(event){var ra=s.byAttribute(event.getTarget(),'ajaxify');if(ra&&k.hasClass(ra,'uiSelectorButton'))pa.loadMenu(fa(ra));}};n.listen(document.body,qa);};u.subscribe(['show','hide'],function(qa,ra){var sa=fa(ra.getActive());if(sa){oa();ka();var ta=pa.getSelectorButton(sa),ua=pa.getSelectorMenu(sa),va=qa==='show';ta.setAttribute('aria-expanded',va?'true':'false');if(va){ba=sa;if(k.hasClass(ta,'uiButtonDisabled')){pa.setEnabled(sa,false);return false;}ua=ua||pa.loadMenu(sa);var wa=t.getScrollParent(sa),xa=wa!==window&&wa!==aa();if(xa||k.hasClass(sa,'uiSelectorUseLayer')){if(xa)da.push(n.listen(wa,'scroll',function(){ra.hide();}));ea=m.create('div',{className:sa.className});k.addClass(ea,'invisible_elem');x.getElementDimensions(sa).setElementDimensions(ea);m.replace(sa,ea);var ya=k.hasClass(sa,'uiSelectorRight'),za=k.hasClass(sa,'uiSelectorBottomUp');ha().setContext(ea).setContent(sa).setPosition(za?'above':'below').setAlignment(ya?'right':'left').show();}r.register(ua);var ab=r.getCheckedItems(ua);if(!ab.length)ab=r.getEnabledItems(ua);if(ab.length)r.focusItem(ab[0]);}else{ba=null;if(ea){while(da.length)da.pop().remove();m.replace(ea,sa);ha().hide();ea=null;}ua&&r.unregister(ua);if(na(sa)&&l.get(sa,'dirty')){var bb=m.scry(sa,'input.submitButton')[0];bb&&bb.click();l.remove(sa,'dirty');}}k.conditionClass(pa.getSelectorButton(sa),'selected',va);pa.inform(va?'open':'close',{selector:sa,clone:ea});}});var pa=Object.assign(new h(),{attachMenu:function(qa,ra,sa){qa=fa(qa);if(qa){ba&&r.unregister(pa.getSelectorMenu(ba));m.setContent(ja(qa),ra);ba&&r.register(pa.getSelectorMenu(qa));ea&&ha().updatePosition();if(sa){var ta=qa.getAttribute('data-name');ta&&sa.setAttribute('name',ta);if(!la(qa))sa.setAttribute('multiple',false);var ua=ia(qa);if(ua){m.replace(ua,sa);}else m.insertAfter(qa.firstChild,sa);}return true;}},getOption:function(qa,ra){var sa=pa.getOptions(qa),ta=sa.length;while(ta--)if(ra===pa.getOptionValue(sa[ta]))return sa[ta];return null;},getOptions:function(qa){var ra=r.getItems(pa.getSelectorMenu(qa));return ra.filter(ma);},getEnabledOptions:function(qa){var ra=r.getEnabledItems(pa.getSelectorMenu(qa));return ra.filter(ma);},getSelectedOptions:function(qa){return r.getCheckedItems(pa.getSelectorMenu(qa));},getOptionText:function(qa){return r.getItemLabel(qa);},getOptionValue:function(qa){var ra=fa(qa),sa=ia(ra),ta=pa.getOptions(ra).indexOf(qa);return ta>=0?sa.options[ta+1].value:'';},getSelectorButton:function(qa){return m.find(qa,'a.uiSelectorButton');},getSelectorMenu:function(qa){return m.scry(qa,'div.uiSelectorMenu')[0];},getValue:function(qa){var ra=ia(qa);if(!ra)return null;if(!la(qa))return ra.value;var sa=[],ta=ra.options;for(var ua=1,va=ta.length;ua<va;ua++)if(ta[ua].selected)sa.push(ta[ua].value);return sa;},isOptionSelected:function(qa){return r.isItemChecked(qa);},listen:function(qa,ra,sa){return this.subscribe(ra,function(ta,ua){if(ua.selector===qa)return sa(ua,ta);});},loadMenu:function(qa,ra){var sa=pa.getSelectorMenu(qa);if(!sa){var ta=pa.getSelectorButton(qa),ua=ta.getAttribute('ajaxify');if(ua){e(['AsyncRequest'],function(wa){var xa=new w(ua),ya=xa.getQueryData();xa.setQueryData({});var za=new wa(xa).setData(ya).setNectarModuleDataSafe(ta).setRelativeTo(ta);ra&&za.setFinallyHandler(function(){setTimeout(ra,0);});za.send();}.bind(this));var va=p('<div class="uiSelectorMenuWrapper uiToggleFlyout">'+'<div class="uiMenu uiSelectorMenu loading">'+'<ul class="uiMenuInner">'+'<li><span></span></li>'+'</ul>'+'</div>'+'</div>');m.appendContent(ta.parentNode,va);sa=pa.getSelectorMenu(qa);ta.removeAttribute('onmouseover');}}else ra&&ra();return sa;},setButtonLabel:function(qa,ra){var sa=pa.getSelectorButton(qa),ta=parseInt(sa.getAttribute('data-length'),10);ra=ra||sa.getAttribute('data-label')||'';i.setLabel(sa,ra);if(typeof ra==='string')if(ta&&ra.length>ta){sa.setAttribute('title',ra);}else sa.removeAttribute('title');},setButtonTooltip:function(qa,ra){var sa=pa.getSelectorButton(qa),ta=s.byTag(sa,'a');ta&&v.set(ta,ra||sa.getAttribute('data-tooltip')||'');},setEnabled:function(qa,ra){if(!ra&&ba&&fa(qa)===ba)pa.toggle(qa);i.setEnabled(pa.getSelectorButton(qa),ra);},setOptionEnabled:function(qa,ra){r.setItemEnabled(qa,ra);},setSelected:function(qa,ra,sa){sa=sa!==false;var ta=pa.getOption(qa,ra);if(!ta)return;var ua=pa.isOptionSelected(ta);if(sa!==ua){if(!la(qa)&&!ua){var va=pa.getSelectedOptions(qa)[0];va&&r.toggleItem(va);}r.toggleItem(ta);}pa.updateSelector(qa);},toggle:function(qa){u.toggle(m.scry(fa(qa),'div.wrap')[0]);},updateSelector:function(qa){var ra=pa.getOptions(qa),sa=pa.getSelectedOptions(qa),ta=ia(qa).options,ua=[],va=[];for(var wa=0,xa=ra.length;wa<xa;wa++){var ya=y(sa,ra[wa]);ta[wa+1].selected=ya;if(ya){var za=pa.getOptionText(ra[wa]);ua.push(za);va.push(ra[wa].getAttribute('data-tooltip')||za);}}ta[0].selected=!sa.length;var ab=k.hasClass(qa,'uiSelectorDynamicLabel'),bb=k.hasClass(qa,'uiSelectorDynamicTooltip');if(ab||bb){var cb='';if(la(qa)){var db=pa.getSelectorButton(qa);cb=db.getAttribute('data-delimiter')||', ';}ua=ua.join(cb);va=va.join(cb);ab&&pa.setButtonLabel(qa,ua);bb&&pa.setButtonTooltip(qa,va);}}});f.exports=pa;},null);
__d('tickerPhoteSnowLiftOpenStatus',['ArbiterMixin'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='CheckIsOpen',j={registerOpenChecker:function(k){return j.subscribe(i,function(l,m){if(k())m.is_Open=true;});},checkIsOpen:function(){var k={is_Open:false};j.inform(i,k);return k.is_Open;}};Object.assign(j,h);f.exports=j;},null);
__d('TickerStoryList',['Animation','Arbiter','AsyncRequest','AsyncSignal','BanzaiODS','Bootloader','ChannelConstants','CSS','DOM','DOMVector','Event','HTML','Keys','LayerFadeOnHide','LegacyContextualDialog','LiveTimer','NavigationMessage','Parent','Rect','Run','ScrollableArea','SelectorDeprecated','Style','TickerController','TickerReadStateTracking','Toggler','UFIUIEvents','URI','UserActivity','UserAgent_DEPRECATED','Vector','clickRefAction','collectDataAttributes','containsNode','csx','cx','emptyFunction','ex','ge','getElementText','goURI','tickerPhoteSnowLiftOpenStatus','setTimeout','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya){if(c.__markCompiled)c.__markCompiled();var za=15000;function ab(bb,cb,db){this._root=bb;this._content=p.find(bb,'.ticker_stream');this._stories=p.find(this._root,'.tickerActivityStories');this._scrollableArea=cb;this._container=p.find(bb,'div.uiScrollableAreaWrap');this._newestStory={};this._objectIDs=[];this._fetchedStories={};this._fetchedStoriesDialog={};this._storyDialogResources={};this._removedStoryIDs=[];this._storiesToRemove=[];var eb=Date.now();this._initTime=eb;this._lastUpdate=eb;this._lastPull=eb;this._lastInsert=eb;this._pollOnly=false;this._autoloadStoryIndex=1;this._scrollTopThreshold=100;this._scrollTopPrompt=p.find(this._root,'.scrollTopPrompt');this._scrollTopPromptVisible=false;this._maxStoriesToKeep=50;this._minStoriesToKeep=25;this._tickerInSidebarMode=!!y.byClass(this._root,'fbChatSidebar');this._loadStoriesWithActions();ma('ticker_flyout');ma('ticker_flyout_prefetch');ma('ticker_flyout_loadtime');ma('ticker_stream');this._uaCurStoryIDFetch=null;this._uaCurStoryIDPrefetch=null;var fb=p.create('div',{className:'storyQueue hidden_elem'});this._storyQueue=fb;p.appendContent(this._root,fb);this._lastKStories={head:null,tail:null,count:0,actors:{},apps:{},stories:{}};this._dedupeKeys={};this._initObjectIDs();this._initConfig(db);this._resetMorePager();this._initListeners();this._initSubscriptions(db);i.inform('ticker/init',this,i.BEHAVIOR_PERSISTENT);this._poll();}Object.assign(ab.prototype,{ADS_IDLE_MS:300000,FLYOUT_MAX_HEIGHT:450,FLYOUT_OFFSET_THRESHOLD:20,FLYOUT_COMMENT_OFFSET:15,FLYOUT_VIEWPORT_PADDING:75,FLYOUT_ACTION_FOOTER_PADDING:8,FLYOUT_TARGET_HEIGHT_OFFSET:25,DEFAULT_LOOK_BEHIND:10,_lastKStoriesInsert:function(bb){this._lastKStories.stories[bb.getAttribute("data-story-key")]=true;var cb={story:bb,next:null};if(this._lastKStories.head)this._lastKStories.head.next=cb;this._lastKStories.head=cb;this._lastKStories.count++;if(!this._lastKStories.tail)this._lastKStories.tail=this._lastKStories.head;var db=bb.getAttribute("data-actor");if(!this._lastKStories.actors[db])this._lastKStories.actors[db]=0;this._lastKStories.actors[db]++;var eb=bb.getAttribute("data-app");if(eb){if(!this._lastKStories.apps[eb])this._lastKStories.apps[eb]=0;this._lastKStories.apps[eb]++;}if(this._lastKStories.count>this.DEFAULT_LOOK_BEHIND){while(this._lastKStories.tail&&!this._lastKStoriesRemove(this._lastKStories.tail.story))this._lastKStories.tail=this._lastKStories.tail.next;if(!this._lastKStories.tail)this._lastKStories.head=null;}},_lastKStoriesRemove:function(bb){var cb=bb.getAttribute("data-story-key"),db=bb.getAttribute("data-actor"),eb=bb.getAttribute("data-app");if(this._lastKStories.stories[cb]){delete this._lastKStories.stories[cb];this._lastKStories.actors[db]--;if(eb)this._lastKStories.apps[eb]--;this._lastKStories.count--;return true;}else return false;},_loadStoriesWithActions:function(){var bb=ta('rightCol');if(!bb)return;this._toggleWrapper=p.scry(bb,'.tickerToggleWrapper')[0];if(this._toggleWrapper){var cb=p.scry(this._stories,'.tickerStoryWithButton');this._storiesWithActions={};for(var db=0;db<cb.length;db++){var eb=cb[db];this._storiesWithActions[eb.getAttribute('data-story-key')]=eb;}}},_initConfig:function(bb){Object.assign(this,{_newest:bb.newest,_page_newest:bb.newest,_timeout:bb.timeout,_heartbeatTimeout:Math.min(5000,bb.heartbeatTimeout),_maxHeartbeatTimeout:Math.max(30000,bb.maxHeartbeatTimeout),_pullTimeout:Math.max(30000,bb.pullTimeout),_insertTimeout:bb.insertTimeout,_maxQueueLength:bb.maxQueueLength,_heartbeatEndpoint:bb.heartbeatEndpoint,_popupOnHover:bb.popupOnHover,_userIdleTimeout:bb.userIdleTimeout,_pollOnly:bb.pollOnly,_tickerSource:bb.tickerSource,_logFlyouts:bb.logFlyouts,_userScrollGaurdDelay:bb.userScrollGaurdDelay,_rescheduleScrollToTopDelay:bb.rescheduleScrollToTopDelay});},_initListeners:function(){this._listeners=r.listen(this._root,{click:this._handleClick.bind(this),keydown:this._handleKeydown.bind(this),mouseout:this._handleMouseout.bind(this),mouseover:this._handleMouseover.bind(this),mousedown:this._tickerDeClicker.bind(this),mouseup:this._handleMouseup.bind(this)});this._listeners.scroll=r.listen(this._container,'scroll',this._handleScroll.bind(this));xa(this._initInfiniteScrollListener.bind(this),0);},_initSubscriptions:function(bb){aa.onLeave(this._cleanup.bind(this));this._subscriptions=[i.subscribe(x.NAVIGATION_BEGIN,this._onNavHandler.bind(this)),i.subscribe('composer/publish',this._handleComposerPublish.bind(this)),i.subscribe('Ticker/storiesInserted',this._handleStoriesInserted.bind(this)),i.subscribe('Ticker/fixed',this._setFixed.bind(this,true)),i.subscribe('Ticker/unfixed',this._setFixed.bind(this,false)),i.subscribe('Ticker/resized',this._checkInfiniteScroll.bind(this)),i.subscribe(ha.Comment,this._scrollDialogToBottom.bind(this)),i.subscribe(ha.Changed,this._redrawFlyout.bind(this)),i.subscribe('Ticker/chatOpened',this._handleChatOpened.bind(this))];if(!bb.pollOnly)this._subscriptions.push(i.subscribe(n.getArbiterType('ticker_update'),this._handleTickerPush.bind(this)));if(bb.pushChannel&&!bb.pollOnly)this.setPushChannel(bb.pushChannel);},_handleClick:function(event){if(!(event.button===1||event.altKey||event.ctrlKey||event.metaKey))event.prevent();var bb=event.getTarget();if(this._getButtonFromNode(bb)){this._logUserAction(bb,'click',event);this._handleActionButton(event);return;}var cb=this._getStoryFromNode(bb),db=y.byClass(bb,'tickerStoryAllowClick');if(!cb||cb==this._selectedStory||db)return;if(this._storyIsHidden(cb))return;if(cb==this._activeStory&&!this._selectedStory)this._selecting=true;if(this._storyCanOpenExternally(cb)){var eb=cb.getAttribute('data-href');if(eb&&!bb.getAttribute('href')){var fb={href:eb},gb=na(bb,['ft','gt']);ma('click',fb,event,'FORCE',gb);}else this._logUserAction(bb,'click',event);this._openStoryExternally(cb,event);return;}this._logUserAction(bb,'flyout',event);this._activateStory(cb,'click');this._selectStory(cb);},_handleMouseover:function(event){this._setLocked(true);var bb=event.getTarget(),cb=this._getOpenableStory(bb);if(!cb){var db=y.bySelector(bb,"._5wvy");if(db){clearTimeout(parseInt(db.getAttribute('data-timeout-token'),10));var eb=xa(function(){ab.removeMarkup(db,cb);},za);db.setAttribute('data-timeout-token',eb);}return;}event.kill();if(this._popupOnHover){if(!(cb.id in this._fetchedStories))this._uaCurStoryIDPrefetch=cb.id;this._fetchStory(cb);}if(this._selectedStory)return;if(this._popupOnHover){this._clearHoverTimeouts();var fb=this._storyCanOpenExternally(cb)?500:1000,gb=this._activeStory?75:fb;this._hoverShowTimeout=this._setTimeout(function(){this._activateStory(cb,'hover');this._logUserAction(bb,'flyout',event);}.bind(this),gb);}},_handleMouseout:function(event){var bb=event.getTarget();this._setLocked(false);if(bb==this._getStoryFromNode(bb)){var cb=p.scry(bb.parentNode,'.openToggler');for(var db=0;db<cb.length;db++)ca.toggle(cb[db]);}this._clearClickedStory();this._scheduleHide();},_handleKeydown:function(event){this._tickerDeClicker(event);var bb=this._activeStory;if(!bb)return;var cb=r.getKeyCode(event);switch(cb){case t.UP:case t.DOWN:var db=this._getInsertedStories(),eb;if(event.getModifiers().any){eb=cb===t.UP?0:db.length-1;}else eb=db.indexOf(bb)+(cb===t.UP?-1:1);bb=db[eb];break;case t.ESC:this._deactivateStory(true);return;default:return;}event.kill();if(!bb)return;this._activateStory(bb,'keypress');this._selectStory(bb);},_fadeTopmostStoryButton:function(){var bb=0,cb=15;if(this._storiesWithActions)for(var db in this._storiesWithActions){var eb=this._storiesWithActions[db],fb=p.scry(eb,'.tickerInlineActionButton')[0],gb=p.scry(fb,'.tickerActionIcon')[0],hb=la.getElementPosition(fb).y-la.getElementPosition(this._toggleWrapper).y;if(hb<bb){da.set(fb,'opacity',0);da.set(gb,'opacity',0);}else if(hb>=bb&&hb<cb){var ib=(hb-bb)/(cb-bb);da.set(fb,'opacity',ib);da.set(gb,'opacity',ib);break;}else{da.set(fb,'opacity',1);da.set(gb,'opacity',1);}}},_handleScroll:function(){var bb=wa.checkIsOpen();if(bb)this._preventFlyoutDismiss=true;if(!this._preventScrollDismiss&&!bb){if(!this._preventFlyoutDismiss){this._deactivateStory(true);}else this._preventFlyoutDismiss=false;}else this._preventScrollDismiss=false;if(!this._handleScrollThrottled)this._handleScrollThrottled=ya(this._handleScrollInner.bind(this));this._handleScrollThrottled();},_handleScrollInner:function(){this._fadeTopmostStoryButton();this._checkInfiniteScroll();this._setIsUserScrolling();if(!this._scrollLogged){this._scrollLogged=true;var bb=this._stories.childNodes.length,cb=this._stories.getAttribute('data-gt'),db={ticker_scroll:1,number_stories:bb,source:cb};ma('scroll',null,null,'FORCE',{gt:db});}},_setIsUserScrolling:function(){clearTimeout(this._userScrollingToken);if(this._isScrolledToTop()){this._userScrolling=false;return;}this._userScrolling=true;this._userScrollingToken=xa(function(){this._userScrolling=false;this._userScrollingToken=null;}.bind(this),this._userScrollGaurdDelay);},_isUserScrolling:function(){return this._userScrolling;},_handleStoriesInserted:function(){this._initInfiniteScrollListener();if(this._scrollableArea instanceof ba)this._scrollableArea.adjustGripper();},_handleActionButton:function(event){var bb=event.getTarget(),cb=this._getOpenableStory(bb),db=this._getStoryDialog(cb);if(db)var eb=db.subscribe('beforehide',function(){db.unsubscribe(eb);return false;});},_handleScrollToTopClick:function(){this._scrollToTop(this._poll.bind(this));},_scheduleScrollToTop:function(){this._scrollToTopToken&&clearTimeout(this._scrollToTopToken);this._scrollToTopToken=xa(function(){if(this._isLocked()||this._isUserScrolling()){this._scheduleScrollToTop();}else{this._scrollToTopToken=null;this._scrollToTop();}}.bind(this),this._rescheduleScrollToTopDelay);},_scrollToTop:function(bb){new h(this._container).to('scrollTop',0).ease(h.ease.end).ondone(bb).go();},_clearHoverTimeouts:function(){clearTimeout(this._hoverShowTimeout);clearTimeout(this._hoverHideTimeout);},_getAllStories:function(){return p.scry(this._root,'div.fbFeedTickerStory');},_findStoryById:function(bb){var cb=p.scry(this._root,'.fbFeedTickerStory'),db;for(story in cb){db=cb[story];if(bb==this._getStoryDialogParams(db).token)return db;}return null;},_getInsertedStories:function(){return this._getAllStories().filter(function(bb){return !o.hasClass(bb,'queuedStory');});},_getQueuedStories:function(){return p.scry(this._storyQueue,'.fbFeedTickerStory.queuedStory');},_getButtonFromNode:function(bb){return y.byClass(bb,'tickerInlineOverlay');},_getStoryFromNode:function(bb){return y.byClass(bb,'fbFeedTickerStory');},_getActionButtonFromStory:function(bb){return p.scry(bb,'.tickerInlineActionButton')[0];},_getOpenableStory:function(bb){var cb=this._getStoryFromNode(bb);return this._storyCanOpenDialog(cb)?cb:null;},_getStoryDialog:function(bb){return this._fetchedStoriesDialog[bb.id]||v.getInstance(bb);},_getStoryDialogParams:function(bb){var cb=bb&&bb.getAttribute('data-flyoutdata')||null;return cb&&JSON.parse(cb)||null;},_storyCanOpenDialog:function(bb){return !!this._getStoryDialogParams(bb)&&!this._storyIsHidden(bb);},_storyCanOpenExternally:function(bb){return !!bb.getAttribute('data-href')||!this._storyCanOpenDialog(bb);},_storyIsHidden:function(bb){return o.hasClass(bb,'tickerStoryHidden');},hideActiveStory:function(){this._activeStory&&this.hideStory(this._activeStory);},hideStory:function(bb){this._deactivateStory();if(ua(bb)==='')p.remove(bb);o.addClass(bb,'tickerStoryHidden');o.removeClass(bb,'tickerStoryClickable');},undoHideStory:function(bb){o.addClass(bb,'tickerStoryClickable');o.removeClass(bb,'tickerStoryHidden');},insertStoriesAtBottom:function(bb){if(!bb)return;var cb=p.create('div');cb.appendChild(bb);var db=p.scry(cb,'.fbFeedTickerStory'),eb=p.find(cb,'.tickerMorePager'),fb=[];for(var gb=0;gb<db.length;gb++)if(!this.dedupeStory(db[gb]))fb.push(db[gb]);if(fb.length){fb.push(eb);p.replace(p.find(this._root,'.tickerMorePager'),fb);}i.inform('Ticker/storiesInserted');},_scheduleHide:function(){if(this._popupOnHover&&!this._selectedStory){this._clearHoverTimeouts();this._hoverHideTimeout=this._setTimeout(this._deactivateStory.bind(this),100);}},_setScrollTopPromptVisible:function(bb){this._scrollTopPromptVisible=bb;o.conditionShow(this._scrollTopPrompt,bb);if(bb&&!this._listeners.scrollTop){this._listeners.scrollTop=r.listen(this._scrollTopPrompt,{click:this._handleScrollToTopClick.bind(this)});}else if(!bb&&this._listeners.scrollTop){this._listeners.scrollTop.click.remove();this._listeners.scrollTop=null;}},_isUserIdle:function(){return !ja.isActive(this._userIdleTimeout);},_schedulePoll:function(){clearTimeout(this._pollToken);this._pollToken=this._setTimeout(this._poll.bind(this),this._timeout);},_poll:function(){if(!this._isTickerVisible())return;if(this._storiesToRemove.length>0){if(this._isInsertingStory)return this._schedulePoll();var bb=this._storiesToRemove.pop();this.removeStory(bb);}var cb=!this._isScrolledToTop()&&this._getQueuedStories().length;this._setScrollTopPromptVisible(cb);var db=Date.now(),eb=db-this._lastInsert;if(eb<this._insertTimeout||this._isLocked())return this._schedulePoll();var fb=this._getQueuedStories(),gb=this._isUserIdle(),hb=fb.length>0;if(hb){var ib=fb.shift();this.insertStory(ib);return this._schedulePoll();}if(gb)return ja.subscribeOnce(this._poll.bind(this));var jb=false,kb=false;if(this._pollOnly){kb=db-this._lastUpdate>this._heartbeatTimeout;}else jb=db-this._lastPull>this._pullTimeout;var lb=jb||kb;if(!lb)return this._schedulePoll();this.update({pull:jb,fullpoll:kb});},_updatePollOnlyHeartbeatTimeout:function(){if(this._pollOnly&&this._heartbeatTimeout<this._maxHeartbeatTimeout)this._heartbeatTimeout=Math.min(this._heartbeatTimeout+5000,this._maxHeartbeatTimeout);},update:function(bb){this._updatePollOnlyHeartbeatTimeout();if(!this._pollOnly)return this._schedulePoll();var cb={newest:bb.fullpoll||bb.cache_update?this._newest:this._page_newest,source:this._tickerSource};if(!cb.newest||cb.newest==='0')throw new Error(sa('Trying to request new ticker stories with an invalid cursor %s, with'+' the settings fullpoll %s, cache_update %s, value coming from this.%s',typeof cb.newest==='string'?'"'+cb.newest+'"':cb.newest,bb.fullpoll,bb.cache_update,bb.fullpoll||bb.cache_update?'_newest':'_page_newest'));Object.assign(cb,bb);new j().setURI(this._heartbeatEndpoint).setReadOnly(true).setOption('retries',0).setData(cb).setHandler(this._handleResponse.bind(this)).setFinallyHandler(this._poll.bind(this)).setAllowCrossPageTransition(true).send();this._lastUpdate=Date.now();if(cb.pull)this._lastPull=this._lastUpdate;},insertStory:function(bb){this._lastInsert=Date.now();window.LiveTimer&&w.addTimeStamps(bb);o.removeClass(bb,'queuedStory');if(this._isUserScrolling()){this._fadeStoryIn(bb);}else this._scrollToTop(this._flyStoryIn.bind(this,bb));if(this._storiesWithActions&&o.hasClass(bb,'tickerStoryWithButton'))this._storiesWithActions[bb.getAttribute('data-story-key')]=bb;this._removeOldStories();},_removeOldStories:function(){var bb=this._getInsertedStories();if(bb.length<=this._maxStoriesToKeep)return;var cb=this._minStoriesToKeep,db=bb.slice(cb);db.forEach(p.remove);if(this._storiesWithActions)for(var eb=0;eb<db.length;eb++)delete this._storiesWithActions[db[eb].getAttribute('data-story-key')];this._resetMorePager();},_resetMorePager:function(){var bb=this._getInsertedStories();if(!bb||!bb.length)return;var cb=bb[bb.length-1].getAttribute('data-ticker-timestamp'),db=p.scry(this._root,'.tickerMorePager a')[0];if(!db||!cb)return;var eb=new ia(db.getAttribute('ajaxify'));eb.addQueryData({oldest:cb});db.setAttribute('ajaxify',eb);},_setLocked:function(bb){this._locked=bb;},_isLocked:function(){return !!(this._locked||this._activeStory);},informAndRemoveStory:function(bb,cb,db){var eb=this._getStoryFromNode(bb),fb=eb.getAttribute('data-story-key');p.setContent(eb,cb);o.addClass(eb,'highlightedStory');this._setTimeout(this.removeStory.bind(this,fb),db||6000);},_getStoryByStoryKey:function(bb){var cb=this._getAllStories();for(var db=0;db<cb.length;db++){var eb=cb[db];if(eb.getAttribute('data-story-key')==bb)return eb;}return null;},removeStory:function(bb){this._removedStoryIDs[bb]=true;var cb=this._getStoryByStoryKey(bb);if(!cb)return;if(this._storiesWithActions)delete this._storiesWithActions[bb];if(cb==this._activeStory)this._deactivateStory();var db=this._getStoryDialog(cb);db&&db.destroy();this._lastKStoriesRemove(cb);var eb=cb.getAttribute("data-dedupe-key");if(eb)delete this._dedupeKeys[eb];if(o.hasClass(cb,'queuedStory')){p.remove(cb);return;}this._animateStoryOut(cb);},_isScrolledToTop:function(){return this._container.scrollTop<=this._scrollTopThreshold;},_flyStoryIn:function(bb){var cb=p.create('div',{style:{marginTop:'-1000px'}},bb);da.set(cb,'opacity',0);p.prependContent(this._stories,cb);var db=la.getElementDimensions(cb).y;da.set(cb,'marginTop','-'+db+'px');this._isInsertingStory=true;new h(cb).to('marginTop',0).ease(h.ease.end).checkpoint(.5).to('opacity',1).ondone(function(){p.replace(cb,bb);this._afterInsert(bb);this._isInsertingStory=false;}.bind(this)).go();},_fadeStoryIn:function(bb){new h(this._stories).to('opacity',.5).ondone(function(){p.prependContent(this._stories,bb);this._container.scrollTop=this._container.scrollTop+this._stories.firstChild.offsetHeight;this._scheduleScrollToTop();new h(this._stories).to('opacity',1).ondone(function(){this._afterInsert(bb);}.bind(this)).go();}.bind(this)).go();},_animateStoryOut:function(bb){var cb=p.create('div',{style:{overflow:'hidden',position:'relative'}});p.insertBefore(bb,cb);p.appendContent(cb,bb);new h(cb).to('top',20).to('height',0).to('opacity',0).ease(h.ease.end).ondone(function(){p.remove(cb);i.inform('Ticker/animateOut');}.bind(this)).go();},_afterInsert:function(bb){i.inform('Ticker/afterInsert');},setPushChannel:function(bb){this._pushSubscription&&this._pushSubscription.unsubscribe();this._pushSubscription=i.subscribe(n.getArbiterType(bb),this._handleTickerPush.bind(this));e(['ChatConfig','ChannelConnection'],function(cb,db){this._channelConnection=db;this._checkChannelConnection();this._channelConnectionSubscription=this._channelConnection.subscribe([this._channelConnection.CONNECTED,this._channelConnection.RECONNECTING,this._channelConnection.SHUTDOWN,this._channelConnection.MUTE_WARNING,this._channelConnection.UNMUTE_WARNING],this._handleChannelConnection.bind(this));}.bind(this));},_checkChannelConnection:function(){o.conditionClass(this._root,'disconnected',this._channelConnection.disconnected());},_handleTickerPush:function(bb,cb){var db=cb.obj;if(db.delete_id){this._storiesToRemove.push(db.delete_id);return;}var eb=db.story_xhp;if(!eb)return;var fb=s(eb).getRootNode();if(!db.story_time||db.story_time==='0')throw new Error(sa('An invalid story time was pushed: %s, for ticker story: %s',typeof db.story_time==='string'?'"'+db.story_time+'"':db.story_time,fb.getAttribute('data-flyoutdata')));this._newest=db.story_time;this.queueStory(fb,db.flyout_js_cmds);this._newestStory={actorID:db.actor,storyKey:fb.getAttribute('data-story-key')};},_handleComposerPublish:function(bb,cb){cb.tickerMarkup&&this.insertStory(cb.tickerMarkup);},_logRender:function(){if(this._loggedRender)return;var bb=this._tickerInSidebarMode;if(bb||y.byClass(this._content,'home_right_column')){new k('/ajax/log_ticker_render.php',{sidebar_mode:bb}).send();this._loggedRender=true;}},_isTickerVisible:function(){var bb=ea.getActiveInstance()==this;bb&&this._logRender();return bb;},_handleResponse:function(bb){var cb=bb.getPayload();if(cb.newest)this._newest=this._page_newest=cb.newest;if(cb.content)if(cb.content instanceof Array){for(var db=0;db<cb.content.length;db++)this.queueStoryMarkup(cb.content[db]);}else this.queueStoryMarkup(cb.content);},queueStoryMarkup:function(bb){var cb=s(bb).getRootNode();this.queueStory(cb);},dedupeStory:function(bb){var cb=bb.getAttribute('data-story-key'),db=cb&&(!!this._objectIDs[cb]||!!this._removedStoryIDs[cb]);db=db||!!this._lastKStories.actors[bb.getAttribute('data-actor')]||!!this._lastKStories.apps[bb.getAttribute('data-app')];var eb=bb.getAttribute('data-dedupe-key');db=db||eb&&this._dedupeKeys[eb];if(bb.getAttribute('data-force-push'))db=false;cb&&(this._objectIDs[cb]=true);return db;},queueStory:function(bb,cb){if(this.dedupeStory(bb))return;this._lastKStoriesInsert(bb);var db=bb.getAttribute("data-dedupe-key");if(db)this._dedupeKeys[db]=true;o.addClass(bb,'queuedStory');p.appendContent(this._storyQueue,bb);var eb=cb&&cb.length;if(eb)cb.forEach(function(gb){new Function(gb).apply();});bb.setAttribute('id',bb.id+'_'+this._root.id);var fb=this._getQueuedStories();fb.slice(0,-this._maxQueueLength).forEach(p.remove);if(eb)this._fetchedStories[bb.id]=true;},_cleanup:function(){ea.clearRHCplaceholder();if(!y.byClass(this._content,'hasRightCol'))return;this._objectIDs=[];this._subscriptions.forEach(i.unsubscribe);this._channelConnectionSubscription&&this._channelConnection.unsubscribe(this._channelConnectionSubscription);this._pushSubscription&&this._pushSubscription.unsubscribe();for(var bb in this._listeners)this._listeners[bb]&&this._listeners[bb].remove();clearTimeout(this._pollToken);this._pollToken=null;this._cleanupInputFocusListener();this._cleanupContentResizeListener();i.inform('Ticker/cleanup');},_onNavHandler:function(bb,cb){var db=cb.params.key;if(db!='lf'&&db!='h')this._cleanup();},registerStoryDialog:function(bb,cb){if(this._uaCurStoryIDFetch==bb.id)this._uaCurStoryIDFetch=null;if(this._uaCurStoryIDPrefetch==bb.id)this._uaCurStoryIDPrefetch=null;this._fetchedStories[bb.id]=true;this._fetchedStoriesDialog[bb.id]=cb;cb.setContext(bb);cb.subscribe('hide',this._deactivateStory.bind(this,true));cb.subscribe('success',this._focusStory.bind(this,bb));cb.subscribe('beforehide',function(){if(this._selecting){this._selecting=false;return false;}}.bind(this));if(this._popupOnHover){cb.subscribe('mouseenter',this._clearHoverTimeouts.bind(this));cb.subscribe('mouseleave',this._scheduleHide.bind(this));cb.subscribe('show',function(){xa(this._highlightDialogScrollbar.bind(this,cb),0);var db=r.listen(cb.getContent(),'mousedown',function(){this._selectStory(bb);db.remove();}.bind(this));}.bind(this));}if(bb==this._activeStory)this._openDialog(cb);},_highlightDialogScrollbar:function(bb){var cb=p.scry(bb.getContent(),'.uiScrollableArea')[0];cb&&ba.poke(cb);},_openStoryExternally:function(bb,event){var cb=bb.getAttribute('data-href');if(!cb||cb=='#')return;var db=bb.getAttribute('data-story-rel');switch(db){case 'theater':this._deactivateAndClearStory();m.loadModules(["PhotoViewer"],function(gb){gb.bootstrap(cb,bb);});return;case 'async':this._deactivateAndClearStory();j.bootstrap(cb,bb);return;}var eb=bb.getAttribute('data-target'),fb=event.which!=1||event.getModifiers().any||eb=='_blank';fb?window.open(cb,'_blank'):va(cb);},_deactivateAndClearStory:function(){this._clearHoverTimeouts();this._deactivateStory();},_focusStoryWillTriggerScroll:function(bb){var cb=this._container,db=cb.clientHeight,eb=bb.offsetHeight,fb=cb.scrollTop,gb=fb+db,hb=bb.offsetTop,ib=hb+eb;return hb<fb||ib>gb;},_focusStory:function(bb){if(this._focusStoryWillTriggerScroll(bb))this._preventScrollDismiss=true;var cb=new z(bb),db=y.byClass(bb,'scrollable'),eb=cb.boundWithin(new z(db)).getPositionVector(),fb=cb.getPositionVector().sub(eb);if(fb.y!==0)fb.scrollElementBy(db);bb.focus();},_selectStory:function(bb){this._selectedStory=bb;o.addClass(bb,'tickerStorySelected');o.addClass(this._root,'tickerChildSelected');},_activateStory:function(bb,cb){this._clearHoverTimeouts();if(bb==this._activeStory||!this._storyCanOpenDialog(bb))return;this._deactivateStory();this._focusStory(bb);this._activeStory=bb;o.addClass(bb,'tickerStoryActive');window.Toggler&&ga.hide();if(this._logFlyouts){cb=cb||'unknown';new k('/ajax/feed/ticker/flyout.php',{src:cb}).send();}fa.log(bb);var db=this._getStoryDialog(bb);if(db){if(this._storyDialogResources[bb.id])m.loadResources(this._storyDialogResources[bb.id]);this._openDialog(db);l.bumpEntityKey('ticker_stories','flyouts.open');return;}if(!(bb.id in this._fetchedStories))this._uaCurStoryIDFetch=bb.id;this._fetchStory(bb);},handleRemoveStory:function(){this._deactivateStory(true);},_deactivateStory:function(bb){if(this._activeStory===this._deactivatingStory)return;this._deactivatingStory=this._activeStory;if(this._dialog){if(bb){this._dialog.enableBehavior(u);}else this._dialog.disableBehavior(u);this._dialog.hide();}if(this._activeStory){o.removeClass(this._activeStory,'tickerStoryActive');o.removeClass(this._activeStory,'tickerStorySelected');o.removeClass(this._root,'tickerChildSelected');}this._dialog=this._selectedStory=this._activeStory=null;this._cleanupInputFocusListener();this._cleanupContentResizeListener();this._deactivatingStory=null;},_logUserAction:function(bb,cb,event){ma(cb,bb,event,'FORCE');},_fetchStory:function(bb){clearTimeout(this._fetchToken);var cb=[],db=this._getInsertedStories(),eb=db.indexOf(bb);[-1,0,1].forEach(function(fb){var gb=db[eb+fb];gb&&cb.push(gb);},this);this._fetchToken=xa(this._fetchStories.bind(this,cb),100);},_fetchStories:function(bb){var cb=[],db,eb=function(fb){clearTimeout(db);bb.forEach(function(gb){o.conditionClass(gb,'tickerStoryFetching',fb);});};bb=bb.filter(function(fb){if(fb.id in this._fetchedStories)return false;this._fetchedStories[fb.id]=true;var gb=this._getStoryDialogParams(fb);if(!gb)return false;gb.uniq_id=fb.getAttribute('id');gb.referrer=this._tickerSource;cb.push(gb);return true;},this);if(!cb.length)return;db=this._setTimeout(eb.bind(null,true),500);new j('/ajax/feed/ticker/multi_story').setInitialHandler(this._handleDialogResponse.bind(this,cb)).setFinallyHandler(eb.bind(null,false)).setErrorHandler(ra).setData({stories:cb}).setAllowCrossPageTransition(this._tickerInSidebarMode).send();},_handleDialogResponse:function(bb,cb){if(cb&&cb.resource_map){var db=[];for(var eb in cb.resource_map){var fb=cb.resource_map[eb];if(fb.type==='css'&&!fb.permanent)db.push(eb);}if(db.length>0)for(var gb=0;gb<bb.length;gb++)this._storyDialogResources[bb[gb].uniq_id]=db;}},_tickerDeClicker:function(event){var bb=event.getTarget(),cb=y.byTag(bb,'a'),db=this._getStoryFromNode(bb),eb=this._getButtonFromNode(bb);if(db&&cb&&!eb&&o.hasClass(db,'tickerStoryClickable')&&!o.hasClass(cb,'tickerStoryAllowClick')&&!this._storyIsHidden(db))cb.setAttribute('rel','ignore');var fb=event.button==2,gb=event.type==='keydown',hb=db&&this._getActionButtonFromStory(db);if(!fb&&hb&&!gb)this._setClickedStory(db);},_handleMouseup:function(event){this._clearClickedStory();},_setClickedStory:function(bb){this._clearClickedStory();o.addClass(bb,'tickerStoryClicked');this._clickedStory=bb;},_clearClickedStory:function(){if(this._clickedStory){o.removeClass(this._clickedStory,'tickerStoryClicked');this._clickedStory=null;}},_initInfiniteScrollListener:function(){var bb=this._getInsertedStories();if(this._storiesWithActions)for(var cb=0;cb<bb.length;cb++){var db=bb[cb];if(o.hasClass(db,'tickerStoryWithButton'))this._storiesWithActions[db.getAttribute('data-story-key')]=db;}var eb=Math.max(0,bb.length-this._autoloadStoryIndex);this._infiniteScrollStory=bb[eb];this._checkInfiniteScroll();},_checkInfiniteScroll:function(){if(this._infiniteScrollStory){var bb=la.getElementPosition(this._infiniteScrollStory).y,cb=la.getElementPosition(this._container).y+la.getElementDimensions(this._container).y;if(bb<cb){var db=p.scry(this._root,'.tickerMorePager a')[0];if(db){var eb=y.byClass(db,'stat_elem')||db;new j(db.getAttribute('ajaxify')).setReadOnly(true).setRelativeTo(db).setStatusElement(eb).setAllowCrossPageTransition(true).send();}this._infiniteScrollStory=null;this._autoloadStoryIndex=5;}}},_setFixed:function(bb){if(!this._selectedStory)return;var cb=this._getStoryDialog(this._selectedStory);if(cb){cb.setFixed&&cb.setFixed(bb);cb.updatePosition();}},_setTimeout:function(bb,cb){return xa(bb,cb,!this._tickerInSidebarMode);},_scrollDialogToBottom:function(){var bb=this._dialog&&this._dialog.getContent(),cb=bb&&p.scry(bb,'.uiScrollableAreaWrap')[0],db=cb&&ba.getInstance(cb);db&&db.scrollToBottom();},_redrawFlyout:function(bb,cb){if(this._hasUFIUpdated)return;var db=this._dialog;if(db&&db.isShown()&&oa(db.getContent(),cb.form)){this._hasUFIUpdated=true;this._updateDialogPosition();}},_openDialog:function(bb){if(!this._tickerInSidebarMode)o.addClass(bb.getRoot(),'tickerStoryOverlayOnTop');this._hasUFIUpdated=false;var cb=q.getScrollPosition();this._dialog=bb.show();window.scrollTo(cb.x,cb.y);this._updateDialogPosition();this._writeSwfFrame(bb);xa(this._initCommentFocusListener.bind(this),0);xa(this._initContentResizeListener.bind(this),0);this._stupidIE7VideoResizeHack(bb);},_stupidIE7VideoResizeHack:function(bb){if(ka.ie()===7){var cb=p.scry(bb.getContent(),'.uiVideoThumb .img');cb.forEach(function(db){da.set(db,'width','');});}},_updateDialogPosition:function(){var bb=this._tickerInSidebarMode||!!y.byClass(this._root,'fixed_elem');this._dialog.setFixed&&this._dialog.setFixed(bb);this._adjustFlyoutContentHeight();this._dialog.updatePosition();},_writeSwfFrame:function(bb){var cb=this._dialog&&this._dialog.getContent(),db=p.scry(cb,'.swfObject')[0];if(!db)return;var eb=db.getAttribute('data-swfid');if(eb&&window[eb]){var fb=window[eb];fb.write(db);}},_initCommentFocusListener:function(){var bb=this._dialog&&this._dialog.getContent(),cb=bb&&p.scry(bb,'.tickerDialogFooter textarea')[0];if(!cb)return;this._listeners.inputFocus=r.listen(cb,'focus',this._scrollDialogToBottom.bind(this));},_cleanupInputFocusListener:function(){if(this._listeners.inputFocus){this._listeners.inputFocus.remove();this._listeners.inputFocus=null;}},_initContentResizeListener:function(){var bb=this._dialog&&this._dialog.getContent();if(!bb)return;this._listeners.contentResize=r.listen(bb,'click',function(){xa(this._dialog.updatePosition.bind(this._dialog),0);}.bind(this));},_cleanupContentResizeListener:function(){if(this._listeners.contentResize){this._listeners.contentResize.remove();this._listeners.contentResize=null;}},_adjustFlyoutContentHeight:function(){var bb=this._dialog&&this._dialog.getContent(),cb=bb&&p.scry(bb,'.uiScrollableAreaWrap')[0];if(!cb)return;var db=la.getElementDimensions(cb),eb=la.getElementPosition(cb),fb=p.scry(cb,'.uiUfi .uiUfiComment'),gb=p.scry(cb,".UFILikeSentence")[0],hb=this.FLYOUT_MAX_HEIGHT;if(gb){var ib=la.getElementPosition(gb).y||0;hb=Math.max(hb,this.FLYOUT_TARGET_HEIGHT_OFFSET+cb.scrollTop+ib+gb.offsetHeight-eb.y);}var jb=la.getViewportDimensions().y-this.FLYOUT_VIEWPORT_PADDING;hb=Math.min(hb,jb);var kb=hb-this.FLYOUT_TARGET_HEIGHT_OFFSET;for(var lb=0;lb<fb.length;lb++){var mb=fb[lb],nb=la.getElementPosition(mb),ob=nb.y-eb.y;if(Math.abs(ob-kb)<=this.FLYOUT_OFFSET_THRESHOLD){kb=ob+this.FLYOUT_COMMENT_OFFSET;break;}}if(db.y>=kb){da.set(cb,'height',kb+'px');da.set(cb,'max-height',null);}else{da.set(cb,'max-height',hb+'px');da.set(cb,'height',null);}},_initObjectIDs:function(){var bb=this._getAllStories();for(var cb=bb.length-1;cb>=0;cb--){var db=bb[cb].getAttribute('data-story-key');if(db){this._objectIDs[db]=true;this._lastKStoriesInsert(bb[cb]);var eb=bb[cb].getAttribute("data-dedupe-key");if(eb)this._dedupeKeys[eb]=true;}}},_handleChatOpened:function(){this._deactivateStory();},_handleChannelConnection:function(){this._checkChannelConnection();},getNewest:function(){return this._newest;}});f.exports=ab;},null);
__d('JewelQPLogging',['QPRenderer'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=false,j=null,k=false;function l(){if(k)return;if(i&&j){k=true;h.logEvent(j.promotion_id,'view',j.instance_log_data?j.instance_log_data:{});}}var m={onJewelOpened:function(){i=true;l();},updateQPLogData:function(n){j=n;l();}};f.exports=m;},null);
__d('AccessibilityLogger',['AsyncSignal','Cookie'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={COOKIE:'a11y',DECAY_MS:6*60*60*1000,DEFAULT:{sr:0,'sr-ts':Date.now(),jk:0,'jk-ts':Date.now(),kb:0,'kb-ts':Date.now(),hcm:0,'hcm-ts':Date.now()},getCookie:function(){var k=j.DEFAULT,l=i.get(j.COOKIE);if(l){l=JSON.parse(l);for(var m in k)if(m in l)k[m]=l[m];}return k;},logKey:function(k,l){var m=j.getCookie();m[k]++;var n=Date.now();if(n-m[k+'-ts']>j.DECAY_MS){new h('/ajax/accessibilitylogging',{eventName:l,times_pressed:m[k]}).send();m[k+'-ts']=n;m[k]=0;}i.set(j.COOKIE,JSON.stringify(m));},logHCM:function(){j.logKey('hcm','hcm_users');},logSRKey:function(){j.logKey('sr','sr_users');},logJKKey:function(){j.logKey('jk','jk_users');},logFocusIn:function(){j.logKey('kb','kb_users');}};f.exports=j;},null);
__d('RequestsJewel',['Animation','AccessibilityLogger','Arbiter','AsyncRequest','AsyncSignal','ChannelConstants','CSS','DOM','Event','LinkController','Parent','ScrollableArea','Vector','MarauderLogger','$','debounce','ge','shield','fbt','JewelQPLogging','requireWeak'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){if(c.__markCompiled)c.__markCompiled();var ca=null;ba('FriendBrowserCheckboxController',function(ha){return ca=ha;});var da=530,ea=30,fa=160;Object.assign(ga,{instance:null,getInstance:function(){return ga.instance;},replaceJewelTitle:function(ha,ia){o.setContent(v(ha),ia);},updateFromDOM:function(){if(ga.instance)ga.instance.fromDom();},setInitialHeight:function(){if(ga.instance)ga.instance.setHeight();},maybeLoadJewel:function(){if(ga.instance)ga.instance.maybeLoadJewel();}});function ga(ha,ia,ja){'use strict';var ka=ia;if(typeof ia!=='string'){ka=ia.inbox_folder;ja=ia.do_new_mark_read;}ga.instance=this;this.countNew=0;this.jewel=ha;this.jewelFlyoutCase=ha.getRoot();this.jewelFlyout=x('fbRequestsFlyout');this.newCountSpan=x('newRequestCount');this.folder=ka;this.doNewMarkRead=ja;this.openTimestamp=0;this.$RequestsJewel1={};this.$RequestsJewel2=0;this.shouldClearPredictionAssocOnClick=false;this.$RequestsJewel3=-1;var la=x('requestsMarkReadButton');if(la)p.listen(la,'click',y(this.$RequestsJewel4,this));this.jewel.subscribe('marked-seen',y(this.$RequestsJewel5,this));this.jewel.subscribe('closed',y(this.$RequestsJewel6,this));this.jewel.subscribe('updated',this.$RequestsJewel7.bind(this));this.jewel.subscribe('opened',this.$RequestsJewel8.bind(this));q.registerHandler(this.$RequestsJewel9.bind(this));j.subscribe(m.getArbiterType('jewel_requests_add'),this.$RequestsJewel10.bind(this));j.subscribe(m.getArbiterType('jewel_friending_notifs'),this.$RequestsJewel11.bind(this));j.subscribe(m.getArbiterType('jewel_requests_remove_old'),this.$RequestsJewel12.bind(this));j.subscribe(m.getArbiterType('friend_requests_seen'),this.$RequestsJewel13.bind(this));p.listen(this.jewelFlyout,'submit',function(na){var oa=r.byClass(na.getTarget(),'objectListItem');if(oa){n.removeClass(oa,'jewelItemNew');n.addClass(oa,'jewelItemResponded');}}.bind(this));var ma=o.find(x('fbRequestsJewel'),'a[rel="toggle"]');p.listen(ma,'focus',function(na){i.logFocusIn();}.bind(this));this.setupScroll();p.listen(window,'resize',w(function(){this.$RequestsJewel14();}.bind(this)));j.subscribe('pymk-x-out',this.$RequestsJewel15.bind(this));}ga.prototype.setupScroll=function(){'use strict';var ha=o.scry(this.jewelFlyout,'.uiScrollableAreaWrap')[0];if(ha){this.$RequestsJewel16=ha;this.$RequestsJewel17=0;this.$RequestsJewel18=p.listen(ha,'scroll',this.$RequestsJewel19.bind(this),p.Priority.$RequestsJewel20);this.$RequestsJewel15();}};ga.prototype.fromDom=function(){'use strict';o.scry(this.jewelFlyout,'.jewelItemList li.objectListItem').forEach(function(ha){var ia=ha.getAttribute('id');if(ia){var ja=x(ia+'_status'),ka=this.$RequestsJewel21(ia);if(ka.requester)this.$RequestsJewel1[ka.requester]=ia;++this.$RequestsJewel2;}}.bind(this));this.$RequestsJewel22();};ga.prototype.$RequestsJewel23=function(ha){'use strict';var ia=ha.match(/^(\d+)_(\d+)/);return ia?{requester:ia[1],type:ia[2]}:undefined;};ga.prototype.$RequestsJewel21=function(ha){'use strict';var ia=ha?this.$RequestsJewel23(ha):undefined,ja;if(ia&&ia.requester){ja=parseInt(ia.requester,10);if(isNaN(ja))ja=undefined;}var ka;if(ia&&ia.type){ka=parseInt(ia.type,10);if(isNaN(ka))ka=undefined;}return {requester:ja,type:ka};};ga.prototype.$RequestsJewel24=function(){'use strict';if(this.countNew>0)this.countNew-=1;};ga.prototype.$RequestsJewel9=function(ha,event){'use strict';var ia=r.byClass(ha,'jewelItemNew');if(ia&&r.byClass(ia,'fbRequestList')&&r.byClass(ia,'beeperEnabled')){var ja=this.$RequestsJewel23(ia.id);ja&&this.$RequestsJewel5(ja.requester,ja.type);this.$RequestsJewel24();j.inform('jewel/count-updated',{jewel:'requests',count:this.countNew});n.removeClass(ia,'jewelItemNew');}return true;};ga.prototype.$RequestsJewel25=function(){'use strict';return o.scry(this.jewelFlyout,'.uiScrollableArea')[0];};ga.prototype.$RequestsJewel19=function(){'use strict';var ha=o.scry(this.$RequestsJewel16,'.uiMorePager');if(!ha)return;var ia=ha.pop();if(ia){var ja=t.getElementPosition(ia,'viewport').y;if(ja>0)n.addClass(r.byClass(this.$RequestsJewel16,'uiScrollableArea'),'contentAfter');var ka=o.find(ia,'a');if(!ka)return;var la=t.getElementPosition(ka,'viewport').y;if(la==this.$RequestsJewel17)return;var ma=t.getElementPosition(this.$RequestsJewel16,'viewport').y+t.getElementDimensions(this.$RequestsJewel16).y;if(la-300<ma&&la>0){this.$RequestsJewel17=la;var na=ka.getAttribute('ajaxify');if(na){new k(na).setRelativeTo(ka).setStatusElement(r.byClass(ka,'stat_elem')).send();}else ca&&ca.getInstance('jewel').showMore();}}this.$RequestsJewel15();};ga.prototype.$RequestsJewel11=function(ha,ia){'use strict';if(!ia||this.jewel.isOpen())return;if(ia.obj.notif_type!=='friend_confirmed')return;if(x('fbRequestsJewelLoading')){new k().setURI('/ajax/requests/loader/').send();return;}var ja={};ja.reloadcontent=true;new k().setURI('/ajax/requests/loader/').setData(ja).send();};ga.prototype.$RequestsJewel10=function(ha,ia){'use strict';if(!ia)return;var ja=ia.obj.from,ka=ia.obj.suggester,la=this.$RequestsJewel21(this.$RequestsJewel1[ja]).type,ma=la===19&&!ka;if(!ma&&(la||this.jewel.isOpen()))return;if(x('fbRequestsJewelLoading')){new k().setURI('/ajax/requests/loader/').send();}else{var na={};na.reloadcontent=true;new k().setURI('/ajax/requests/loader/').setData(na).send();}};ga.prototype.$RequestsJewel12=function(ha,ia){'use strict';if(!ia||this.jewel.isOpen()||x('fbRequestsJewelLoading')!==null)return;var ja=this.$RequestsJewel1[ia.obj.from],ka=ja&&x(ja);if(ka){if(n.hasClass(ka,'jewelItemNew')){this.$RequestsJewel24();j.inform('jewel/count-updated',{jewel:'requests',count:this.countNew});}if(!n.hasClass(ka,'jewelItemResponded')){o.remove(ka);delete this.$RequestsJewel1[ia.obj.from];--this.$RequestsJewel2;this.$RequestsJewel22();}}};ga.prototype.$RequestsJewel4=function(){'use strict';this.jewel.markSeen();this.$RequestsJewel26();};ga.prototype.$RequestsJewel5=function(ha,ia){'use strict';var ja=o.scry(this.jewelFlyout,'li');new l('/ajax/gigaboxx/endpoint/UpdateLastSeenTime.php',{folder:this.folder,first_item:ja[0].id}).send();var ka=typeof ha!='undefined'&&typeof ia!='undefined'?{requester:ha,type:ia}:{};this.doNewMarkRead&&new l('/ajax/requests/mark_read/',ka).send();};ga.prototype.$RequestsJewel13=function(ha,ia){'use strict';j.inform('jewel/count-updated',{jewel:'requests',count:0});};ga.prototype.$RequestsJewel26=function(ha,ia){'use strict';o.scry(this.jewel.root,'li.jewelItemNew').forEach(function(ja){n.removeClass(ja,'jewelItemNew');});};ga.prototype.$RequestsJewel7=function(ha,ia){'use strict';this.countNew=ia.count;n.conditionClass(this.jewelFlyout,'beeperUnread',this.countNew>0);n.conditionClass(this.jewelFlyoutCase,'showRequests',this.countNew>0);if(this.newCountSpan){var ja=this.countNew==1?z._("{num} NEW REQUEST",[z.param('num',this.countNew)]):z._({"*":"{num} NEW REQUESTS"},[z.param('num',this.countNew,[0])]);o.setContent(this.newCountSpan,ja);}};ga.prototype.$RequestsJewel22=function(){'use strict';o.scry(this.jewelFlyout,'li.empty').forEach(function(ha){n.conditionShow(ha,this.$RequestsJewel2<=0);}.bind(this));};ga.prototype.$RequestsJewel8=function(){'use strict';j.inform('requestsJewel/opened');var ha=x('fbRequestsJewelLoading'),ia=this.$RequestsJewel25();if(!ha&&!ia){this.unhandledRequest=true;}else if(ha){var ja=Date.now();if(this.openTimestamp+5000<ja){this.openTimestamp=ja;new k().setURI('/ajax/requests/loader/').setData({log_impressions:true}).send();}}else{var ka=Object.keys(this.$RequestsJewel1);if(ka.length>0)new k().setURI('/friends/requests/log_impressions').setData({ids:ka.join(','),ref:'jewel'}).send();}ia&&s.poke(ia);aa.onJewelOpened();};ga.prototype.$RequestsJewel6=function(){'use strict';j.inform('requestsJewel/closed');this.$RequestsJewel26();};ga.prototype.$RequestsJewel27=function(){'use strict';return Math.min(Math.max(t.getViewportDimensions().y-fa,ea),da);};ga.prototype.$RequestsJewel14=function(){'use strict';if(this.$RequestsJewel25())new h(this.$RequestsJewel25()).to('height',this.$RequestsJewel27()+'px').duration(100).go();};ga.prototype.$RequestsJewel15=function(){'use strict';var ha=o.scry(this.jewelFlyout,'li.friendBrowserListUnit'),ia=t.getElementPosition(this.$RequestsJewel16,'viewport').y+t.getElementDimensions(this.$RequestsJewel16).y,ja=ha.length-1;while(ja>this.$RequestsJewel3){var ka=t.getElementPosition(ha[ja],'viewport').y;if(ka>0&&ka+t.getElementDimensions(ha[ja]).y<=ia)break;ja-=1;}var la=ja;while(ja>this.$RequestsJewel3){var ma=o.find(ha[ja],'input.friendBrowserID'),na=parseInt(ma.value,10),oa={pymk_id:na,pymk_location:'pymk_jewel'};u.log('regular_pymk_imp',undefined,oa);ja-=1;}this.$RequestsJewel3=Math.max(this.$RequestsJewel3,la);};ga.prototype.setHeight=function(){'use strict';this.$RequestsJewel25().style.height=this.$RequestsJewel27()+'px';};ga.prototype.maybeLoadJewel=function(){'use strict';if(this.unhandledRequest){this.unhandledRequest=false;this.$RequestsJewel8();}};f.exports=ga;},null);
__d('RequestsJewelLoader',['JSResource'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=h('RequestsJewel');},null);
__d('JewelPlaceholder',['CSS','Toggler'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={};function k(l,m,n){'use strict';this.jewelNode=l;this.jewelParent=n;this.$JewelPlaceholder1=m;this.$JewelPlaceholder2=false;this.$JewelPlaceholder3=i.getInstance(l).setSticky(false);i.listen('show',l,function(){this.$JewelPlaceholder2=true;h.addClass(this.jewelParent,'openToggler');}.bind(this));i.listen('hide',l,function(){this.$JewelPlaceholder2=false;h.removeClass(this.jewelParent,'openToggler');}.bind(this));}k.prototype.isOpened=function(){'use strict';return this.$JewelPlaceholder2;};k.registerJewel=function(l,m,n){'use strict';var o=new this(l,m,n);j[m]=o;return o;};k.switchOutJewel=function(l,m){'use strict';if(j[l]){var n=j[l].isOpened();delete j[l];return n;}return false;};f.exports=k;},null);
__d('reportData',['Banzai','SessionName'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={retry:true};function k(l,m){m=m||{};var n={ft:m.ft||{},gt:m.gt||{}},o='-',p=[],q='r',r=[Date.now(),0,o,l,o,o,q,b.URI?b.URI.getRequestURI(true,true).getUnqualifiedURI().toString():location.pathname+location.search+location.hash,n,0,0,0,0].concat(p),s=[i.getName(),Date.now(),'act'];h.post('eagle_eye_event',Array.prototype.concat(s,r),j);}f.exports=k;},null);
__d('JewelBase',['Promise','Event','Arbiter','ArbiterMixin','CSS','DOM','HTML','JewelPlaceholder','Keys','TabIsolation','Toggler','TooltipData','Run','csx','emptyFunction','reportData'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=function(y,z){y&&z&&this.init(y,z);};Object.assign(x,{_instancesByName:{}});Object.assign(x.prototype,k,{init:function(y,z){this.name=z.name;this.label=z.label;this.root=y;this.badge=z.badge;this.countNew=0;this.initialCount=0;this.escHandler=null;this.bootload_module=z.bootload_module;this.bootload_args=z.bootload_args;this.bootloading=null;this.togglerInstance=r.getInstance(y).setSticky(false);t.onAfterLoad(function(){return this._setupBootload();}.bind(this));if(z.keepOpenForSnowlift)this.togglerInstance.setPrePageTransitionCallback(this._onPrePageTransition.bind(this));x._instancesByName[this.name]=this;var aa=this.getFlyout(),ba=new q(aa);r.createInstance(aa).setSticky(false);this._addTooltip();r.listen('show',this.root,function(ca){this._logFirstClick();this.hasNew()&&this.markSeen();this.reset();j.inform('layer_shown',{type:'Jewel'});ba.enable();this.setupEvents();this._removeTooltip();return this._setupBootload().then(function(){this.inform('opened');}.bind(this));}.bind(this));r.listen('hide',this.root,function(ca,da){this.hasNew()&&this.markSeen();this.reset();this.inform('closed');j.inform('layer_hidden',{type:'Jewel'});ba.disable();this.removeEvents();this._addTooltip();}.bind(this));j.subscribe('jewel/count-updated',function(ca,da){da.jewel==this.name&&this.update(da);}.bind(this));j.subscribe('jewel/focus',function(ca,da){if(this.isOpen())r.hide(this.root);}.bind(this));if(o.switchOutJewel(this.name))r.show(this.root);},getRoot:function(){return this.root;},getFlyout:function(){if(typeof this._flyout==='undefined')this._flyout=m.find(this.root,".__tw");return this._flyout;},hasNew:function(){return l.hasClass(this.root,'hasNew');},isOpen:function(){return l.hasClass(this.root,'openToggler');},reset:function(){l.removeClass(this.root,'hasNew');},setContent:function(y){var z=m.find(this.root,'ul.jewelItemList');m.setContent(z,n(y));},update:function(y){this.countNew=y.count;if(typeof this.countNew==='number'&&this.countNew<0)this.countNew=0;this.badge.setLegacyContent(this.countNew);var z=isNaN(this.countNew)||this.countNew>0;l.conditionClass(this.root,'hasNew',z);this.inform('updated',y);},setupEvents:function(){this.escHandler=i.listen(document.documentElement,'keydown',function(y){if(y.keyCode===p.ESC&&this.isOpen())r.hide(this.root);}.bind(this));},removeEvents:function(){if(this.escHandler){this.escHandler.remove();this.escHandler=null;}},markSeen:function(){j.inform('jewel/count-updated',{jewel:this.name,count:0},j.BEHAVIOR_STATE);this.inform('marked-seen');},_getButton:function(){if(typeof this._button==='undefined')this._button=m.find(this.root,"a.jewelButton");return this._button;},_addTooltip:function(){var y=this._getButton();s.set(y,this.label);y.setAttribute('data-tooltip-delay','500');},_removeTooltip:function(){s.remove(this._getButton());},_onPrePageTransition:function(y,z){if(!this._isSnowliftURI(z.from)&&!this._isSnowliftURI(z.to))this.togglerInstance&&this.togglerInstance.hide();},_isSnowliftURI:function(y){return y&&y.getQueryData().hasOwnProperty('theater');},_logFirstClick:function(){this._logFirstClick=v;w('jewel_click',{gt:{count:this.countNew,initial:this.initialCount,jewel:this.name}});},_setupBootload:function(){if(!this.bootload_module)return h.resolve();if(!this.bootloading)this.bootloading=new h(function(y,z){this.bootload_module.load().then(function(aa){new aa(this,this.bootload_args);y();}.bind(this))['catch'](z);}.bind(this));return this.bootloading;}});f.exports=x;},null);
__d('ModalMask',['DOM'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=null,j=0,k={show:function(){j++;if(!i){i=h.create('div',{id:'modalMaskOverlay'});h.appendContent(document.body,i);}},hide:function(){if(j){j--;if(!j&&i){h.remove(i);i=null;}}},getNode:function(){return i;}};f.exports=k;},null);
__d('LitestandMessages',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={NEWSFEED_LOAD:'LitestandMessages/NewsFeedLoad',LEAVE_HOME:'LitestandMessages/LeaveHome',STORIES_REQUESTED:'LitestandMessages/StoriesRequested',STORIES_INSERTED:'LitestandMessages/StoriesInserted',NEWER_STORIES_INSERTED:'LitestandMessages/NewerStoriesInserted',NEW_STORIES_CONTAINER_CREATED:'LitestandMessages/NewStoriesContainer',RHC_RELOADED:'LitestandMessages/RHCReloaded'};f.exports=h;},null);
__d('LitestandChromeHomeCount',['Arbiter','AsyncRequest','CSS','DOM','Event','LitestandMessages','NavigationMessage','Style','UserAgent','WildWildWestJSGating','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s={},t,u,v=0;function w(){u&&clearTimeout(u);if(t)return;var aa=q.badge_update_time;u=setTimeout(x,aa);}function x(){if(t)return;new i().setURI('/ajax/litestand/newsfeed_count').setHandler(function(aa){if(t)return;z.setCount(aa.getPayload());w();}).setAllowCrossPageTransition(true).send();}function y(aa){o.set(s.wrapNode,'max-width',aa===0?'0':null);j.conditionClass(s.wrapNode,"_461d",aa>0);var ba=aa>s.max?s.max+'+':aa;k.setContent(s.countNode,ba);}var z={init:function(aa){s=aa;l.listen(s.homeNode,'click',function(event){var ba=event.getModifiers(),ca=ba.shift,da=ba.meta,ea=ba.control;if(ca||p.isPlatform('Mac OS X')&&da||p.isPlatform('Windows')&&ea)y(0);});h.subscribe(m.NEWSFEED_LOAD,function(){t=true;this.setCount(0);}.bind(this));h.subscribe(m.LEAVE_HOME,function(){t=false;w();});w();},setCount:function(aa){y(t?0:aa);if(q.show_badge_bk){h.inform(n.NAVIGATION_COUNT_UPDATE,{key:'nf',count:t?0:aa-v});v=aa;}}};f.exports=z;},null);
__d('ChatInput.react',['Bootloader','ChatConfig','ContentState','CompositeDraftDecorator','DraftEditor.react','DraftModifier','EditorState','EmoticonSpan.react','React','ReactDOM','emptyFunction','getDefaultKeyBinding','getEntityMatcher','getVisibleValueForContentState','handleBeforeInputForEmoticon','handleSoftNewlineForEmoticon','insertEmoticonIntoEditorState','isSoftNewlineEvent','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){'use strict';if(c.__markCompiled)c.__markCompiled();var aa=p.PropTypes,ba=r.thatReturnsNull,ca=p.createClass({displayName:'ChatInput',propTypes:{blockStyleFn:aa.func,initializeThingsWithInputFn:aa.func,inputKeyDown:aa.func,keyBindingFn:aa.func,onBlur:aa.func,onEscape:aa.func,onFocus:aa.func,onTab:aa.func,resizeFn:aa.func},getDefaultProps:function(){return {blockStyleFn:ba,keyBindingFn:s};},componentDidMount:function(){this._oldHeight=q.findDOMNode(this).getBoundingClientRect().height;this.props.resizeFn(this._oldHeight);this.props.initializeThingsWithInputFn(q.findDOMNode(this.refs.input),this.getValue);this.setState({triggeredWord:this.props.triggeredWord});},componentWillReceiveProps:function(da){if(this.state.triggeredWord!==da.triggeredWord)this.setState({triggeredWord:da.triggeredWord},this._updateDecorator);},componentDidUpdate:function(){z(function(){var da=q.findDOMNode(this).getBoundingClientRect().height;if(this._oldHeight!==da)this.props.resizeFn(da);this._oldHeight=da;}.bind(this));},getInitialState:function(){return {editorState:this._createEmptyEditorState()};},_createEmptyEditorState:function(){return n.createWithContent(j.createFromText(''),this._getDecorator());},resetState:function(){if(this.state.typeaheadReporter){this.state.typeaheadReporter.sessionEnd();this.state.typeaheadReporter.sessionStart();}this.setState({editorState:n.moveFocusToEnd(this._createEmptyEditorState()),triggeredWord:null});},_updateDecorator:function(){var da=this._getDecorator();z(function(){var ea=n.set(this.state.editorState,{decorator:da});this.setState({editorState:ea});}.bind(this));},_getDecorator:function(){return new k([{strategy:t(function(da){return da.getType()==='EMOTICON';}),component:o}]);},onChange:function(da){this.setState({editorState:da});},onReturn:function(event){if(y(event)){var da=w(this.state.editorState);if(da===this.state.editorState)return false;this.setState({editorState:da});return true;}this.props.inputKeyDown(event,this.getValue());return true;},getValueFromEditorState:function(da){var ea=da.getCurrentContent();return u(ea);},getValue:function(){return this.getValueFromEditorState(this.state.editorState);},focus:function(){this.refs.input.focus();},_handleBeforeInput:function(da){var ea=v(this.state.editorState,da);if(ea===this.state.editorState)return false;this.setState({editorState:ea});return true;},_handleFiles:function(da){var ea=/^image\//,fa=da.filter(function(ga){return ea.test(ga.type);});if(fa.length){this.props.uploadPhotoFn(fa[0]);return true;}return false;},_handlePastedFiles:function(da){return this._handleFiles(da);},_handleDroppedFiles:function(da,ea){return this._handleFiles(ea);},insertEmoticon:function(da){var ea=x(da,this.state.editorState);if(ea!==this.state.editorState)this.setState({editorState:ea});},appendText:function(da){var ea=this.state.editorState,fa=ea.getSelection(),ga=ea.getCurrentContent();ga=m.insertText(ga,fa,da);ea=n.push(ea,ga,'insert-characters');this.setState({editorState:ea});},render:function(){return (p.createElement(l,babelHelpers['extends']({ref:'input'},this.props,{editorState:this.state.editorState,onChange:this.onChange,handleBeforeInput:this._handleBeforeInput,handlePastedFiles:this._handlePastedFiles,handleDroppedFiles:this._handleDroppedFiles,handleReturn:this.onReturn,spellCheck:true,stripPastedStyles:true})));}});f.exports=ca;},null);
__d('ChatTabTypeaheadDataSource',['MercuryConfig','MercuryTypeaheadConstants','MercuryTypeaheadDataSource'],function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();k=babelHelpers.inherits(m,j);l=k&&k.prototype;function m(n){'use strict';n=n||{};n.maxResults=i.COMPOSER_CHATTAB_MAX;l.constructor.call(this,n);this.$ChatTabTypeaheadDataSource1=true;}m.prototype.buildData=function(n){'use strict';var o=[],p=[],q=[],r=[],s=[],t=[];n.forEach(function(v){var w=l.getEntry.call(this,v);switch(w.render_type){case i.FRIEND_TYPE:o.push(v);break;case i.THREAD_TYPE:if(this.$ChatTabTypeaheadDataSource1)p.push(v);break;case i.NON_FRIEND_TYPE:q.push(v);break;case i.FB4C_TYPE:r.push(v);break;case i.PAGE_TYPE:if(this.$ChatTabTypeaheadDataSource1)if(h.LinkedAgents&&h.LinkedAgents.indexOf(v.toString())>-1){t.push(v);}else s.push(v);break;default:this.logQuery({event:'chat_tab_render_type_error'});break;}},this);var u=t.concat(o,r,p,s,q);return l.buildData.call(this,u);};m.prototype.query=function(n,o,p,q){'use strict';this.logQuery({event:'query_chat_tab',query:n});return l.query.call(this,n,o,p,q);};m.prototype.respond=function(n,o,p){'use strict';var q=l.respond.call(this,n,o,p);this.logResponse({event:'query_response_chat_tab',response_query:n,response_uids:o});return q;};m.prototype.setShowThreads=function(n){'use strict';this.$ChatTabTypeaheadDataSource1=n;};f.exports=m;},null);
__d('MercuryJewelModuleLoader',['JSResource'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=h('MercuryJewel');},null);
__d('onEnclosingPageletDestroy',['Arbiter','DOMQuery'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k,l){var m=h.subscribe('pagelet/destroy',function(n,o){if(i.contains(o.root,k)){m.unsubscribe();l();}});return m;}f.exports=j;},null);
__d('AccessibilityShortcut',['AccessibilityLogger','Event','Focus','ge','onEnclosingPageletDestroy','warning'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={init:function(o,p){var q=i.listen(o,'click',function(r){r.preventDefault();var s=k(p);if(s){j.set(s);h.logSRKey();}else m(s,'Failed to set focus on element with ID: %s',p);});l(o,function(){return q.remove();});}};f.exports=n;},null);
__d('ContextualTypeaheadView',['BucketedTypeaheadView','CSS','ContextualLayer','ContextualLayerAutoFlip','ContextualLayerHideOnScroll','DOM','DOMDimensions','Style'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p,q;if(c.__markCompiled)c.__markCompiled();p=babelHelpers.inherits(r,h);q=p&&p.prototype;r.prototype.init=function(){'use strict';this.initializeLayer();q.init.call(this);};r.prototype.initializeLayer=function(){'use strict';this.context=this.getContext();this.wrapper=m.create('div');m.appendContent(this.wrapper,this.element);i.addClass(this.element,'uiContextualTypeaheadView');this.layer=new j({context:this.context,position:'below',alignment:this.alignment,causalElement:this.causalElement,permanent:true,shouldSetARIAProperties:false},this.wrapper);this.layer.enableBehavior(l);if(o.isFixed(this.context)||this.autoflip)this.layer.enableBehavior(k);this.subscribe('render',this.renderLayer.bind(this));};r.prototype.show=function(){'use strict';if(this.minWidth){o.set(this.wrapper,'min-width',this.minWidth+'px');}else if(this.width){o.set(this.wrapper,'width',this.width+'px');}else o.set(this.wrapper,'width',n.getElementDimensions(this.context).width+'px');var s=q.show.call(this);this.layer.show();this.inform('show');return s;};r.prototype.hide=function(){'use strict';this.layer.hide();this.inform('hide');return q.hide.call(this);};r.prototype.renderLayer=function(){'use strict';if(!this.isVisible())return;if(this.layer.isShown()){this.layer.updatePosition();}else this.layer.show();};r.prototype.clearText=function(){'use strict';this.layer.getCausalElement().value='';};r.prototype.getContext=function(){'use strict';return this.element.parentNode;};function r(){'use strict';p.apply(this,arguments);}f.exports=r;},null);
__d('DialogHideOnSuccess',['CSS','cx'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){'use strict';this._layer=k;}j.prototype.enable=function(){'use strict';this._subscription=this._layer.subscribe('success',this._handle.bind(this));};j.prototype.disable=function(){'use strict';this._subscription.unsubscribe();this._subscription=null;};j.prototype._handle=function(k,event){'use strict';if(h.hasClass(event.getTarget(),"_s"))this._layer.hide();};Object.assign(j.prototype,{_subscription:null});f.exports=j;},null);
__d('FBTraceHelper',['Arbiter','CSS','Event','URI'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={refreshPageWithFBTraceOn:function(){var m=new k();m.addQueryData('fbtrace',1);m.go(true);},registerButtons:function(m,n,o){j.listen(n,'click',this.refreshPageWithFBTraceOn);if(o)this._registerTransitionCallback(m,n);},_transitionCallback:function(m,n){i.hide(m);i.show(n);},_registerTransitionCallback:function(m,n){h.subscribeOnce('page_transition',function(){l._transitionCallback(m,n);});}};f.exports=l;},null);
__d('PopoverAsyncMenu',['Bootloader','Event','KeyStatus','PopoverMenu','VirtualCursorStatus','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m){var n,o;if(c.__markCompiled)c.__markCompiled();var p={},q=0;n=babelHelpers.inherits(r,k);o=n&&n.prototype;function r(s,t,u,v,w,x){'use strict';o.constructor.call(this,s,t,null,w);this._endpoint=v;this._endpointData=x||{};this._loadingMenu=u;this._instanceId=q++;p[this._instanceId]=this;this._mouseoverListener=i.listen(t,'mouseover',this.fetchMenu.bind(this));}r.prototype._onLayerInit=function(){'use strict';if(!this._menu&&this._loadingMenu)this.setMenu(this._loadingMenu);this._popover.getLayer().subscribe('key',this._handleKeyEvent.bind(this));this._triggerInfo={isKeyDown:j.isKeyDown(),isVirtualCursorTriggered:l.isVirtualCursorTriggered()};m(function(){return this.fetchMenu();}.bind(this));};r.prototype._onPopoverHide=function(){'use strict';o._onPopoverHide.call(this);this._triggerInfo=null;};r.prototype.fetchMenu=function(){'use strict';if(this._fetched)return;h.loadModules(["AsyncRequest"],function(s){new s().setURI(this._endpoint).setData(Object.assign({pmid:this._instanceId},this._endpointData)).send();}.bind(this));this._fetched=true;if(this._mouseoverListener){this._mouseoverListener.remove();this._mouseoverListener=null;}};r.prototype._setFocus=function(s){'use strict';var t=this._triggerInfo||{},u=t.isKeyDown,v=t.isVirtualCursorTriggered;this.setInitialFocus(s,u||v);this._triggerInfo=null;};r.setMenu=function(s,t){'use strict';var u=p[s];u.setMenu(t);u._setFocus(t);};r.getInstance=function(s){'use strict';return p[s];};r.getInstanceByTriggerElem=function(s){'use strict';var t=null;Object.keys(p).forEach(function(u){if(p[u]._triggerElem==s)t=p[u];});return t;};f.exports=r;},null);
__d('Typeahead',['ArbiterMixin','BehaviorsMixin','DataStore','DOM','Event','Parent','Run','Style','emptyFunction','ge','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s,t;if(c.__markCompiled)c.__markCompiled();s=babelHelpers.inherits(u,r(h,i));t=s&&s.prototype;function u(v,w,x,y){'use strict';t.constructor.call(this);this.args={data:v,view:w,core:x};j.set(y,'Typeahead',this);this.element=y;}u.prototype.init=function(v){'use strict';this.init=p;this.getCore();this.getView().setAccessibilityControlElement(this.getCore().getElement());this.proxyEvents();this.initBehaviors(v||[]);this.inform('init',this);this.data.bootstrap();this.core.focus();};u.prototype.getData=function(){'use strict';if(!this.data){var v=this.args.data;this.data=v;this.data.init();}return this.data;};u.prototype.getView=function(){'use strict';if(!this.view){var v=this.args.view,w=v.node||q(v.node_id);if(!w){w=k.create('div',{className:'uiTypeaheadView'});k.appendContent(this.element,w);}if(typeof v.ctor==='string'){this.view=new window[v.ctor](w,v.options||{});}else this.view=new v.ctor(w,v.options||{});this.view.init();this.view.setTypeahead(this.element);}return this.view;};u.prototype.getCore=function(){'use strict';if(!this.core){var v=this.args.core;if(typeof v.ctor==='string'){this.core=new window[v.ctor](v.options||{});}else this.core=new v.ctor(v.options||{});this.core.init(this.getData(),this.getView(),this.getElement());}return this.core;};u.prototype.getElement=function(){'use strict';return this.element;};u.prototype.setHeight=function(v){'use strict';if(v!=='auto')v=v+'px';o.set(this.element,'height',v);};u.prototype.swapData=function(v){'use strict';return this.$Typeahead1(v,true);};u.prototype.swapDataNoCoreReset=function(v){'use strict';return this.$Typeahead1(v,false);};u.prototype.$Typeahead1=function(v,w){'use strict';var x=this.core;this.data=this.args.data=v;v.init();if(x){x.data=v;x.initData();if(w)x.reset();this.proxyEvents();}v.bootstrap();return v;};u.prototype.proxyEvents=function(){'use strict';[this.data,this.view,this.core].forEach(function(v){v.subscribe(v.events,this.inform.bind(this));},this);};u.prototype.initBehaviors=function(v){'use strict';v.forEach(function(w){if(typeof w==='string'){if(b.TypeaheadBehaviors&&b.TypeaheadBehaviors[w]){b.TypeaheadBehaviors[w](this);}else n.onLoad(function(){if(b.TypeaheadBehaviors)(b.TypeaheadBehaviors[w]||p)(this);}.bind(this));}else this.enableBehavior(w);},this);};u.getInstance=function(v){'use strict';var w=m.byClass(v,'uiTypeahead');return w?j.get(w,'Typeahead'):null;};u.initNow=function(v,w,x){'use strict';if(x)x.init(v);v.init(w);};u.init=function(v,w,x,y){'use strict';if(!k.isNodeOfType(v,['input','textarea']))v=k.scry(v,'input')[0]||k.scry(v,'textarea')[0];var z=false;try{z=document.activeElement===v;}catch(aa){}if(z){u.initNow(w,x,y);}else var ba=l.listen(v,'focus',function(){u.initNow(w,x,y);ba.remove();});};f.exports=u;},null);
__d('BrowserPushDirectPromptInstaller',['Arbiter','AsyncRequest','BanzaiLogger','BrowserPushSessionChange.react','DOM','NotificationPermissionNotice.react','NotificationPermissionRequest.react','PushRegistration','React','ReactDOM','XBrowserPushDisabledController','XBrowserPushXOutController','XPushRegisterServiceWorkerController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=false;function v(event,z){var aa={event:event,appid:z,surface:'prompt'};j.log('BrowserPushLoggerConfig',aa);}function w(z){if(!u){u=true;q.unmountComponentAtNode(z);}}function x(z,aa){var ba=l.insertBefore(z,l.create('span')),ca=ba.pop();q.render(p.createElement(k,{onHide:function(){q.unmountComponentAtNode(z);},push:aa}),ca);}var y={installPush:function(z,aa,ba,ca,da,ea,fa){var ga=o.get(z,aa);ga.isPushRegistered(ca,t,r,i,!!ea,function(){x(ba,ga);}).then(function(ha){if(ha||da)return;if(o.pushPermissionIsPending())q.render(p.createElement(n,{onHide:function(){w(ba);}}),ba);v('turn_on',aa);ga.registerPushWithFinishedCallBack(t,i,function(){x(ba,ga);},function(){h.inform('BrowserPushInstall/installed');}).then(function(){w(ba);v('install',aa);})['catch'](function(ia){w(ba);if(window.Notification&&window.Notification.permission==='denied'){q.render(p.createElement(m,{onHide:function(){q.unmountComponentAtNode(ba);},browserName:fa}),ba);v('deny',aa);}else v('install_ignore',aa);var ja=s.getURIBuilder().getURI();new i().setURI(ja).setMethod('post').send();v('xout',aa);});})['catch'](function(){});}};f.exports=y;},null);
__d('NotificationJewelReminderLoader',['JSResource'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports={init:function(i){h('NotificationJewelReminder').load().done(function(j){new j(i);});}};},null);
__d('SyncRequestNotificationBeeperItemContents.react',['Animation','Image.react','ImageBlock.react','NotificationBeeperItemCloseButton.react','NotificationUserActions','React','ReactDOM','SyncRequest.react','SyncRequestStatusEnum','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=m.createClass({displayName:'SyncRequestNotificationBeeperItemContents',_markAsRead:function(){l.markNotificationsAsRead([this.props.beep.notificationID]);this.props.onHide();},_onClose:function(){this._markAsRead();this.props.onHide();},_doFlash:function(){new h(n.findDOMNode(this.refs.inner)).from('opacity','0').to('opacity','1').duration(200).go();},componentDidMount:function(){if(this.props.beep.rendererData.status!=p.PENDING)this.props.onReadyToHide(this.props.beep.notificationID);},componentDidUpdate:function(s){if(this.props.beep.rendererData.status!=p.PENDING&&s.beep.rendererData.status==p.PENDING)this.props.onReadyToHide(this.props.beep.notificationID);},onRequestStatusUpdate:function(s,t){if(s!=p.PENDING&&t==p.PENDING)this.props.onReadyToHide(this.props.beep.notificationID);},render:function(){var s=this.props.beep,t=s.rendererData;return (m.createElement('div',{ref:'inner'},m.createElement(k,{onClick:this._onClose}),m.createElement(j,{className:"_3soj"},m.createElement(i,{src:s.actors[0].profile_picture.uri,className:"_3sok"}),m.createElement('div',{className:"_3sol"},m.createElement(o,{app:t.app,creationTime:t.creation_time,requestId:t.id.toString(),receiver:t.receiver,sender:t.sender,status:t.status,timeout:t.timeout,timeRemaining:t.time_remaining,viewerId:t.receiver.id,onStatusUpdate:this.onRequestStatusUpdate})))));}});f.exports=r;},null);
__d('LiveMessageReceiver',['Arbiter','ChannelConstants','emptyFunction','shield'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m){this.eventName=m;this.subs=null;this.handler=j;this.shutdownHandler=null;this.registered=false;this.appId=1;}Object.assign(l,{getAppMessageType:function(m,n){return 'live_message/'+m+':'+n;},route:function(m){var n=function(o){var p=l.getAppMessageType(m.app_id,m.event_name);h.inform(p,o,h.BEHAVIOR_PERSISTENT);};n(m.response);}});Object.assign(l.prototype,{setAppId:function(m){this.appId=m;return this;},setHandler:function(m){this.handler=m;this._dirty();return this;},setRestartHandler:j,setShutdownHandler:function(m){this.shutdownHandler=k(m);this._dirty();return this;},_dirty:function(){if(this.registered){this.unregister();this.register();}},register:function(){var m=function(o,p){return this.handler(p);}.bind(this),n=l.getAppMessageType(this.appId,this.eventName);this.subs={};this.subs.main=h.subscribe(n,m);if(this.shutdownHandler)this.subs.shut=h.subscribe(i.ON_SHUTDOWN,this.shutdownHandler);this.registered=true;return this;},unregister:function(){if(!this.subs)return this;for(var m in this.subs)if(this.subs[m])this.subs[m].unsubscribe();this.subs=null;this.registered=false;return this;}});f.exports=l;},null);
__d('initLiveMessageReceiver',['Arbiter','ChannelConstants','LiveMessageReceiver'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();h.subscribe(i.getArbiterType('app_msg'),function(k,l){j.route(l.obj);});},null);
__d('PrivacyLiteFlyoutBootloader',['regeneratorRuntime','Promise','Deferred','JSResource'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=false,m={loadFlyout:function n(){var o,p,q,r,s,t,u,v,event,w,x;return h.async(function y(z){while(1)switch(z.prev=z.next){case 0:if(!l){z.next=2;break;}return z.abrupt('return');case 2:l=true;z.next=5;return h.awrap(i.all([k('PrivacyLiteFlyout').load(),this._getDeferredFlyoutElements().getPromise(),this._getDeferredFooterElements().getPromise()]));case 5:o=z.sent;p=o[0];q=o[1];r=q.flyout;s=q.flyoutRoot;t=q.badge;u=o[2];v=u.footer;event=u.event;w=u.settingsExitPoint;x=u.basicsExitPoint;p.registerFlyoutToggler(r,s,t?t():null);p.registerSettingsAndBasicsLinkLogging(v,event,w,x);p.loadBody();case 19:case 'end':return z.stop();}},null,this);},_getDeferredFlyoutElements:function(){if(this._deferredFlyoutElements==null)this._deferredFlyoutElements=new j();return this._deferredFlyoutElements;},registerFlyoutElements:function(n,o,p){this._getDeferredFlyoutElements().resolve({flyout:n,flyoutRoot:o,badge:p});},_getDeferredFooterElements:function(){if(this._deferredFooterElements==null)this._deferredFooterElements=new j();return this._deferredFooterElements;},registerFooterElements:function(n,event,o,p){this._getDeferredFooterElements().resolve({footer:n,event:event,settingsExitPoint:o,basicsExitPoint:p});}};f.exports=m;},null);
__d('PrivacyLiteFlyoutHelp',['Arbiter','AsyncRequest','Banzai','ContextualHelpSearchController','CSS','DOM','Event','Parent','csx','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;function t(u,v,w,x,y){this._width=315;s=m.find(v,'input');var z=m.create('div');k.call(this,u,s,z,w,x,{focusSearchBox:false});r=o.bySelector(v,"._8-a");n.listen(y,'click',function(){this._hideSearch(this);j.post('privacy_lite',{event:'plite_search_collapse',exit_point:null});}.bind(this));h.subscribe('PrivacyLiteFlyout/expandingSection',this._hideSearch.bind(this));var aa=m.scry(r,"._d1r")[0];aa&&n.listen(aa,'click',function(){l.addClass(r,"_aw6");s.focus();j.post('privacy_lite',{event:'plite_search_expand',exit_point:null});if(!this.suggestedResults)new i('/ajax/privacy/privacy_lite/help_suggestions').setHandler(function(ba){var ca=ba.getPayload().searchSuggestions,da=m.find(r,"._4_8m");m.setContent(da,ca);l.addClass(r,"_4_8l");}.bind(this)).send();}.bind(this));}Object.assign(t.prototype,k.prototype,{source:'privacy_shortcuts',_hideSearch:function(){this.clearResults();l.removeClass(r,"_aw6");},show:function(u){if(u===this.topics_area){l.removeClass(r,"_aw7");return;}else if(u===this.loader){l.addClass(r,"_aw7");l.hide(this.results_area);}else l.hide(this.loader);l.show(u);}});f.exports=t;},null);
__d('ViewasChromeBar',['Arbiter','AsyncRequest','CSS','DOM','Event','Focus','ModalMask','PageTransitionsRegistrar','Parent','csx','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s='ViewasChromeBar/initialized',t=null,u=false;function v(y){h.subscribe(s,y);}function w(y){j.addClass(y,"_7g7");var z=k.find(y,"._7g0");m.set(k.find(z,'.textInput'));}var x={initChromeBar:function(y){if(u)return;t=y;u=true;h.inform(s,null,h.BEHAVIOR_STATE);},update:function(y,z){v(function(){k.setContent(t,y);if(z)new i('/ajax/privacy/glasgow/viewas_bar_flyout_open').send();});},registerSpecificModeOnClick:function(y){l.listen(y,'click',w.bind(null,p.bySelector(y,"._7f-")));},registerFlyoutModalMask:function(){n.show();o.registerHandler(n.hide,10);}};f.exports=x;},null);
__d('FacebarPlaceholderShortcut',['KeyEventController','Run','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l){'use strict';this._input=l;this._listener=null;}k.prototype.enable=function(){'use strict';this._registerListener();};k.prototype._registerListener=function(){'use strict';this._listener&&this._listener.remove();this._listener=h.registerKey('SLASH',this._handleKeydown.bind(this));i.onLeave(function(){j(this._registerListener.bind(this),0);}.bind(this));};k.prototype.disable=function(){'use strict';this._listener&&this._listener.remove();this._listener=null;};k.prototype._handleKeydown=function(l){'use strict';this._input.focus();return false;};f.exports=k;},null);
__d("XFacebarBootloadController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/typeahead\/search\/facebar\/bootload\/",{placeholder_id:{type:"String"}});},null);
__d('FacebarBootloader',['AsyncRequest','CSS','Event','$','Run','BanzaiODS','SubscriptionsHandler','getActiveElement','XFacebarBootloadController','FacebarPlaceholderShortcut'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r='facebar_bootloader',s=r+'_',t={isRequested:false,isFocused:false,isInitialized:false,init:function(u,v,w,x){this.reset();this.subscriptions=new n();this.placeholderID=w;this.searchInput=u;this.shortcutHandler=new q(u);this.loadingIndicator=v;this.shortcutHandler.enable();this.subscriptions.addSubscriptions(j.listen(u,'focus',function(){this.requestSearch();this.showLoadingIndicator();}.bind(this)),j.listen(k(w),'mouseover',this.requestSearch.bind(this)));if(x)this.subscriptions.addSubscriptions(j.listen(window,'load',this.requestSearch.bind(this)));l.onUnload(this.reset.bind(this));this.isInitialized=true;if(u.value||o()==u){this.requestSearch();this.showLoadingIndicator();}},showLoadingIndicator:function(){if(this.loadingIndicator)i.show(this.loadingIndicator);},reset:function(){this.subscriptions&&this.subscriptions.release();this.shortcutHandler&&this.shortcutHandler.disable();this.searchInput=this.subscriptions=this.shortcutHandler=null;this.loadingIndicator=null;this.isRequested=this.isFocused=false;},requestSearch:function(){if(o()==this.searchInput&&!this.isFocused){this.isFocused=true;this.focusTime=Date.now();}if(this.isRequested||!this.isInitialized)return;this.isRequested=true;var u=p.getURIBuilder().setString('placeholder_id',this.placeholderID).getURI(),v=new h();v.setURI(u).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setErrorHandler(function(w){m.bumpEntityKey(r,s+'request_failed');if(w&&w.errorSummary){m.bumpEntityKey(r,s+'request_failed_'+w.errorSummary);}else m.bumpEntityKey(r,s+'request_failed_no_error_summary');this.isRequested=false;}).send();},setFocus:function(u,v,w){if(!this.searchInput)return;m.bumpEntityKey(r,s+'response_arrived');if(this.searchInput.value||this.isFocused){u.getCore().isFocused=true;u.getCore().input.setValue(w.fromString(this.searchInput.value),true);u.getCore().setStartTime(this.focusTime);v.focus();v.setSelection({length:this.searchInput.selectionEnd-this.searchInput.selectionStart,offset:this.searchInput.selectionStart});v.togglePlaceholder();}this.reset();}};f.exports=t;},null);
__d('TypeaheadBestName',['FamilyMentionsData','TokenizeUtil'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){'use strict';this._typeahead=k;}j.prototype.enable=function(){'use strict';var k=this._typeahead.getView(),l=this._getAvailableAlternateNameFields();this._subscription=k.subscribe('beforeRender',function(m,n){var o=n.value;for(var p=0;p<n.results.length;++p){var q=n.results[p],r=this._getNameToDisplay(q,o,l);if(r!==null){q.text=r;if(q.hasOwnProperty('default_name')&&q.text!==q.default_name){q.subtext=q.default_name;}else q.subtext=null;}}}.bind(this));};j.prototype.disable=function(){'use strict';this._typeahead.getView().unsubscribe(this._subscription);this._subscription=null;};j.prototype._getNameToDisplay=function(k,l,m){'use strict';if(k.hasOwnProperty('default_name')&&i.isQueryMatch(l,k.default_name))return k.default_name;for(var n=0;n<m.length;n++){var o=k[m[n]];if(o==undefined)continue;for(var p=0;p<o.length;p++){var q=o[p];if(i.isQueryMatch(l,q))return q;}}if(k.hasOwnProperty('default_name'))return k.default_name;return null;};j.prototype._getAvailableAlternateNameFields=function(){'use strict';var k=['alternate_names'];if(h.allowFamilyNames)k.push('family_names');return k;};Object.assign(j.prototype,{_subscription:null});f.exports=j;},null);
__d('legacy:BestNameTypeaheadBehavior',['TypeaheadBestName'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.buildBestAvailableNames=function(i){i.enableBehavior(h);};},3);
__d('CrossDomainButton',['AsyncRequest','Event','isFacebookURI','URI'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={initButton:function(m,n){i.listen(m,'click',function(){new h().setAllowCrossOrigin(true).setReadOnly(true).setURI(n).setMethod('GET').setRelativeTo(m).send();});},initButtonWithinIFrame:function(m,n,o){if(!j(new k(n))||!j(new k(o))){throw new Error("Invalid URI in button initialization.");}else i.listen(m,'click',function(){new h().setURI(n).setRelativeTo(m).setHandler(function(){window.top.location.href=o;}).send();});}};f.exports=l;},null);
__d('TrafficNub',['Event'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={bindDialog:function(j,k){h.listen(j,'click',k.show.bind(k));}};f.exports=i;},null);
__d('PopoverLoadingMenu',['BehaviorsMixin','DOM','PopoverMenuInterface','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();m=babelHelpers.inherits(o,j);n=m&&m.prototype;function o(p){'use strict';n.constructor.call(this);this._config=p||{};this._theme=p.theme||{};}o.prototype.getRoot=function(){'use strict';if(!this._root){this._root=i.create('div',{className:l("_54nq",this._config.className,this._theme.className)},i.create('div',{className:"_54ng"},i.create('div',{className:"_54nf _54af"},i.create('span',{className:"_54ag"}))));if(this._config.behaviors)this.enableBehaviors(this._config.behaviors);}return this._root;};Object.assign(o.prototype,h,{_root:null});f.exports=o;},null);
__d('ClearableTypeahead',['Event'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={resetOnCloseButtonClick:function(j,k){h.listen(k,'click',function(){var l=j.getCore();l.getElement().focus();l.reset();});}};f.exports=i;},null);
__d('TypeaheadShowLoadingIndicator',['CSS'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){'use strict';this._typeahead=j;}i.prototype.enable=function(){'use strict';this._subscription=this._typeahead.subscribe('loading',function(j,k){h.conditionClass(this._typeahead.getElement(),'typeaheadLoading',k.loading);h.conditionClass(this._typeahead.getView().getElement(),'typeaheadViewLoading',k.loading);}.bind(this));};i.prototype.disable=function(){'use strict';this._typeahead.unsubscribe(this._subscription);this._subscription=null;};Object.assign(i.prototype,{_subscription:null});f.exports=i;},null);
__d('legacy:ShowLoadingIndicatorTypeaheadBehavior',['TypeaheadShowLoadingIndicator'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.showLoadingIndicator=function(i){i.enableBehavior(h);};},3);
__d('CompactTypeaheadRenderer',['BadgeHelper','DOM','emojiAndEmote','TypeaheadFacepile'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m,n){var o=[];if(m.xhp)return i.create('li',{className:'raw'},m.xhp);var p=m.photos||m.photo;if(p){if(p instanceof Array){p=k.render(p);}else p=i.create('img',{alt:'',src:p});o.push(p);}var q=m.debug_info;if(q)o.push(i.create('span',{className:'debugInfo'},q));if(m.text){var r=j(m.text);if(m.is_verified){r.push(h.renderBadge('xsmall','verified'));}else if(m.is_work_user){r.push(h.renderBadge('xsmall','work'));}else if(m.is_trending_hashtag)r.push(h.renderBadge('xsmall','trending'));o.push(i.create('span',{className:'text'},r));}var s=m.subtext,t=m.category;if(s||t){var u=[];s&&u.push(s);s&&t&&u.push(" \u00b7 ");t&&u.push(t);o.push(i.create('span',{className:'subtext'},u));}var v=i.create('li',{className:m.type||''},o);if(m.text){v.setAttribute('title',m.text);v.setAttribute('aria-label',m.text);}return v;}l.className='compact';f.exports=l;},null);
__d('legacy:CompactTypeaheadRenderer',['CompactTypeaheadRenderer'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadRenderers)b.TypeaheadRenderers={};b.TypeaheadRenderers.compact=c('CompactTypeaheadRenderer');},3);
__d('XUIBadge',['CSS','DOM','cx','invariant'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(n){return parseInt(n,10)===n;}function m(n){'use strict';this.target=n.target;this.count=n.count;this.maxcount=n.maxcount;}m.prototype.getCount=function(){'use strict';return this.count;};m.prototype.setCount=function(n){'use strict';!l(n)?k(0):undefined;!(n>=0)?k(0):undefined;this.count=n;h.conditionClass(this.target,'hidden_elem',this.count===0);if(n>this.maxcount){i.setContent(this.target,this.maxcount+'+');h.addClass(this.target,"_5ugi");}else{i.setContent(this.target,n);h.removeClass(this.target,"_5ugi");}};m.prototype.setLegacyContent=function(n){'use strict';if(typeof n==='string'){h.conditionClass(this.target,'hidden_elem',n==0);i.setContent(this.target,n);h.removeClass(this.target,"_5ugi");}else this.setCount(n);};m.prototype.increment=function(){'use strict';this.setCount(this.getCount()+1);};f.exports=m;},null);
__d('LayerPage',['Arbiter','CSS','DOM','Layer','LayerButtons','LayerFormHooks','LayerHideOnTransition','LayerMouseHooks','LayerTabIsolation','ModalLayer','Style'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s,t;if(c.__markCompiled)c.__markCompiled();s=babelHelpers.inherits(u,k);t=s&&s.prototype;u.prototype._configure=function(y,z){'use strict';this._fitWidth=!!y.fitWidth;if(y.width)this._width=Math.floor(y.width);if(y.bottomMargin!==undefined)this._bottomMargin=y.bottomMargin;t._configure.call(this,y,z);};u.prototype._getDefaultBehaviors=function(){'use strict';return t._getDefaultBehaviors.call(this).concat([x,l,m,n,o,p,q]);};u.prototype.updatePosition=function(){'use strict';var y=j.find(this.getRoot(),'div.uiLayerPage');if(this._fitWidth){r.set(y,'width',w+'%');}else if(this._width){var z=j.find(y,'div.uiLayerPageContentWrap'),aa=this._width;if(i.hasClass(z,'uiLayerPageDefaultPadding'))aa+=2*v;r.set(y,'width',aa+'px');}return true;};u.prototype.getContentRoot=function(){'use strict';if(!this._contentRoot)this._contentRoot=j.find(this.getRoot(),'.uiOverlayContent');return this._contentRoot;};u.prototype.getBottomMargin=function(){'use strict';return this._bottomMargin;};function u(){'use strict';s.apply(this,arguments);}var v=15,w=95;Object.assign(u.prototype,{_width:null,_bottomMargin:null});function x(y){'use strict';this._layer=y;}x.prototype.enable=function(){'use strict';this._subscription=this._layer.subscribe(['show','hide'],function(y,z){if(y==='show'){h.inform('layer_shown',{type:'LayerPage'});}else h.inform('layer_hidden',{type:'LayerPage'});});};x.prototype.disable=function(){'use strict';this._subscription.unsubscribe();this._subscription=null;};Object.assign(x.prototype,{_subscription:null});f.exports=u;},null);
__d('LayerRemoveOnHide',['DOM'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){'use strict';this._layer=j;}i.prototype.enable=function(){'use strict';this._subscription=this._layer.subscribe('hide',h.remove.bind(null,this._layer.getRoot()));};i.prototype.disable=function(){'use strict';if(this._subscription){this._subscription.unsubscribe();this._subscription=null;}};Object.assign(i.prototype,{_subscription:null});f.exports=i;},null);
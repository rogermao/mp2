/*!CK:3717732802!*//*1456170533,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["UHj3e"]); }

__d('FBPaymentsForm.react',['FBPaymentsErrorNotice.react','React','cx','getObjectValues'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=i.PropTypes,m=i.createClass({displayName:'FBPaymentsForm',propTypes:{errorTitle:l.string,onValidation:l.func.isRequired,prefilledFormData:l.object,saveErrors:l.object,showIcons:l.bool,showLabels:l.bool,showPlaceholderOnFocus:l.bool,showSecondaryIcons:l.bool,useGutters:l.bool},getDefaultProps:function(){return {prefilledFormData:{},saveErrors:null,showIcons:true,showLabels:false,showPlaceholderOnFocus:false,showSecondaryIcons:false,useGutters:false};},getInitialState:function(){var n=this.props.prefilledFormData,o=this.props.children,p={};i.Children.forEach(o,function(q,r){p[q.props.name]={valid:!q.props.required,value:n?n[q.props.name]:''};});return {fields:p,isValid:false};},_fieldKeyOrder:[],handleFormValueChange:function(n,o,p,q){var r=this.state.fields;r[n]={valid:p,value:o};this.validateForm();if(this.props.autoTab===true&&q&&p){var s=this._fieldKeyOrder.indexOf(n);if(s!==-1){var t=this._fieldKeyOrder[s+1];if(t){var u=this.refs[t];u&&u.refs.input.focusInput();}}}},validateForm:function(){var n=true,o=this.state.fields;n=!k(o).some(function(p){return !p.valid;});this.setState({isValid:n});this.props.onValidation(n,this.serializeFormFields());},serializeFormFields:function(){var n=this.state.fields,o={};for(var p in n)if(n.hasOwnProperty(p))o[p]=n[p].value;return o;},getSaveError:function(n){var o='',p=this.props.saveErrors;if(p&&p.fields&&p.fields[n]){o=p.fields[n].message;if(o.__html)o=o.__html;}return o;},renderGeneralError:function(){var n=this.getGeneralError();if(n)return (i.createElement(h,{error:n}));},getGeneralError:function(){if(this.props.saveErrors&&this.props.saveErrors.general)return this.props.saveErrors.general;return null;},renderFormFields:function(){var n=[],o=[],p=[],q=0,r=this.props.children,s=i.Children.count(r),t=[];i.Children.forEach(r,function(u,v){var w=v===s-1;if(!u)return null;var x=parseInt(u.props.width||'100',10),y=u.props.name;u=i.cloneElement(u,{key:y,onChange:this.handleFormValueChange,saveError:this.getSaveError(y),showIcon:this.props.showIcons,showLabel:this.props.showLabels,showPlaceholderOnFocus:this.props.showPlaceholderOnFocus,showSecondaryIcon:this.props.showSecondaryIcons,useGutter:this.props.useGutters,value:this.state.fields[y].value,ref:y});t.push(y);if(!u.props.ignoreStyling){if(Math.round(q)<100)n.push(u);q+=x;if(Math.round(q)===100||w){o.push(i.createElement('div',{className:(this.props.useGutters?"_284-":'')+(' '+"_284_")+(n.length>1?' '+"_2850":'')+(o.length===0?' '+"_2851":'')+(w?' '+"_2852":''),key:o.length},n));n=[];q=0;}}else p.push(u);}.bind(this));this._fieldKeyOrder=t;return p.concat(o);},render:function(){return (i.createElement('form',{className:"_2853"},this.renderGeneralError(),this.renderFormFields()));}});f.exports=m;},null);